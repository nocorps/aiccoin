import{_ as U,H as V,b as c,x as N,c as u,a as A,d as t,y as g,t as d,f as q,w as b,v as p,e as F,F as B,z as R,A as h,B as y,j as T,I as L,i as E,J as z,K as I,r as M,o as k}from"./index-BSy1uvxl.js";const j={name:"AddTask",components:{Toast:V},setup(){const m=c("tasks"),s=c(!1),_=c([]),a=c([]),v=c([]),i=c({title:"",description:"",award:0,secret:"",url_redirect:"",task_id:""}),f=N(()=>m.value==="tasks"?_.value:a.value),e=async()=>{try{const o=await h(y(T,"tasks")),l=await h(y(T,"collaborationTasks"));_.value=o.docs.map(n=>({id:n.id,...n.data()})),a.value=l.docs.map(n=>({id:n.id,...n.data()}))}catch{r("Error fetching tasks","error")}},w=async()=>{try{const o=m.value==="tasks"?"tasks":"collaborationTasks",l={...i.value,task_id:i.value.task_id||`task_${Date.now()}`};s.value&&i.value.id?(await L(E(T,o,i.value.id),l),r("Task updated successfully! ğŸ‰")):(await z(y(T,o),l),r("Task added successfully! ğŸ‰")),await e(),D()}catch{r("Error saving task","error")}},C=o=>{i.value={...o},s.value=!0,window.scrollTo({top:0,behavior:"smooth"})},x=async o=>{if(confirm("Are you sure you want to delete this task?"))try{const l=m.value==="tasks"?"tasks":"collaborationTasks";await I(E(T,l,o)),await e(),r("Task deleted successfully! ğŸ—‘ï¸")}catch{r("Error deleting task","error")}},D=()=>{i.value={title:"",description:"",award:0,secret:"",url_redirect:"",task_id:""},s.value=!1},r=(o,l="success")=>{const n=Date.now();v.value.push({id:n,message:o,type:l}),setTimeout(()=>{v.value=v.value.filter(S=>S.id!==n)},3e3)};return e(),{selectedTab:m,isEditing:s,taskData:i,filteredTasks:f,toasts:v,handleSubmit:w,editTask:C,deleteTask:x,resetForm:D}}},H={class:"task-container"},J={class:"tabs"},K={class:"input-group"},G={class:"input-group"},O={class:"form-row"},P={class:"input-group"},Q={class:"input-group"},W={class:"input-group"},X={class:"form-actions"},Y={type:"submit",class:"submit-button"},Z={class:"task-list"},$={key:0,class:"tasks-grid"},tt={class:"task-meta"},st={class:"award"},at={class:"secret"},et={class:"task-actions"},ot=["onClick"],lt=["onClick"],it={key:1,class:"no-tasks"};function nt(m,s,_,a,v,i){const f=M("Toast");return k(),u("div",H,[A(f,{toasts:a.toasts},null,8,["toasts"]),t("div",J,[t("button",{class:g({active:a.selectedTab==="tasks"}),onClick:s[0]||(s[0]=e=>a.selectedTab="tasks")}," ğŸ“ Regular Tasks ",2),t("button",{class:g({active:a.selectedTab==="collaborations"}),onClick:s[1]||(s[1]=e=>a.selectedTab="collaborations")}," ğŸ¤ Collaboration Tasks ",2)]),t("div",{class:g(["task-form",{editing:a.isEditing}])},[t("h2",null,d(a.isEditing?"âœï¸ Edit Task":"â• Add New Task"),1),t("form",{onSubmit:s[8]||(s[8]=q((...e)=>a.handleSubmit&&a.handleSubmit(...e),["prevent"])),class:"admin-form"},[t("div",K,[s[9]||(s[9]=t("label",null,"Title",-1)),b(t("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>a.taskData.title=e),type:"text",placeholder:"Enter task title",required:"",class:"admin-input"},null,512),[[p,a.taskData.title]])]),t("div",G,[s[10]||(s[10]=t("label",null,"Description",-1)),b(t("textarea",{"onUpdate:modelValue":s[3]||(s[3]=e=>a.taskData.description=e),placeholder:"Enter task description",required:"",class:"admin-input",rows:"4"},null,512),[[p,a.taskData.description]])]),t("div",O,[t("div",P,[s[11]||(s[11]=t("label",null,"Reward (coins)",-1)),b(t("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>a.taskData.award=e),type:"number",placeholder:"Enter reward amount",required:"",class:"admin-input",min:"0"},null,512),[[p,a.taskData.award,void 0,{number:!0}]])]),t("div",Q,[s[12]||(s[12]=t("label",null,"Secret Code",-1)),b(t("input",{"onUpdate:modelValue":s[5]||(s[5]=e=>a.taskData.secret=e),type:"text",placeholder:"Enter verification code",required:"",class:"admin-input"},null,512),[[p,a.taskData.secret]])])]),t("div",W,[s[13]||(s[13]=t("label",null,"Task URL",-1)),b(t("input",{"onUpdate:modelValue":s[6]||(s[6]=e=>a.taskData.url_redirect=e),type:"url",placeholder:"Enter task URL",required:"",class:"admin-input"},null,512),[[p,a.taskData.url_redirect]])]),t("div",X,[a.isEditing?(k(),u("button",{key:0,onClick:s[7]||(s[7]=(...e)=>a.resetForm&&a.resetForm(...e)),class:"cancel-button"}," Cancel ")):F("",!0),t("button",Y,d(a.isEditing?"Update Task":"Add Task"),1)])],32)],2),t("div",Z,[t("h2",null,d(a.selectedTab==="tasks"?"ğŸ“‹ Existing Tasks":"ğŸ“‹ Existing Collaborations"),1),a.filteredTasks.length?(k(),u("div",$,[(k(!0),u(B,null,R(a.filteredTasks,e=>(k(),u("div",{key:e.id,class:"task-item"},[t("h3",null,d(e.title),1),t("p",null,d(e.description),1),t("div",tt,[t("span",st,"ğŸ "+d(e.award)+" coins",1),t("span",at,"ğŸ”‘ "+d(e.secret),1)]),t("div",et,[t("button",{onClick:w=>a.editTask(e),class:"edit-button"},"âœï¸ Edit",8,ot),t("button",{onClick:w=>a.deleteTask(e.id),class:"delete-button"},"ğŸ—‘ï¸ Delete",8,lt)])]))),128))])):(k(),u("div",it,[t("p",null,"No "+d(a.selectedTab)+" found",1)]))])])}const rt=U(j,[["render",nt],["__scopeId","data-v-e1cd2e66"]]);export{rt as default};
