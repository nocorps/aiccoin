import{_ as Mt,b as Q,x as ne,k as Nt,c as W,d as N,w as $,N as oe,m as re,t as X,v as pe,e as De,F as Ht,z as Lt,A as qt,B as le,j as ee,J as Fe,I as zt,i as Ot,o as Y}from"./index-BrKp1D6B.js";function Rt(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}function Pt(_){if(_.__esModule)return _;var w=_.default;if(typeof w=="function"){var y=function u(){return this instanceof u?Reflect.construct(w,arguments,this.constructor):w.apply(this,arguments)};y.prototype=w.prototype}else y={};return Object.defineProperty(y,"__esModule",{value:!0}),Object.keys(_).forEach(function(u){var o=Object.getOwnPropertyDescriptor(_,u);Object.defineProperty(y,u,o.get?o:{enumerable:!0,get:function(){return _[u]}})}),y}var Z={};const Bt={},Ut=Object.freeze(Object.defineProperty({__proto__:null,default:Bt},Symbol.toStringTag,{value:"Module"})),C=Pt(Ut);var ce={exports:{}},te={exports:{}},de,Ke;function Dt(){if(Ke)return de;Ke=1;const _=C,w=1800;class y{constructor(o){this.options=o||{},this.cookies=[]}set(o,n){let s=_.parse(n||""),c=this.parse(o),i;return c.domain?(i=c.domain.replace(/^\./,""),(s.hostname.length<i.length||("."+s.hostname).substr(-i.length+1)!=="."+i)&&(c.domain=s.hostname)):c.domain=s.hostname,c.path||(c.path=this.getPath(s.pathname)),c.expires||(c.expires=new Date(Date.now()+(Number(this.options.sessionTimeout||w)||w)*1e3)),this.add(c)}get(o){return this.list(o).map(n=>n.name+"="+n.value).join("; ")}list(o){let n=[],s,c;for(s=this.cookies.length-1;s>=0;s--){if(c=this.cookies[s],this.isExpired(c)){this.cookies.splice(s,s);continue}this.match(c,o)&&n.unshift(c)}return n}parse(o){let n={};return(o||"").toString().split(";").forEach(s=>{let c=s.split("="),i=c.shift().trim().toLowerCase(),a=c.join("=").trim(),m;if(i)switch(i){case"expires":a=new Date(a),a.toString()!=="Invalid Date"&&(n.expires=a);break;case"path":n.path=a;break;case"domain":m=a.toLowerCase(),m.length&&m.charAt(0)!=="."&&(m="."+m),n.domain=m;break;case"max-age":n.expires=new Date(Date.now()+(Number(a)||0)*1e3);break;case"secure":n.secure=!0;break;case"httponly":n.httponly=!0;break;default:n.name||(n.name=i,n.value=a)}}),n}match(o,n){let s=_.parse(n||"");return!(s.hostname!==o.domain&&(o.domain.charAt(0)!=="."||("."+s.hostname).substr(-o.domain.length)!==o.domain)||this.getPath(s.pathname).substr(0,o.path.length)!==o.path||o.secure&&s.protocol!=="https:")}add(o){let n,s;if(!o||!o.name)return!1;for(n=0,s=this.cookies.length;n<s;n++)if(this.compare(this.cookies[n],o))return this.isExpired(o)?(this.cookies.splice(n,1),!1):(this.cookies[n]=o,!0);return this.isExpired(o)||this.cookies.push(o),!0}compare(o,n){return o.name===n.name&&o.path===n.path&&o.domain===n.domain&&o.secure===n.secure&&o.httponly===o.httponly}isExpired(o){return o.expires&&o.expires<new Date||!o.value}getPath(o){let n=(o||"/").split("/");return n.pop(),n=n.join("/").trim(),n.charAt(0)!=="/"&&(n="/"+n),n.substr(-1)!=="/"&&(n+="/"),n}}return de=y,de}const Ft="nodemailer",Kt="6.10.0",Vt="Easy as cake e-mail sending from your Node.js applications",Gt="lib/nodemailer.js",Qt={test:"node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js","test:coverage":"c8 node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js",lint:"eslint .",update:"rm -rf node_modules/ package-lock.json && ncu -u && npm install"},$t={type:"git",url:"https://github.com/nodemailer/nodemailer.git"},Xt=["Nodemailer"],Jt="Andris Reinman",Wt="MIT-0",Yt={url:"https://github.com/nodemailer/nodemailer/issues"},Zt="https://nodemailer.com/",ei={"@aws-sdk/client-ses":"3.731.1",bunyan:"1.8.15",c8:"10.1.3",eslint:"8.57.0","eslint-config-nodemailer":"1.2.0","eslint-config-prettier":"9.1.0",libbase64:"1.3.0",libmime:"5.3.6",libqp:"2.1.1","nodemailer-ntlm-auth":"1.0.4",proxy:"1.0.2","proxy-test-server":"1.0.0","smtp-server":"3.13.6"},ti={node:">=6.0.0"},U={name:Ft,version:Kt,description:Vt,main:Gt,scripts:Qt,repository:$t,keywords:Xt,author:Jt,license:Wt,bugs:Yt,homepage:Zt,devDependencies:ei,engines:ti};var Ve;function ae(){if(Ve)return te.exports;Ve=1;const _=C,w=C,y=C,u=C,o=C.PassThrough,n=Dt(),s=U,c=C,i=5;te.exports=function(m,p){return a(m,p)},te.exports.Cookies=n;function a(m,p){p=p||{},p.fetchRes=p.fetchRes||new o,p.cookies=p.cookies||new n,p.redirects=p.redirects||0,p.maxRedirects=isNaN(p.maxRedirects)?i:p.maxRedirects,p.cookie&&([].concat(p.cookie||[]).forEach(v=>{p.cookies.set(v,m)}),p.cookie=!1);let h=p.fetchRes,f=y.parse(m),g=(p.method||"").toString().trim().toUpperCase()||"GET",t=!1,e,r,l=f.protocol==="https:"?w:_,d={"accept-encoding":"gzip,deflate","user-agent":"nodemailer/"+s.version};if(Object.keys(p.headers||{}).forEach(v=>{d[v.toLowerCase().trim()]=p.headers[v]}),p.userAgent&&(d["user-agent"]=p.userAgent),f.auth&&(d.Authorization="Basic "+Buffer.from(f.auth).toString("base64")),(e=p.cookies.get(m))&&(d.cookie=e),p.body){if(p.contentType!==!1&&(d["Content-Type"]=p.contentType||"application/x-www-form-urlencoded"),typeof p.body.pipe=="function")d["Transfer-Encoding"]="chunked",r=p.body,r.on("error",v=>{t||(t=!0,v.type="FETCH",v.sourceUrl=m,h.emit("error",v))});else{if(p.body instanceof Buffer)r=p.body;else if(typeof p.body=="object")try{r=Buffer.from(Object.keys(p.body).map(v=>{let E=p.body[v].toString().trim();return encodeURIComponent(v)+"="+encodeURIComponent(E)}).join("&"))}catch(v){if(t)return;t=!0,v.type="FETCH",v.sourceUrl=m,h.emit("error",v);return}else r=Buffer.from(p.body.toString().trim());d["Content-Type"]=p.contentType||"application/x-www-form-urlencoded",d["Content-Length"]=r.length}g=(p.method||"").toString().trim().toUpperCase()||"POST"}let x,b={method:g,host:f.hostname,path:f.path,port:f.port?f.port:f.protocol==="https:"?443:80,headers:d,rejectUnauthorized:!1,agent:!1};p.tls&&Object.keys(p.tls).forEach(v=>{b[v]=p.tls[v]}),f.protocol==="https:"&&f.hostname&&f.hostname!==b.host&&!c.isIP(f.hostname)&&!b.servername&&(b.servername=f.hostname);try{x=l.request(b)}catch(v){return t=!0,setImmediate(()=>{v.type="FETCH",v.sourceUrl=m,h.emit("error",v)}),h}return p.timeout&&x.setTimeout(p.timeout,()=>{if(t)return;t=!0,x.abort();let v=new Error("Request Timeout");v.type="FETCH",v.sourceUrl=m,h.emit("error",v)}),x.on("error",v=>{t||(t=!0,v.type="FETCH",v.sourceUrl=m,h.emit("error",v))}),x.on("response",v=>{let E;if(!t){switch(v.headers["content-encoding"]){case"gzip":case"deflate":E=u.createUnzip();break}if(v.headers["set-cookie"]&&[].concat(v.headers["set-cookie"]||[]).forEach(k=>{p.cookies.set(k,m)}),[301,302,303,307,308].includes(v.statusCode)&&v.headers.location){if(p.redirects++,p.redirects>p.maxRedirects){t=!0;let k=new Error("Maximum redirect count exceeded");k.type="FETCH",k.sourceUrl=m,h.emit("error",k),x.abort();return}return p.method="GET",p.body=!1,a(y.resolve(m,v.headers.location),p)}if(h.statusCode=v.statusCode,h.headers=v.headers,v.statusCode>=300&&!p.allowErrorResponse){t=!0;let k=new Error("Invalid status code "+v.statusCode);k.type="FETCH",k.sourceUrl=m,h.emit("error",k),x.abort();return}v.on("error",k=>{t||(t=!0,k.type="FETCH",k.sourceUrl=m,h.emit("error",k),x.abort())}),E?(v.pipe(E).pipe(h),E.on("error",k=>{t||(t=!0,k.type="FETCH",k.sourceUrl=m,h.emit("error",k),x.abort())})):v.pipe(h)}}),setImmediate(()=>{if(r)try{if(typeof r.pipe=="function")return r.pipe(x);x.write(r)}catch(v){t=!0,v.type="FETCH",v.sourceUrl=m,h.emit("error",v);return}x.end()}),h}return te.exports}var Ge;function O(){return Ge||(Ge=1,function(_){const w=C,y=C,u=C,o=ae(),n=C,s=C,c=C,i=5*60*1e3;let a;try{a=c.networkInterfaces()}catch{}_.exports.networkInterfaces=a;const m=(e,r)=>{let l=_.exports.networkInterfaces;return l?Object.keys(l).map(x=>l[x]).reduce((x,b)=>x.concat(b),[]).filter(x=>!x.internal||r).filter(x=>x.family==="IPv"+e||x.family===e).length>0:!0},p=(e,r,l,d)=>{if(l=l||{},!m(e,l.allowInternalNetworkInterfaces))return d(null,[]);(n.Resolver?new n.Resolver(l):n)["resolve"+e](r,(v,E)=>{if(v){switch(v.code){case n.NODATA:case n.NOTFOUND:case n.NOTIMP:case n.SERVFAIL:case n.CONNREFUSED:case n.REFUSED:case"EAI_AGAIN":return d(null,[])}return d(v)}return d(null,Array.isArray(E)?E:[].concat(E||[]))})},h=_.exports.dnsCache=new Map,f=(e,r)=>e?Object.assign({servername:e.servername,host:!e.addresses||!e.addresses.length?null:e.addresses.length===1?e.addresses[0]:e.addresses[Math.floor(Math.random()*e.addresses.length)]},r||{}):Object.assign({},r||{});_.exports.resolveHostname=(e,r)=>{if(e=e||{},!e.host&&e.servername&&(e.host=e.servername),!e.host||s.isIP(e.host)){let d={addresses:[e.host],servername:e.servername||!1};return r(null,f(d,{cached:!1}))}let l;if(h.has(e.host)&&(l=h.get(e.host),!l.expires||l.expires>=Date.now()))return r(null,f(l.value,{cached:!0}));p(4,e.host,e,(d,x)=>{if(d)return l?r(null,f(l.value,{cached:!0,error:d})):r(d);if(x&&x.length){let b={addresses:x,servername:e.servername||e.host};return h.set(e.host,{value:b,expires:Date.now()+(e.dnsTtl||i)}),r(null,f(b,{cached:!1}))}p(6,e.host,e,(b,v)=>{if(b)return l?r(null,f(l.value,{cached:!0,error:b})):r(b);if(v&&v.length){let E={addresses:v,servername:e.servername||e.host};return h.set(e.host,{value:E,expires:Date.now()+(e.dnsTtl||i)}),r(null,f(E,{cached:!1}))}try{n.lookup(e.host,{all:!0},(E,k)=>{if(E)return l?r(null,f(l.value,{cached:!0,error:E})):r(E);let S=k?k.filter(I=>m(I.family)).map(I=>I.address).shift():!1;if(k&&k.length&&!S&&console.warn(`Failed to resolve IPv${k[0].family} addresses with current network`),!S&&l)return r(null,f(l.value,{cached:!0}));let A={addresses:S?[S]:[e.host],servername:e.servername||e.host};return h.set(e.host,{value:A,expires:Date.now()+(e.dnsTtl||i)}),r(null,f(A,{cached:!1}))})}catch(E){return l?r(null,f(l.value,{cached:!0,error:E})):r(E)}})})},_.exports.parseConnectionUrl=e=>{e=e||"";let r={};return[w.parse(e,!0)].forEach(l=>{let d;switch(l.protocol){case"smtp:":r.secure=!1;break;case"smtps:":r.secure=!0;break;case"direct:":r.direct=!0;break}!isNaN(l.port)&&Number(l.port)&&(r.port=Number(l.port)),l.hostname&&(r.host=l.hostname),l.auth&&(d=l.auth.split(":"),r.auth||(r.auth={}),r.auth.user=d.shift(),r.auth.pass=d.join(":")),Object.keys(l.query||{}).forEach(x=>{let b=r,v=x,E=l.query[x];switch(isNaN(E)||(E=Number(E)),E){case"true":E=!0;break;case"false":E=!1;break}if(x.indexOf("tls.")===0)v=x.substr(4),r.tls||(r.tls={}),b=r.tls;else if(x.indexOf(".")>=0)return;v in b||(b[v]=E)})}),r},_.exports._logFunc=(e,r,l,d,x,...b)=>{let v={};Object.keys(l||{}).forEach(E=>{E!=="level"&&(v[E]=l[E])}),Object.keys(d||{}).forEach(E=>{E!=="level"&&(v[E]=d[E])}),e[r](v,x,...b)},_.exports.getLogger=(e,r)=>{e=e||{};let l={},d=["trace","debug","info","warn","error","fatal"];if(!e.logger)return d.forEach(b=>{l[b]=()=>!1}),l;let x=e.logger;return e.logger===!0&&(x=t(d)),d.forEach(b=>{l[b]=(v,E,...k)=>{_.exports._logFunc(x,b,r,v,E,...k)}}),l},_.exports.callbackPromise=(e,r)=>function(){let l=Array.from(arguments),d=l.shift();d?r(d):e(...l)},_.exports.parseDataURI=e=>{let r=e,l=r.indexOf(",");if(!l)return e;let d=r.substring(l+1),x=r.substring(5,l),b,v=x.split(";"),E=v.length>1?v[v.length-1]:!1;E&&E.indexOf("=")<0&&(b=E.toLowerCase(),v.pop());let k=v.shift()||"application/octet-stream",S={};for(let A of v){let I=A.indexOf("=");if(I>=0){let q=A.substring(0,I),T=A.substring(I+1);S[q]=T}}switch(b){case"base64":d=Buffer.from(d,"base64");break;case"utf8":d=Buffer.from(d);break;default:try{d=Buffer.from(decodeURIComponent(d))}catch{d=Buffer.from(d)}d=Buffer.from(d)}return{data:d,encoding:b,contentType:k,params:S}},_.exports.resolveContent=(e,r,l)=>{let d;l||(d=new Promise((E,k)=>{l=_.exports.callbackPromise(E,k)}));let x=e&&e[r]&&e[r].content||e[r],b,v=(typeof e[r]=="object"&&e[r].encoding||"utf8").toString().toLowerCase().replace(/[-_\s]/g,"");if(!x)return l(null,x);if(typeof x=="object"){if(typeof x.pipe=="function")return g(x,(E,k)=>{if(E)return l(E);e[r].content?e[r].content=k:e[r]=k,l(null,k)});if(/^https?:\/\//i.test(x.path||x.href))return b=o(x.path||x.href),g(b,l);if(/^data:/i.test(x.path||x.href)){let E=_.exports.parseDataURI(x.path||x.href);return!E||!E.data?l(null,Buffer.from(0)):l(null,E.data)}else if(x.path)return g(u.createReadStream(x.path),l)}return typeof e[r].content=="string"&&!["utf8","usascii","ascii"].includes(v)&&(x=Buffer.from(e[r].content,v)),setImmediate(()=>l(null,x)),d},_.exports.assign=function(){let e=Array.from(arguments),r=e.shift()||{};return e.forEach(l=>{Object.keys(l||{}).forEach(d=>{["tls","auth"].includes(d)&&l[d]&&typeof l[d]=="object"?(r[d]||(r[d]={}),Object.keys(l[d]).forEach(x=>{r[d][x]=l[d][x]})):r[d]=l[d]})}),r},_.exports.encodeXText=e=>{if(!/[^\x21-\x2A\x2C-\x3C\x3E-\x7E]/.test(e))return e;let r=Buffer.from(e),l="";for(let d=0,x=r.length;d<x;d++){let b=r[d];b<33||b>126||b===43||b===61?l+="+"+(b<16?"0":"")+b.toString(16).toUpperCase():l+=String.fromCharCode(b)}return l};function g(e,r){let l=!1,d=[],x=0;e.on("error",b=>{l||(l=!0,r(b))}),e.on("readable",()=>{let b;for(;(b=e.read())!==null;)d.push(b),x+=b.length}),e.on("end",()=>{if(l)return;l=!0;let b;try{b=Buffer.concat(d,x)}catch(v){return r(v)}r(null,b)})}function t(e){let r=0,l=new Map;e.forEach(b=>{b.length>r&&(r=b.length)}),e.forEach(b=>{let v=b.toUpperCase();v.length<r&&(v+=" ".repeat(r-v.length)),l.set(b,v)});let d=(b,v,E,...k)=>{let S="";v&&(v.tnx==="server"?S="S: ":v.tnx==="client"&&(S="C: "),v.sid&&(S="["+v.sid+"] "+S),v.cid&&(S="[#"+v.cid+"] "+S)),E=y.format(E,...k),E.split(/\r?\n/).forEach(A=>{console.log("[%s] %s %s",new Date().toISOString().substr(0,19).replace(/T/," "),l.get(b),S+A)})},x={};return e.forEach(b=>{x[b]=d.bind(null,b)}),x}}(ce)),ce.exports}var me,Qe;function Et(){if(Qe)return me;Qe=1;const _=C,w="application/octet-stream",y="bin",u=new Map([["application/acad","dwg"],["application/applixware","aw"],["application/arj","arj"],["application/atom+xml","xml"],["application/atomcat+xml","atomcat"],["application/atomsvc+xml","atomsvc"],["application/base64",["mm","mme"]],["application/binhex","hqx"],["application/binhex4","hqx"],["application/book",["book","boo"]],["application/ccxml+xml,","ccxml"],["application/cdf","cdf"],["application/cdmi-capability","cdmia"],["application/cdmi-container","cdmic"],["application/cdmi-domain","cdmid"],["application/cdmi-object","cdmio"],["application/cdmi-queue","cdmiq"],["application/clariscad","ccad"],["application/commonground","dp"],["application/cu-seeme","cu"],["application/davmount+xml","davmount"],["application/drafting","drw"],["application/dsptype","tsp"],["application/dssc+der","dssc"],["application/dssc+xml","xdssc"],["application/dxf","dxf"],["application/ecmascript",["js","es"]],["application/emma+xml","emma"],["application/envoy","evy"],["application/epub+zip","epub"],["application/excel",["xls","xl","xla","xlb","xlc","xld","xlk","xll","xlm","xlt","xlv","xlw"]],["application/exi","exi"],["application/font-tdpfr","pfr"],["application/fractals","fif"],["application/freeloader","frl"],["application/futuresplash","spl"],["application/geo+json","geojson"],["application/gnutar","tgz"],["application/groupwise","vew"],["application/hlp","hlp"],["application/hta","hta"],["application/hyperstudio","stk"],["application/i-deas","unv"],["application/iges",["iges","igs"]],["application/inf","inf"],["application/internet-property-stream","acx"],["application/ipfix","ipfix"],["application/java","class"],["application/java-archive","jar"],["application/java-byte-code","class"],["application/java-serialized-object","ser"],["application/java-vm","class"],["application/javascript","js"],["application/json","json"],["application/lha","lha"],["application/lzx","lzx"],["application/mac-binary","bin"],["application/mac-binhex","hqx"],["application/mac-binhex40","hqx"],["application/mac-compactpro","cpt"],["application/macbinary","bin"],["application/mads+xml","mads"],["application/marc","mrc"],["application/marcxml+xml","mrcx"],["application/mathematica","ma"],["application/mathml+xml","mathml"],["application/mbedlet","mbd"],["application/mbox","mbox"],["application/mcad","mcd"],["application/mediaservercontrol+xml","mscml"],["application/metalink4+xml","meta4"],["application/mets+xml","mets"],["application/mime","aps"],["application/mods+xml","mods"],["application/mp21","m21"],["application/mp4","mp4"],["application/mspowerpoint",["ppt","pot","pps","ppz"]],["application/msword",["doc","dot","w6w","wiz","word"]],["application/mswrite","wri"],["application/mxf","mxf"],["application/netmc","mcp"],["application/octet-stream",["*"]],["application/oda","oda"],["application/oebps-package+xml","opf"],["application/ogg","ogx"],["application/olescript","axs"],["application/onenote","onetoc"],["application/patch-ops-error+xml","xer"],["application/pdf","pdf"],["application/pgp-encrypted","asc"],["application/pgp-signature","pgp"],["application/pics-rules","prf"],["application/pkcs-12","p12"],["application/pkcs-crl","crl"],["application/pkcs10","p10"],["application/pkcs7-mime",["p7c","p7m"]],["application/pkcs7-signature","p7s"],["application/pkcs8","p8"],["application/pkix-attr-cert","ac"],["application/pkix-cert",["cer","crt"]],["application/pkix-crl","crl"],["application/pkix-pkipath","pkipath"],["application/pkixcmp","pki"],["application/plain","text"],["application/pls+xml","pls"],["application/postscript",["ps","ai","eps"]],["application/powerpoint","ppt"],["application/pro_eng",["part","prt"]],["application/prs.cww","cww"],["application/pskc+xml","pskcxml"],["application/rdf+xml","rdf"],["application/reginfo+xml","rif"],["application/relax-ng-compact-syntax","rnc"],["application/resource-lists+xml","rl"],["application/resource-lists-diff+xml","rld"],["application/ringing-tones","rng"],["application/rls-services+xml","rs"],["application/rsd+xml","rsd"],["application/rss+xml","xml"],["application/rtf",["rtf","rtx"]],["application/sbml+xml","sbml"],["application/scvp-cv-request","scq"],["application/scvp-cv-response","scs"],["application/scvp-vp-request","spq"],["application/scvp-vp-response","spp"],["application/sdp","sdp"],["application/sea","sea"],["application/set","set"],["application/set-payment-initiation","setpay"],["application/set-registration-initiation","setreg"],["application/shf+xml","shf"],["application/sla","stl"],["application/smil",["smi","smil"]],["application/smil+xml","smi"],["application/solids","sol"],["application/sounder","sdr"],["application/sparql-query","rq"],["application/sparql-results+xml","srx"],["application/srgs","gram"],["application/srgs+xml","grxml"],["application/sru+xml","sru"],["application/ssml+xml","ssml"],["application/step",["step","stp"]],["application/streamingmedia","ssm"],["application/tei+xml","tei"],["application/thraud+xml","tfi"],["application/timestamped-data","tsd"],["application/toolbook","tbk"],["application/vda","vda"],["application/vnd.3gpp.pic-bw-large","plb"],["application/vnd.3gpp.pic-bw-small","psb"],["application/vnd.3gpp.pic-bw-var","pvb"],["application/vnd.3gpp2.tcap","tcap"],["application/vnd.3m.post-it-notes","pwn"],["application/vnd.accpac.simply.aso","aso"],["application/vnd.accpac.simply.imp","imp"],["application/vnd.acucobol","acu"],["application/vnd.acucorp","atc"],["application/vnd.adobe.air-application-installer-package+zip","air"],["application/vnd.adobe.fxp","fxp"],["application/vnd.adobe.xdp+xml","xdp"],["application/vnd.adobe.xfdf","xfdf"],["application/vnd.ahead.space","ahead"],["application/vnd.airzip.filesecure.azf","azf"],["application/vnd.airzip.filesecure.azs","azs"],["application/vnd.amazon.ebook","azw"],["application/vnd.americandynamics.acc","acc"],["application/vnd.amiga.ami","ami"],["application/vnd.android.package-archive","apk"],["application/vnd.anser-web-certificate-issue-initiation","cii"],["application/vnd.anser-web-funds-transfer-initiation","fti"],["application/vnd.antix.game-component","atx"],["application/vnd.apple.installer+xml","mpkg"],["application/vnd.apple.mpegurl","m3u8"],["application/vnd.aristanetworks.swi","swi"],["application/vnd.audiograph","aep"],["application/vnd.blueice.multipass","mpm"],["application/vnd.bmi","bmi"],["application/vnd.businessobjects","rep"],["application/vnd.chemdraw+xml","cdxml"],["application/vnd.chipnuts.karaoke-mmd","mmd"],["application/vnd.cinderella","cdy"],["application/vnd.claymore","cla"],["application/vnd.cloanto.rp9","rp9"],["application/vnd.clonk.c4group","c4g"],["application/vnd.cluetrust.cartomobile-config","c11amc"],["application/vnd.cluetrust.cartomobile-config-pkg","c11amz"],["application/vnd.commonspace","csp"],["application/vnd.contact.cmsg","cdbcmsg"],["application/vnd.cosmocaller","cmc"],["application/vnd.crick.clicker","clkx"],["application/vnd.crick.clicker.keyboard","clkk"],["application/vnd.crick.clicker.palette","clkp"],["application/vnd.crick.clicker.template","clkt"],["application/vnd.crick.clicker.wordbank","clkw"],["application/vnd.criticaltools.wbs+xml","wbs"],["application/vnd.ctc-posml","pml"],["application/vnd.cups-ppd","ppd"],["application/vnd.curl.car","car"],["application/vnd.curl.pcurl","pcurl"],["application/vnd.data-vision.rdz","rdz"],["application/vnd.denovo.fcselayout-link","fe_launch"],["application/vnd.dna","dna"],["application/vnd.dolby.mlp","mlp"],["application/vnd.dpgraph","dpg"],["application/vnd.dreamfactory","dfac"],["application/vnd.dvb.ait","ait"],["application/vnd.dvb.service","svc"],["application/vnd.dynageo","geo"],["application/vnd.ecowin.chart","mag"],["application/vnd.enliven","nml"],["application/vnd.epson.esf","esf"],["application/vnd.epson.msf","msf"],["application/vnd.epson.quickanime","qam"],["application/vnd.epson.salt","slt"],["application/vnd.epson.ssf","ssf"],["application/vnd.eszigno3+xml","es3"],["application/vnd.ezpix-album","ez2"],["application/vnd.ezpix-package","ez3"],["application/vnd.fdf","fdf"],["application/vnd.fdsn.seed","seed"],["application/vnd.flographit","gph"],["application/vnd.fluxtime.clip","ftc"],["application/vnd.framemaker","fm"],["application/vnd.frogans.fnc","fnc"],["application/vnd.frogans.ltf","ltf"],["application/vnd.fsc.weblaunch","fsc"],["application/vnd.fujitsu.oasys","oas"],["application/vnd.fujitsu.oasys2","oa2"],["application/vnd.fujitsu.oasys3","oa3"],["application/vnd.fujitsu.oasysgp","fg5"],["application/vnd.fujitsu.oasysprs","bh2"],["application/vnd.fujixerox.ddd","ddd"],["application/vnd.fujixerox.docuworks","xdw"],["application/vnd.fujixerox.docuworks.binder","xbd"],["application/vnd.fuzzysheet","fzs"],["application/vnd.genomatix.tuxedo","txd"],["application/vnd.geogebra.file","ggb"],["application/vnd.geogebra.tool","ggt"],["application/vnd.geometry-explorer","gex"],["application/vnd.geonext","gxt"],["application/vnd.geoplan","g2w"],["application/vnd.geospace","g3w"],["application/vnd.gmx","gmx"],["application/vnd.google-earth.kml+xml","kml"],["application/vnd.google-earth.kmz","kmz"],["application/vnd.grafeq","gqf"],["application/vnd.groove-account","gac"],["application/vnd.groove-help","ghf"],["application/vnd.groove-identity-message","gim"],["application/vnd.groove-injector","grv"],["application/vnd.groove-tool-message","gtm"],["application/vnd.groove-tool-template","tpl"],["application/vnd.groove-vcard","vcg"],["application/vnd.hal+xml","hal"],["application/vnd.handheld-entertainment+xml","zmm"],["application/vnd.hbci","hbci"],["application/vnd.hhe.lesson-player","les"],["application/vnd.hp-hpgl",["hgl","hpg","hpgl"]],["application/vnd.hp-hpid","hpid"],["application/vnd.hp-hps","hps"],["application/vnd.hp-jlyt","jlt"],["application/vnd.hp-pcl","pcl"],["application/vnd.hp-pclxl","pclxl"],["application/vnd.hydrostatix.sof-data","sfd-hdstx"],["application/vnd.hzn-3d-crossword","x3d"],["application/vnd.ibm.minipay","mpy"],["application/vnd.ibm.modcap","afp"],["application/vnd.ibm.rights-management","irm"],["application/vnd.ibm.secure-container","sc"],["application/vnd.iccprofile","icc"],["application/vnd.igloader","igl"],["application/vnd.immervision-ivp","ivp"],["application/vnd.immervision-ivu","ivu"],["application/vnd.insors.igm","igm"],["application/vnd.intercon.formnet","xpw"],["application/vnd.intergeo","i2g"],["application/vnd.intu.qbo","qbo"],["application/vnd.intu.qfx","qfx"],["application/vnd.ipunplugged.rcprofile","rcprofile"],["application/vnd.irepository.package+xml","irp"],["application/vnd.is-xpr","xpr"],["application/vnd.isac.fcs","fcs"],["application/vnd.jam","jam"],["application/vnd.jcp.javame.midlet-rms","rms"],["application/vnd.jisp","jisp"],["application/vnd.joost.joda-archive","joda"],["application/vnd.kahootz","ktz"],["application/vnd.kde.karbon","karbon"],["application/vnd.kde.kchart","chrt"],["application/vnd.kde.kformula","kfo"],["application/vnd.kde.kivio","flw"],["application/vnd.kde.kontour","kon"],["application/vnd.kde.kpresenter","kpr"],["application/vnd.kde.kspread","ksp"],["application/vnd.kde.kword","kwd"],["application/vnd.kenameaapp","htke"],["application/vnd.kidspiration","kia"],["application/vnd.kinar","kne"],["application/vnd.koan","skp"],["application/vnd.kodak-descriptor","sse"],["application/vnd.las.las+xml","lasxml"],["application/vnd.llamagraphics.life-balance.desktop","lbd"],["application/vnd.llamagraphics.life-balance.exchange+xml","lbe"],["application/vnd.lotus-1-2-3","123"],["application/vnd.lotus-approach","apr"],["application/vnd.lotus-freelance","pre"],["application/vnd.lotus-notes","nsf"],["application/vnd.lotus-organizer","org"],["application/vnd.lotus-screencam","scm"],["application/vnd.lotus-wordpro","lwp"],["application/vnd.macports.portpkg","portpkg"],["application/vnd.mcd","mcd"],["application/vnd.medcalcdata","mc1"],["application/vnd.mediastation.cdkey","cdkey"],["application/vnd.mfer","mwf"],["application/vnd.mfmp","mfm"],["application/vnd.micrografx.flo","flo"],["application/vnd.micrografx.igx","igx"],["application/vnd.mif","mif"],["application/vnd.mobius.daf","daf"],["application/vnd.mobius.dis","dis"],["application/vnd.mobius.mbk","mbk"],["application/vnd.mobius.mqy","mqy"],["application/vnd.mobius.msl","msl"],["application/vnd.mobius.plc","plc"],["application/vnd.mobius.txf","txf"],["application/vnd.mophun.application","mpn"],["application/vnd.mophun.certificate","mpc"],["application/vnd.mozilla.xul+xml","xul"],["application/vnd.ms-artgalry","cil"],["application/vnd.ms-cab-compressed","cab"],["application/vnd.ms-excel",["xls","xla","xlc","xlm","xlt","xlw","xlb","xll"]],["application/vnd.ms-excel.addin.macroenabled.12","xlam"],["application/vnd.ms-excel.sheet.binary.macroenabled.12","xlsb"],["application/vnd.ms-excel.sheet.macroenabled.12","xlsm"],["application/vnd.ms-excel.template.macroenabled.12","xltm"],["application/vnd.ms-fontobject","eot"],["application/vnd.ms-htmlhelp","chm"],["application/vnd.ms-ims","ims"],["application/vnd.ms-lrm","lrm"],["application/vnd.ms-officetheme","thmx"],["application/vnd.ms-outlook","msg"],["application/vnd.ms-pki.certstore","sst"],["application/vnd.ms-pki.pko","pko"],["application/vnd.ms-pki.seccat","cat"],["application/vnd.ms-pki.stl","stl"],["application/vnd.ms-pkicertstore","sst"],["application/vnd.ms-pkiseccat","cat"],["application/vnd.ms-pkistl","stl"],["application/vnd.ms-powerpoint",["ppt","pot","pps","ppa","pwz"]],["application/vnd.ms-powerpoint.addin.macroenabled.12","ppam"],["application/vnd.ms-powerpoint.presentation.macroenabled.12","pptm"],["application/vnd.ms-powerpoint.slide.macroenabled.12","sldm"],["application/vnd.ms-powerpoint.slideshow.macroenabled.12","ppsm"],["application/vnd.ms-powerpoint.template.macroenabled.12","potm"],["application/vnd.ms-project","mpp"],["application/vnd.ms-word.document.macroenabled.12","docm"],["application/vnd.ms-word.template.macroenabled.12","dotm"],["application/vnd.ms-works",["wks","wcm","wdb","wps"]],["application/vnd.ms-wpl","wpl"],["application/vnd.ms-xpsdocument","xps"],["application/vnd.mseq","mseq"],["application/vnd.musician","mus"],["application/vnd.muvee.style","msty"],["application/vnd.neurolanguage.nlu","nlu"],["application/vnd.noblenet-directory","nnd"],["application/vnd.noblenet-sealer","nns"],["application/vnd.noblenet-web","nnw"],["application/vnd.nokia.configuration-message","ncm"],["application/vnd.nokia.n-gage.data","ngdat"],["application/vnd.nokia.n-gage.symbian.install","n-gage"],["application/vnd.nokia.radio-preset","rpst"],["application/vnd.nokia.radio-presets","rpss"],["application/vnd.nokia.ringing-tone","rng"],["application/vnd.novadigm.edm","edm"],["application/vnd.novadigm.edx","edx"],["application/vnd.novadigm.ext","ext"],["application/vnd.oasis.opendocument.chart","odc"],["application/vnd.oasis.opendocument.chart-template","otc"],["application/vnd.oasis.opendocument.database","odb"],["application/vnd.oasis.opendocument.formula","odf"],["application/vnd.oasis.opendocument.formula-template","odft"],["application/vnd.oasis.opendocument.graphics","odg"],["application/vnd.oasis.opendocument.graphics-template","otg"],["application/vnd.oasis.opendocument.image","odi"],["application/vnd.oasis.opendocument.image-template","oti"],["application/vnd.oasis.opendocument.presentation","odp"],["application/vnd.oasis.opendocument.presentation-template","otp"],["application/vnd.oasis.opendocument.spreadsheet","ods"],["application/vnd.oasis.opendocument.spreadsheet-template","ots"],["application/vnd.oasis.opendocument.text","odt"],["application/vnd.oasis.opendocument.text-master","odm"],["application/vnd.oasis.opendocument.text-template","ott"],["application/vnd.oasis.opendocument.text-web","oth"],["application/vnd.olpc-sugar","xo"],["application/vnd.oma.dd2+xml","dd2"],["application/vnd.openofficeorg.extension","oxt"],["application/vnd.openxmlformats-officedocument.presentationml.presentation","pptx"],["application/vnd.openxmlformats-officedocument.presentationml.slide","sldx"],["application/vnd.openxmlformats-officedocument.presentationml.slideshow","ppsx"],["application/vnd.openxmlformats-officedocument.presentationml.template","potx"],["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","xlsx"],["application/vnd.openxmlformats-officedocument.spreadsheetml.template","xltx"],["application/vnd.openxmlformats-officedocument.wordprocessingml.document","docx"],["application/vnd.openxmlformats-officedocument.wordprocessingml.template","dotx"],["application/vnd.osgeo.mapguide.package","mgp"],["application/vnd.osgi.dp","dp"],["application/vnd.palm","pdb"],["application/vnd.pawaafile","paw"],["application/vnd.pg.format","str"],["application/vnd.pg.osasli","ei6"],["application/vnd.picsel","efif"],["application/vnd.pmi.widget","wg"],["application/vnd.pocketlearn","plf"],["application/vnd.powerbuilder6","pbd"],["application/vnd.previewsystems.box","box"],["application/vnd.proteus.magazine","mgz"],["application/vnd.publishare-delta-tree","qps"],["application/vnd.pvi.ptid1","ptid"],["application/vnd.quark.quarkxpress","qxd"],["application/vnd.realvnc.bed","bed"],["application/vnd.recordare.musicxml","mxl"],["application/vnd.recordare.musicxml+xml","musicxml"],["application/vnd.rig.cryptonote","cryptonote"],["application/vnd.rim.cod","cod"],["application/vnd.rn-realmedia","rm"],["application/vnd.rn-realplayer","rnx"],["application/vnd.route66.link66+xml","link66"],["application/vnd.sailingtracker.track","st"],["application/vnd.seemail","see"],["application/vnd.sema","sema"],["application/vnd.semd","semd"],["application/vnd.semf","semf"],["application/vnd.shana.informed.formdata","ifm"],["application/vnd.shana.informed.formtemplate","itp"],["application/vnd.shana.informed.interchange","iif"],["application/vnd.shana.informed.package","ipk"],["application/vnd.simtech-mindmapper","twd"],["application/vnd.smaf","mmf"],["application/vnd.smart.teacher","teacher"],["application/vnd.solent.sdkm+xml","sdkm"],["application/vnd.spotfire.dxp","dxp"],["application/vnd.spotfire.sfs","sfs"],["application/vnd.stardivision.calc","sdc"],["application/vnd.stardivision.draw","sda"],["application/vnd.stardivision.impress","sdd"],["application/vnd.stardivision.math","smf"],["application/vnd.stardivision.writer","sdw"],["application/vnd.stardivision.writer-global","sgl"],["application/vnd.stepmania.stepchart","sm"],["application/vnd.sun.xml.calc","sxc"],["application/vnd.sun.xml.calc.template","stc"],["application/vnd.sun.xml.draw","sxd"],["application/vnd.sun.xml.draw.template","std"],["application/vnd.sun.xml.impress","sxi"],["application/vnd.sun.xml.impress.template","sti"],["application/vnd.sun.xml.math","sxm"],["application/vnd.sun.xml.writer","sxw"],["application/vnd.sun.xml.writer.global","sxg"],["application/vnd.sun.xml.writer.template","stw"],["application/vnd.sus-calendar","sus"],["application/vnd.svd","svd"],["application/vnd.symbian.install","sis"],["application/vnd.syncml+xml","xsm"],["application/vnd.syncml.dm+wbxml","bdm"],["application/vnd.syncml.dm+xml","xdm"],["application/vnd.tao.intent-module-archive","tao"],["application/vnd.tmobile-livetv","tmo"],["application/vnd.trid.tpt","tpt"],["application/vnd.triscape.mxs","mxs"],["application/vnd.trueapp","tra"],["application/vnd.ufdl","ufd"],["application/vnd.uiq.theme","utz"],["application/vnd.umajin","umj"],["application/vnd.unity","unityweb"],["application/vnd.uoml+xml","uoml"],["application/vnd.vcx","vcx"],["application/vnd.visio","vsd"],["application/vnd.visionary","vis"],["application/vnd.vsf","vsf"],["application/vnd.wap.wbxml","wbxml"],["application/vnd.wap.wmlc","wmlc"],["application/vnd.wap.wmlscriptc","wmlsc"],["application/vnd.webturbo","wtb"],["application/vnd.wolfram.player","nbp"],["application/vnd.wordperfect","wpd"],["application/vnd.wqd","wqd"],["application/vnd.wt.stf","stf"],["application/vnd.xara",["web","xar"]],["application/vnd.xfdl","xfdl"],["application/vnd.yamaha.hv-dic","hvd"],["application/vnd.yamaha.hv-script","hvs"],["application/vnd.yamaha.hv-voice","hvp"],["application/vnd.yamaha.openscoreformat","osf"],["application/vnd.yamaha.openscoreformat.osfpvg+xml","osfpvg"],["application/vnd.yamaha.smaf-audio","saf"],["application/vnd.yamaha.smaf-phrase","spf"],["application/vnd.yellowriver-custom-menu","cmp"],["application/vnd.zul","zir"],["application/vnd.zzazz.deck+xml","zaz"],["application/vocaltec-media-desc","vmd"],["application/vocaltec-media-file","vmf"],["application/voicexml+xml","vxml"],["application/widget","wgt"],["application/winhlp","hlp"],["application/wordperfect",["wp","wp5","wp6","wpd"]],["application/wordperfect6.0",["w60","wp5"]],["application/wordperfect6.1","w61"],["application/wsdl+xml","wsdl"],["application/wspolicy+xml","wspolicy"],["application/x-123","wk1"],["application/x-7z-compressed","7z"],["application/x-abiword","abw"],["application/x-ace-compressed","ace"],["application/x-aim","aim"],["application/x-authorware-bin","aab"],["application/x-authorware-map","aam"],["application/x-authorware-seg","aas"],["application/x-bcpio","bcpio"],["application/x-binary","bin"],["application/x-binhex40","hqx"],["application/x-bittorrent","torrent"],["application/x-bsh",["bsh","sh","shar"]],["application/x-bytecode.elisp","elc"],["application/x-bytecode.python","pyc"],["application/x-bzip","bz"],["application/x-bzip2",["boz","bz2"]],["application/x-cdf","cdf"],["application/x-cdlink","vcd"],["application/x-chat",["cha","chat"]],["application/x-chess-pgn","pgn"],["application/x-cmu-raster","ras"],["application/x-cocoa","cco"],["application/x-compactpro","cpt"],["application/x-compress","z"],["application/x-compressed",["tgz","gz","z","zip"]],["application/x-conference","nsc"],["application/x-cpio","cpio"],["application/x-cpt","cpt"],["application/x-csh","csh"],["application/x-debian-package","deb"],["application/x-deepv","deepv"],["application/x-director",["dir","dcr","dxr"]],["application/x-doom","wad"],["application/x-dtbncx+xml","ncx"],["application/x-dtbook+xml","dtb"],["application/x-dtbresource+xml","res"],["application/x-dvi","dvi"],["application/x-elc","elc"],["application/x-envoy",["env","evy"]],["application/x-esrehber","es"],["application/x-excel",["xls","xla","xlb","xlc","xld","xlk","xll","xlm","xlt","xlv","xlw"]],["application/x-font-bdf","bdf"],["application/x-font-ghostscript","gsf"],["application/x-font-linux-psf","psf"],["application/x-font-otf","otf"],["application/x-font-pcf","pcf"],["application/x-font-snf","snf"],["application/x-font-ttf","ttf"],["application/x-font-type1","pfa"],["application/x-font-woff","woff"],["application/x-frame","mif"],["application/x-freelance","pre"],["application/x-futuresplash","spl"],["application/x-gnumeric","gnumeric"],["application/x-gsp","gsp"],["application/x-gss","gss"],["application/x-gtar","gtar"],["application/x-gzip",["gz","gzip"]],["application/x-hdf","hdf"],["application/x-helpfile",["help","hlp"]],["application/x-httpd-imap","imap"],["application/x-ima","ima"],["application/x-internet-signup",["ins","isp"]],["application/x-internett-signup","ins"],["application/x-inventor","iv"],["application/x-ip2","ip"],["application/x-iphone","iii"],["application/x-java-class","class"],["application/x-java-commerce","jcm"],["application/x-java-jnlp-file","jnlp"],["application/x-javascript","js"],["application/x-koan",["skd","skm","skp","skt"]],["application/x-ksh","ksh"],["application/x-latex",["latex","ltx"]],["application/x-lha","lha"],["application/x-lisp","lsp"],["application/x-livescreen","ivy"],["application/x-lotus","wq1"],["application/x-lotusscreencam","scm"],["application/x-lzh","lzh"],["application/x-lzx","lzx"],["application/x-mac-binhex40","hqx"],["application/x-macbinary","bin"],["application/x-magic-cap-package-1.0","mc$"],["application/x-mathcad","mcd"],["application/x-meme","mm"],["application/x-midi",["mid","midi"]],["application/x-mif","mif"],["application/x-mix-transfer","nix"],["application/x-mobipocket-ebook","prc"],["application/x-mplayer2","asx"],["application/x-ms-application","application"],["application/x-ms-wmd","wmd"],["application/x-ms-wmz","wmz"],["application/x-ms-xbap","xbap"],["application/x-msaccess","mdb"],["application/x-msbinder","obd"],["application/x-mscardfile","crd"],["application/x-msclip","clp"],["application/x-msdownload",["exe","dll"]],["application/x-msexcel",["xls","xla","xlw"]],["application/x-msmediaview",["mvb","m13","m14"]],["application/x-msmetafile","wmf"],["application/x-msmoney","mny"],["application/x-mspowerpoint","ppt"],["application/x-mspublisher","pub"],["application/x-msschedule","scd"],["application/x-msterminal","trm"],["application/x-mswrite","wri"],["application/x-navi-animation","ani"],["application/x-navidoc","nvd"],["application/x-navimap","map"],["application/x-navistyle","stl"],["application/x-netcdf",["cdf","nc"]],["application/x-newton-compatible-pkg","pkg"],["application/x-nokia-9000-communicator-add-on-software","aos"],["application/x-omc","omc"],["application/x-omcdatamaker","omcd"],["application/x-omcregerator","omcr"],["application/x-pagemaker",["pm4","pm5"]],["application/x-pcl","pcl"],["application/x-perfmon",["pma","pmc","pml","pmr","pmw"]],["application/x-pixclscript","plx"],["application/x-pkcs10","p10"],["application/x-pkcs12",["p12","pfx"]],["application/x-pkcs7-certificates",["p7b","spc"]],["application/x-pkcs7-certreqresp","p7r"],["application/x-pkcs7-mime",["p7m","p7c"]],["application/x-pkcs7-signature",["p7s","p7a"]],["application/x-pointplus","css"],["application/x-portable-anymap","pnm"],["application/x-project",["mpc","mpt","mpv","mpx"]],["application/x-qpro","wb1"],["application/x-rar-compressed","rar"],["application/x-rtf","rtf"],["application/x-sdp","sdp"],["application/x-sea","sea"],["application/x-seelogo","sl"],["application/x-sh","sh"],["application/x-shar",["shar","sh"]],["application/x-shockwave-flash","swf"],["application/x-silverlight-app","xap"],["application/x-sit","sit"],["application/x-sprite",["spr","sprite"]],["application/x-stuffit","sit"],["application/x-stuffitx","sitx"],["application/x-sv4cpio","sv4cpio"],["application/x-sv4crc","sv4crc"],["application/x-tar","tar"],["application/x-tbook",["sbk","tbk"]],["application/x-tcl","tcl"],["application/x-tex","tex"],["application/x-tex-tfm","tfm"],["application/x-texinfo",["texi","texinfo"]],["application/x-troff",["roff","t","tr"]],["application/x-troff-man","man"],["application/x-troff-me","me"],["application/x-troff-ms","ms"],["application/x-troff-msvideo","avi"],["application/x-ustar","ustar"],["application/x-visio",["vsd","vst","vsw"]],["application/x-vnd.audioexplosion.mzz","mzz"],["application/x-vnd.ls-xpix","xpix"],["application/x-vrml","vrml"],["application/x-wais-source",["src","wsrc"]],["application/x-winhelp","hlp"],["application/x-wintalk","wtk"],["application/x-world",["wrl","svr"]],["application/x-wpwin","wpd"],["application/x-wri","wri"],["application/x-x509-ca-cert",["cer","crt","der"]],["application/x-x509-user-cert","crt"],["application/x-xfig","fig"],["application/x-xpinstall","xpi"],["application/x-zip-compressed","zip"],["application/xcap-diff+xml","xdf"],["application/xenc+xml","xenc"],["application/xhtml+xml","xhtml"],["application/xml","xml"],["application/xml-dtd","dtd"],["application/xop+xml","xop"],["application/xslt+xml","xslt"],["application/xspf+xml","xspf"],["application/xv+xml","mxml"],["application/yang","yang"],["application/yin+xml","yin"],["application/ynd.ms-pkipko","pko"],["application/zip","zip"],["audio/adpcm","adp"],["audio/aiff",["aiff","aif","aifc"]],["audio/basic",["snd","au"]],["audio/it","it"],["audio/make",["funk","my","pfunk"]],["audio/make.my.funk","pfunk"],["audio/mid",["mid","rmi"]],["audio/midi",["midi","kar","mid"]],["audio/mod","mod"],["audio/mp4","mp4a"],["audio/mpeg",["mpga","mp3","m2a","mp2","mpa","mpg"]],["audio/mpeg3","mp3"],["audio/nspaudio",["la","lma"]],["audio/ogg","oga"],["audio/s3m","s3m"],["audio/tsp-audio","tsi"],["audio/tsplayer","tsp"],["audio/vnd.dece.audio","uva"],["audio/vnd.digital-winds","eol"],["audio/vnd.dra","dra"],["audio/vnd.dts","dts"],["audio/vnd.dts.hd","dtshd"],["audio/vnd.lucent.voice","lvp"],["audio/vnd.ms-playready.media.pya","pya"],["audio/vnd.nuera.ecelp4800","ecelp4800"],["audio/vnd.nuera.ecelp7470","ecelp7470"],["audio/vnd.nuera.ecelp9600","ecelp9600"],["audio/vnd.qcelp","qcp"],["audio/vnd.rip","rip"],["audio/voc","voc"],["audio/voxware","vox"],["audio/wav","wav"],["audio/webm","weba"],["audio/x-aac","aac"],["audio/x-adpcm","snd"],["audio/x-aiff",["aiff","aif","aifc"]],["audio/x-au","au"],["audio/x-gsm",["gsd","gsm"]],["audio/x-jam","jam"],["audio/x-liveaudio","lam"],["audio/x-mid",["mid","midi"]],["audio/x-midi",["midi","mid"]],["audio/x-mod","mod"],["audio/x-mpeg","mp2"],["audio/x-mpeg-3","mp3"],["audio/x-mpegurl","m3u"],["audio/x-mpequrl","m3u"],["audio/x-ms-wax","wax"],["audio/x-ms-wma","wma"],["audio/x-nspaudio",["la","lma"]],["audio/x-pn-realaudio",["ra","ram","rm","rmm","rmp"]],["audio/x-pn-realaudio-plugin",["ra","rmp","rpm"]],["audio/x-psid","sid"],["audio/x-realaudio","ra"],["audio/x-twinvq","vqf"],["audio/x-twinvq-plugin",["vqe","vql"]],["audio/x-vnd.audioexplosion.mjuicemediafile","mjf"],["audio/x-voc","voc"],["audio/x-wav","wav"],["audio/xm","xm"],["chemical/x-cdx","cdx"],["chemical/x-cif","cif"],["chemical/x-cmdf","cmdf"],["chemical/x-cml","cml"],["chemical/x-csml","csml"],["chemical/x-pdb",["pdb","xyz"]],["chemical/x-xyz","xyz"],["drawing/x-dwf","dwf"],["i-world/i-vrml","ivr"],["image/bmp",["bmp","bm"]],["image/cgm","cgm"],["image/cis-cod","cod"],["image/cmu-raster",["ras","rast"]],["image/fif","fif"],["image/florian",["flo","turbot"]],["image/g3fax","g3"],["image/gif","gif"],["image/ief",["ief","iefs"]],["image/jpeg",["jpeg","jpe","jpg","jfif","jfif-tbnl"]],["image/jutvision","jut"],["image/ktx","ktx"],["image/naplps",["nap","naplps"]],["image/pict",["pic","pict"]],["image/pipeg","jfif"],["image/pjpeg",["jfif","jpe","jpeg","jpg"]],["image/png",["png","x-png"]],["image/prs.btif","btif"],["image/svg+xml","svg"],["image/tiff",["tif","tiff"]],["image/vasa","mcf"],["image/vnd.adobe.photoshop","psd"],["image/vnd.dece.graphic","uvi"],["image/vnd.djvu","djvu"],["image/vnd.dvb.subtitle","sub"],["image/vnd.dwg",["dwg","dxf","svf"]],["image/vnd.dxf","dxf"],["image/vnd.fastbidsheet","fbs"],["image/vnd.fpx","fpx"],["image/vnd.fst","fst"],["image/vnd.fujixerox.edmics-mmr","mmr"],["image/vnd.fujixerox.edmics-rlc","rlc"],["image/vnd.ms-modi","mdi"],["image/vnd.net-fpx",["fpx","npx"]],["image/vnd.rn-realflash","rf"],["image/vnd.rn-realpix","rp"],["image/vnd.wap.wbmp","wbmp"],["image/vnd.xiff","xif"],["image/webp","webp"],["image/x-cmu-raster","ras"],["image/x-cmx","cmx"],["image/x-dwg",["dwg","dxf","svf"]],["image/x-freehand","fh"],["image/x-icon","ico"],["image/x-jg","art"],["image/x-jps","jps"],["image/x-niff",["niff","nif"]],["image/x-pcx","pcx"],["image/x-pict",["pct","pic"]],["image/x-portable-anymap","pnm"],["image/x-portable-bitmap","pbm"],["image/x-portable-graymap","pgm"],["image/x-portable-greymap","pgm"],["image/x-portable-pixmap","ppm"],["image/x-quicktime",["qif","qti","qtif"]],["image/x-rgb","rgb"],["image/x-tiff",["tif","tiff"]],["image/x-windows-bmp","bmp"],["image/x-xbitmap","xbm"],["image/x-xbm","xbm"],["image/x-xpixmap",["xpm","pm"]],["image/x-xwd","xwd"],["image/x-xwindowdump","xwd"],["image/xbm","xbm"],["image/xpm","xpm"],["message/rfc822",["eml","mht","mhtml","nws","mime"]],["model/iges",["iges","igs"]],["model/mesh","msh"],["model/vnd.collada+xml","dae"],["model/vnd.dwf","dwf"],["model/vnd.gdl","gdl"],["model/vnd.gtw","gtw"],["model/vnd.mts","mts"],["model/vnd.vtu","vtu"],["model/vrml",["vrml","wrl","wrz"]],["model/x-pov","pov"],["multipart/x-gzip","gzip"],["multipart/x-ustar","ustar"],["multipart/x-zip","zip"],["music/crescendo",["mid","midi"]],["music/x-karaoke","kar"],["paleovu/x-pv","pvu"],["text/asp","asp"],["text/calendar","ics"],["text/css","css"],["text/csv","csv"],["text/ecmascript","js"],["text/h323","323"],["text/html",["html","htm","stm","acgi","htmls","htx","shtml"]],["text/iuls","uls"],["text/javascript","js"],["text/mcf","mcf"],["text/n3","n3"],["text/pascal","pas"],["text/plain",["txt","bas","c","h","c++","cc","com","conf","cxx","def","f","f90","for","g","hh","idc","jav","java","list","log","lst","m","mar","pl","sdml","text"]],["text/plain-bas","par"],["text/prs.lines.tag","dsc"],["text/richtext",["rtx","rt","rtf"]],["text/scriplet","wsc"],["text/scriptlet","sct"],["text/sgml",["sgm","sgml"]],["text/tab-separated-values","tsv"],["text/troff","t"],["text/turtle","ttl"],["text/uri-list",["uni","unis","uri","uris"]],["text/vnd.abc","abc"],["text/vnd.curl","curl"],["text/vnd.curl.dcurl","dcurl"],["text/vnd.curl.mcurl","mcurl"],["text/vnd.curl.scurl","scurl"],["text/vnd.fly","fly"],["text/vnd.fmi.flexstor","flx"],["text/vnd.graphviz","gv"],["text/vnd.in3d.3dml","3dml"],["text/vnd.in3d.spot","spot"],["text/vnd.rn-realtext","rt"],["text/vnd.sun.j2me.app-descriptor","jad"],["text/vnd.wap.wml","wml"],["text/vnd.wap.wmlscript","wmls"],["text/webviewhtml","htt"],["text/x-asm",["asm","s"]],["text/x-audiosoft-intra","aip"],["text/x-c",["c","cc","cpp"]],["text/x-component","htc"],["text/x-fortran",["for","f","f77","f90"]],["text/x-h",["h","hh"]],["text/x-java-source",["java","jav"]],["text/x-java-source,java","java"],["text/x-la-asf","lsx"],["text/x-m","m"],["text/x-pascal","p"],["text/x-script","hlb"],["text/x-script.csh","csh"],["text/x-script.elisp","el"],["text/x-script.guile","scm"],["text/x-script.ksh","ksh"],["text/x-script.lisp","lsp"],["text/x-script.perl","pl"],["text/x-script.perl-module","pm"],["text/x-script.phyton","py"],["text/x-script.rexx","rexx"],["text/x-script.scheme","scm"],["text/x-script.sh","sh"],["text/x-script.tcl","tcl"],["text/x-script.tcsh","tcsh"],["text/x-script.zsh","zsh"],["text/x-server-parsed-html",["shtml","ssi"]],["text/x-setext","etx"],["text/x-sgml",["sgm","sgml"]],["text/x-speech",["spc","talk"]],["text/x-uil","uil"],["text/x-uuencode",["uu","uue"]],["text/x-vcalendar","vcs"],["text/x-vcard","vcf"],["text/xml","xml"],["video/3gpp","3gp"],["video/3gpp2","3g2"],["video/animaflex","afl"],["video/avi","avi"],["video/avs-video","avs"],["video/dl","dl"],["video/fli","fli"],["video/gl","gl"],["video/h261","h261"],["video/h263","h263"],["video/h264","h264"],["video/jpeg","jpgv"],["video/jpm","jpm"],["video/mj2","mj2"],["video/mp4","mp4"],["video/mpeg",["mpeg","mp2","mpa","mpe","mpg","mpv2","m1v","m2v","mp3"]],["video/msvideo","avi"],["video/ogg","ogv"],["video/quicktime",["mov","qt","moov"]],["video/vdo","vdo"],["video/vivo",["viv","vivo"]],["video/vnd.dece.hd","uvh"],["video/vnd.dece.mobile","uvm"],["video/vnd.dece.pd","uvp"],["video/vnd.dece.sd","uvs"],["video/vnd.dece.video","uvv"],["video/vnd.fvt","fvt"],["video/vnd.mpegurl","mxu"],["video/vnd.ms-playready.media.pyv","pyv"],["video/vnd.rn-realvideo","rv"],["video/vnd.uvvu.mp4","uvu"],["video/vnd.vivo",["viv","vivo"]],["video/vosaic","vos"],["video/webm","webm"],["video/x-amt-demorun","xdr"],["video/x-amt-showrun","xsr"],["video/x-atomic3d-feature","fmf"],["video/x-dl","dl"],["video/x-dv",["dif","dv"]],["video/x-f4v","f4v"],["video/x-fli","fli"],["video/x-flv","flv"],["video/x-gl","gl"],["video/x-isvideo","isu"],["video/x-la-asf",["lsf","lsx"]],["video/x-m4v","m4v"],["video/x-motion-jpeg","mjpg"],["video/x-mpeg",["mp3","mp2"]],["video/x-mpeq2a","mp2"],["video/x-ms-asf",["asf","asr","asx"]],["video/x-ms-asf-plugin","asx"],["video/x-ms-wm","wm"],["video/x-ms-wmv","wmv"],["video/x-ms-wmx","wmx"],["video/x-ms-wvx","wvx"],["video/x-msvideo","avi"],["video/x-qtc","qtc"],["video/x-scm","scm"],["video/x-sgi-movie",["movie","mv"]],["windows/metafile","wmf"],["www/mime","mime"],["x-conference/x-cooltalk","ice"],["x-music/x-midi",["mid","midi"]],["x-world/x-3dmf",["3dm","3dmf","qd3","qd3d"]],["x-world/x-svr","svr"],["x-world/x-vrml",["flr","vrml","wrl","wrz","xaf","xof"]],["x-world/x-vrt","vrt"],["xgl/drawing","xgz"],["xgl/movie","xmz"]]),o=new Map([["123","application/vnd.lotus-1-2-3"],["323","text/h323"],["*","application/octet-stream"],["3dm","x-world/x-3dmf"],["3dmf","x-world/x-3dmf"],["3dml","text/vnd.in3d.3dml"],["3g2","video/3gpp2"],["3gp","video/3gpp"],["7z","application/x-7z-compressed"],["a","application/octet-stream"],["aab","application/x-authorware-bin"],["aac","audio/x-aac"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abc","text/vnd.abc"],["abw","application/x-abiword"],["ac","application/pkix-attr-cert"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acgi","text/html"],["acu","application/vnd.acucobol"],["acx","application/internet-property-stream"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afl","video/animaflex"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/postscript"],["aif",["audio/aiff","audio/x-aiff"]],["aifc",["audio/aiff","audio/x-aiff"]],["aiff",["audio/aiff","audio/x-aiff"]],["aim","application/x-aim"],["aip","text/x-audiosoft-intra"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["ani","application/x-navi-animation"],["aos","application/x-nokia-9000-communicator-add-on-software"],["apk","application/vnd.android.package-archive"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["aps","application/mime"],["arc","application/octet-stream"],["arj",["application/arj","application/octet-stream"]],["art","image/x-jg"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asp","text/asp"],["asr","video/x-ms-asf"],["asx",["video/x-ms-asf","application/x-mplayer2","video/x-ms-asf-plugin"]],["atc","application/vnd.acucorp"],["atomcat","application/atomcat+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au",["audio/basic","audio/x-au"]],["avi",["video/avi","video/msvideo","application/x-troff-msvideo","video/x-msvideo"]],["avs","video/avs-video"],["aw","application/applixware"],["axs","application/olescript"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azw","application/vnd.amazon.ebook"],["bas","text/plain"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin",["application/octet-stream","application/mac-binary","application/macbinary","application/x-macbinary","application/x-binary"]],["bm","image/bmp"],["bmi","application/vnd.bmi"],["bmp",["image/bmp","image/x-windows-bmp"]],["boo","application/book"],["book","application/book"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bsh","application/x-bsh"],["btif","image/prs.btif"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c",["text/plain","text/x-c"]],["c++","text/plain"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["c4g","application/vnd.clonk.c4group"],["cab","application/vnd.ms-cab-compressed"],["car","application/vnd.curl.car"],["cat",["application/vnd.ms-pkiseccat","application/vnd.ms-pki.seccat"]],["cc",["text/plain","text/x-c"]],["ccad","application/clariscad"],["cco","application/x-cocoa"],["ccxml","application/ccxml+xml,"],["cdbcmsg","application/vnd.contact.cmsg"],["cdf",["application/cdf","application/x-cdf","application/x-netcdf"]],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer",["application/pkix-cert","application/x-x509-ca-cert"]],["cgm","image/cgm"],["cha","application/x-chat"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cla","application/vnd.claymore"],["class",["application/octet-stream","application/java","application/java-byte-code","application/java-vm","application/x-java-class"]],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod",["image/cis-cod","application/vnd.rim.cod"]],["com",["application/octet-stream","text/plain"]],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt",["application/mac-compactpro","application/x-compactpro","application/x-cpt"]],["crd","application/x-mscardfile"],["crl",["application/pkix-crl","application/pkcs-crl"]],["crt",["application/pkix-cert","application/x-x509-user-cert","application/x-x509-ca-cert"]],["cryptonote","application/vnd.rig.cryptonote"],["csh",["text/x-script.csh","application/x-csh"]],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["css",["text/css","application/x-pointplus"]],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxx","text/plain"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["davmount","application/davmount+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["deb","application/x-debian-package"],["deepv","application/x-deepv"],["def","text/plain"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dif","video/x-dv"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["djvu","image/vnd.djvu"],["dl",["video/dl","video/x-dl"]],["dll","application/x-msdownload"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.document.macroenabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroenabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp",["application/commonground","application/vnd.osgi.dp"]],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drw","application/drafting"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dv","video/x-dv"],["dvi","application/x-dvi"],["dwf",["model/vnd.dwf","drawing/x-dwf"]],["dwg",["application/acad","image/vnd.dwg","image/x-dwg"]],["dxf",["application/dxf","image/vnd.dwg","image/vnd.dxf","image/x-dwg"]],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["el","text/x-script.elisp"],["elc",["application/x-elc","application/x-bytecode.elisp"]],["eml","message/rfc822"],["emma","application/emma+xml"],["env","application/x-envoy"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es",["application/ecmascript","application/x-esrehber"]],["es3","application/vnd.eszigno3+xml"],["esf","application/vnd.epson.esf"],["etx","text/x-setext"],["evy",["application/envoy","application/x-envoy"]],["exe",["application/octet-stream","application/x-msdownload"]],["exi","application/exi"],["ext","application/vnd.novadigm.ext"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f",["text/plain","text/x-fortran"]],["f4v","video/x-f4v"],["f77","text/x-fortran"],["f90",["text/plain","text/x-fortran"]],["fbs","image/vnd.fastbidsheet"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fh","image/x-freehand"],["fif",["application/fractals","image/fif"]],["fig","application/x-xfig"],["fli",["video/fli","video/x-fli"]],["flo",["image/florian","application/vnd.micrografx.flo"]],["flr","x-world/x-vrml"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fmf","video/x-atomic3d-feature"],["fnc","application/vnd.frogans.fnc"],["for",["text/plain","text/x-fortran"]],["fpx",["image/vnd.fpx","image/vnd.net-fpx"]],["frl","application/freeloader"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["funk","audio/make"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g","text/plain"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gdl","model/vnd.gdl"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["gl",["video/gl","video/x-gl"]],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gph","application/vnd.flographit"],["gqf","application/vnd.grafeq"],["gram","application/srgs"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsd","audio/x-gsm"],["gsf","application/x-font-ghostscript"],["gsm","audio/x-gsm"],["gsp","application/x-gsp"],["gss","application/x-gss"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxt","application/vnd.geonext"],["gz",["application/x-gzip","application/x-compressed"]],["gzip",["multipart/x-gzip","application/x-gzip"]],["h",["text/plain","text/x-h"]],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hdf","application/x-hdf"],["help","application/x-helpfile"],["hgl","application/vnd.hp-hpgl"],["hh",["text/plain","text/x-h"]],["hlb","text/x-script"],["hlp",["application/winhlp","application/hlp","application/x-helpfile","application/x-winhelp"]],["hpg","application/vnd.hp-hpgl"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx",["application/mac-binhex40","application/binhex","application/binhex4","application/mac-binhex","application/x-binhex40","application/x-mac-binhex40"]],["hta","application/hta"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["htmls","text/html"],["htt","text/webviewhtml"],["htx","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["ico","image/x-icon"],["ics","text/calendar"],["idc","text/plain"],["ief","image/ief"],["iefs","image/ief"],["ifm","application/vnd.shana.informed.formdata"],["iges",["application/iges","model/iges"]],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs",["application/iges","model/iges"]],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["iii","application/x-iphone"],["ima","application/x-ima"],["imap","application/x-httpd-imap"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["inf","application/inf"],["ins",["application/x-internet-signup","application/x-internett-signup"]],["ip","application/x-ip2"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["isp","application/x-internet-signup"],["isu","video/x-isvideo"],["it","audio/it"],["itp","application/vnd.shana.informed.formtemplate"],["iv","application/x-inventor"],["ivp","application/vnd.immervision-ivp"],["ivr","i-world/i-vrml"],["ivu","application/vnd.immervision-ivu"],["ivy","application/x-livescreen"],["jad","text/vnd.sun.j2me.app-descriptor"],["jam",["application/vnd.jam","audio/x-jam"]],["jar","application/java-archive"],["jav",["text/plain","text/x-java-source"]],["java",["text/plain","text/x-java-source,java","text/x-java-source"]],["jcm","application/x-java-commerce"],["jfif",["image/pipeg","image/jpeg","image/pjpeg"]],["jfif-tbnl","image/jpeg"],["jisp","application/vnd.jisp"],["jlt","application/vnd.hp-jlyt"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jpe",["image/jpeg","image/pjpeg"]],["jpeg",["image/jpeg","image/pjpeg"]],["jpg",["image/jpeg","image/pjpeg"]],["jpgv","video/jpeg"],["jpm","video/jpm"],["jps","image/x-jps"],["js",["application/javascript","application/ecmascript","text/javascript","text/ecmascript","application/x-javascript"]],["json","application/json"],["jut","image/jutvision"],["kar",["audio/midi","music/x-karaoke"]],["karbon","application/vnd.kde.karbon"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["ksh",["application/x-ksh","text/x-script.ksh"]],["ksp","application/vnd.kde.kspread"],["ktx","image/ktx"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["la",["audio/nspaudio","audio/x-nspaudio"]],["lam","audio/x-liveaudio"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["lha",["application/octet-stream","application/lha","application/x-lha"]],["lhx","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["lma",["audio/nspaudio","audio/x-nspaudio"]],["log","text/plain"],["lrm","application/vnd.ms-lrm"],["lsf","video/x-la-asf"],["lsp",["application/x-lisp","text/x-script.lisp"]],["lst","text/plain"],["lsx",["video/x-la-asf","text/x-la-asf"]],["ltf","application/vnd.frogans.ltf"],["ltx","application/x-latex"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh",["application/octet-stream","application/x-lzh"]],["lzx",["application/lzx","application/octet-stream","application/x-lzx"]],["m",["text/plain","text/x-m"]],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m1v","video/mpeg"],["m21","application/mp21"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3u",["audio/x-mpegurl","audio/x-mpequrl"]],["m3u8","application/vnd.apple.mpegurl"],["m4v","video/x-m4v"],["ma","application/mathematica"],["mads","application/mads+xml"],["mag","application/vnd.ecowin.chart"],["man","application/x-troff-man"],["map","application/x-navimap"],["mar","text/plain"],["mathml","application/mathml+xml"],["mbd","application/mbedlet"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc$","application/x-magic-cap-package-1.0"],["mc1","application/vnd.medcalcdata"],["mcd",["application/mcad","application/vnd.mcd","application/x-mathcad"]],["mcf",["image/vasa","text/mcf"]],["mcp","application/netmc"],["mcurl","text/vnd.curl.mcurl"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["me","application/x-troff-me"],["meta4","application/metalink4+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mht","message/rfc822"],["mhtml","message/rfc822"],["mid",["audio/mid","audio/midi","music/crescendo","x-music/x-midi","audio/x-midi","application/x-midi","audio/x-mid"]],["midi",["audio/midi","music/crescendo","x-music/x-midi","audio/x-midi","application/x-midi","audio/x-mid"]],["mif",["application/vnd.mif","application/x-mif","application/x-frame"]],["mime",["message/rfc822","www/mime"]],["mj2","video/mj2"],["mjf","audio/x-vnd.audioexplosion.mjuicemediafile"],["mjpg","video/x-motion-jpeg"],["mlp","application/vnd.dolby.mlp"],["mm",["application/base64","application/x-meme"]],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mme","application/base64"],["mmf","application/vnd.smaf"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mny","application/x-msmoney"],["mod",["audio/mod","audio/x-mod"]],["mods","application/mods+xml"],["moov","video/quicktime"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2",["video/mpeg","audio/mpeg","video/x-mpeg","audio/x-mpeg","video/x-mpeq2a"]],["mp3",["audio/mpeg","audio/mpeg3","video/mpeg","audio/x-mpeg-3","video/x-mpeg"]],["mp4",["video/mp4","application/mp4"]],["mp4a","audio/mp4"],["mpa",["video/mpeg","audio/mpeg"]],["mpc",["application/vnd.mophun.certificate","application/x-project"]],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg",["video/mpeg","audio/mpeg"]],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/x-project"],["mpv","application/x-project"],["mpv2","video/mpeg"],["mpx","application/x-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","application/x-troff-ms"],["mscml","application/mediaservercontrol+xml"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msl","application/vnd.mobius.msl"],["msty","application/vnd.muvee.style"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musicxml","application/vnd.recordare.musicxml+xml"],["mv","video/x-sgi-movie"],["mvb","application/x-msmediaview"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["my","audio/make"],["mzz","application/x-vnd.audioexplosion.mzz"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nap","image/naplps"],["naplps","image/naplps"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncm","application/vnd.nokia.configuration-message"],["ncx","application/x-dtbncx+xml"],["ngdat","application/vnd.nokia.n-gage.data"],["nif","image/x-niff"],["niff","image/x-niff"],["nix","application/x-mix-transfer"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nvd","application/x-navidoc"],["nws","message/rfc822"],["o","application/octet-stream"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omc","application/x-omc"],["omcd","application/x-omcdatamaker"],["omcr","application/x-omcregerator"],["onetoc","application/onenote"],["opf","application/oebps-package+xml"],["org","application/vnd.lotus-organizer"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","application/x-font-otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p10",["application/pkcs10","application/x-pkcs10"]],["p12",["application/pkcs-12","application/x-pkcs12"]],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c",["application/pkcs7-mime","application/x-pkcs7-mime"]],["p7m",["application/pkcs7-mime","application/x-pkcs7-mime"]],["p7r","application/x-pkcs7-certreqresp"],["p7s",["application/pkcs7-signature","application/x-pkcs7-signature"]],["p8","application/pkcs8"],["par","text/plain-bas"],["part","application/pro_eng"],["pas","text/pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcf","application/x-font-pcf"],["pcl",["application/vnd.hp-pcl","application/x-pcl"]],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb",["application/vnd.palm","chemical/x-pdb"]],["pdf","application/pdf"],["pfa","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfunk",["audio/make","audio/make.my.funk"]],["pfx","application/x-pkcs12"],["pgm",["image/x-portable-graymap","image/x-portable-greymap"]],["pgn","application/x-chess-pgn"],["pgp","application/pgp-signature"],["pic",["image/pict","image/x-pict"]],["pict","image/pict"],["pkg","application/x-newton-compatible-pkg"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pko",["application/ynd.ms-pkipko","application/vnd.ms-pki.pko"]],["pl",["text/plain","text/x-script.perl"]],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["plx","application/x-pixclscript"],["pm",["text/x-script.perl-module","image/x-xpixmap"]],["pm4","application/x-pagemaker"],["pm5","application/x-pagemaker"],["pma","application/x-perfmon"],["pmc","application/x-perfmon"],["pml",["application/vnd.ctc-posml","application/x-perfmon"]],["pmr","application/x-perfmon"],["pmw","application/x-perfmon"],["png","image/png"],["pnm",["application/x-portable-anymap","image/x-portable-anymap"]],["portpkg","application/vnd.macports.portpkg"],["pot",["application/vnd.ms-powerpoint","application/mspowerpoint"]],["potm","application/vnd.ms-powerpoint.template.macroenabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["pov","model/x-pov"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroenabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps",["application/vnd.ms-powerpoint","application/mspowerpoint"]],["ppsm","application/vnd.ms-powerpoint.slideshow.macroenabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt",["application/vnd.ms-powerpoint","application/mspowerpoint","application/powerpoint","application/x-mspowerpoint"]],["pptm","application/vnd.ms-powerpoint.presentation.macroenabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["ppz","application/mspowerpoint"],["prc","application/x-mobipocket-ebook"],["pre",["application/vnd.lotus-freelance","application/x-freelance"]],["prf","application/pics-rules"],["prt","application/pro_eng"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd",["application/octet-stream","image/vnd.adobe.photoshop"]],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pvu","paleovu/x-pv"],["pwn","application/vnd.3m.post-it-notes"],["pwz","application/vnd.ms-powerpoint"],["py","text/x-script.phyton"],["pya","audio/vnd.ms-playready.media.pya"],["pyc","application/x-bytecode.python"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qcp","audio/vnd.qcelp"],["qd3","x-world/x-3dmf"],["qd3d","x-world/x-3dmf"],["qfx","application/vnd.intu.qfx"],["qif","image/x-quicktime"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qtc","video/x-qtc"],["qti","image/x-quicktime"],["qtif","image/x-quicktime"],["qxd","application/vnd.quark.quarkxpress"],["ra",["audio/x-realaudio","audio/x-pn-realaudio","audio/x-pn-realaudio-plugin"]],["ram","audio/x-pn-realaudio"],["rar","application/x-rar-compressed"],["ras",["image/cmu-raster","application/x-cmu-raster","image/x-cmu-raster"]],["rast","image/cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rexx","text/x-script.rexx"],["rf","image/vnd.rn-realflash"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm",["application/vnd.rn-realmedia","audio/x-pn-realaudio"]],["rmi","audio/mid"],["rmm","audio/x-pn-realaudio"],["rmp",["audio/x-pn-realaudio-plugin","audio/x-pn-realaudio"]],["rms","application/vnd.jcp.javame.midlet-rms"],["rnc","application/relax-ng-compact-syntax"],["rng",["application/ringing-tones","application/vnd.nokia.ringing-tone"]],["rnx","application/vnd.rn-realplayer"],["roff","application/x-troff"],["rp","image/vnd.rn-realpix"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsd","application/rsd+xml"],["rt",["text/richtext","text/vnd.rn-realtext"]],["rtf",["application/rtf","text/richtext","application/x-rtf"]],["rtx",["text/richtext","application/rtf"]],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["saveme","application/octet-stream"],["sbk","application/x-tbook"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm",["application/vnd.lotus-screencam","video/x-scm","text/x-script.guile","application/x-lotusscreencam","text/x-script.scheme"]],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["sct","text/scriptlet"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkm","application/vnd.solent.sdkm+xml"],["sdml","text/plain"],["sdp",["application/sdp","application/x-sdp"]],["sdr","application/sounder"],["sdw","application/vnd.stardivision.writer"],["sea",["application/sea","application/x-sea"]],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["ser","application/java-serialized-object"],["set","application/set"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sgl","application/vnd.stardivision.writer-global"],["sgm",["text/sgml","text/x-sgml"]],["sgml",["text/sgml","text/x-sgml"]],["sh",["application/x-shar","application/x-bsh","application/x-sh","text/x-script.sh"]],["shar",["application/x-bsh","application/x-shar"]],["shf","application/shf+xml"],["shtml",["text/html","text/x-server-parsed-html"]],["sid","audio/x-psid"],["sis","application/vnd.symbian.install"],["sit",["application/x-stuffit","application/x-sit"]],["sitx","application/x-stuffitx"],["skd","application/x-koan"],["skm","application/x-koan"],["skp",["application/vnd.koan","application/x-koan"]],["skt","application/x-koan"],["sl","application/x-seelogo"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi",["application/smil","application/smil+xml"]],["smil","application/smil"],["snd",["audio/basic","audio/x-adpcm"]],["snf","application/x-font-snf"],["sol","application/solids"],["spc",["text/x-speech","application/x-pkcs7-certificates"]],["spf","application/vnd.yamaha.smaf-phrase"],["spl",["application/futuresplash","application/x-futuresplash"]],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spr","application/x-sprite"],["sprite","application/x-sprite"],["src","application/x-wais-source"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssi","text/x-server-parsed-html"],["ssm","application/streamingmedia"],["ssml","application/ssml+xml"],["sst",["application/vnd.ms-pkicertstore","application/vnd.ms-pki.certstore"]],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["step","application/step"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl",["application/vnd.ms-pkistl","application/sla","application/vnd.ms-pki.stl","application/x-navistyle"]],["stm","text/html"],["stp","application/step"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["sub","image/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svf",["image/vnd.dwg","image/x-dwg"]],["svg","image/svg+xml"],["svr",["x-world/x-svr","application/x-world"]],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t",["text/troff","application/x-troff"]],["talk","text/x-speech"],["tao","application/vnd.tao.intent-module-archive"],["tar","application/x-tar"],["tbk",["application/toolbook","application/x-tbook"]],["tcap","application/vnd.3gpp2.tcap"],["tcl",["text/x-script.tcl","application/x-tcl"]],["tcsh","text/x-script.tcsh"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text",["application/plain","text/plain"]],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tgz",["application/gnutar","application/x-compressed"]],["thmx","application/vnd.ms-officetheme"],["tif",["image/tiff","image/x-tiff"]],["tiff",["image/tiff","image/x-tiff"]],["tmo","application/vnd.tmobile-livetv"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","application/x-troff"],["tra","application/vnd.trueapp"],["trm","application/x-msterminal"],["tsd","application/timestamped-data"],["tsi","audio/tsp-audio"],["tsp",["application/dsptype","audio/tsplayer"]],["tsv","text/tab-separated-values"],["ttf","application/x-font-ttf"],["ttl","text/turtle"],["turbot","image/florian"],["twd","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["ufd","application/vnd.ufdl"],["uil","text/x-uil"],["uls","text/iuls"],["umj","application/vnd.umajin"],["uni","text/uri-list"],["unis","text/uri-list"],["unityweb","application/vnd.unity"],["unv","application/i-deas"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["ustar",["application/x-ustar","multipart/x-ustar"]],["utz","application/vnd.uiq.theme"],["uu",["application/octet-stream","text/x-uuencode"]],["uue","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vda","application/vda"],["vdo","video/vdo"],["vew","application/groupwise"],["vis","application/vnd.visionary"],["viv",["video/vivo","video/vnd.vivo"]],["vivo",["video/vivo","video/vnd.vivo"]],["vmd","application/vocaltec-media-desc"],["vmf","application/vocaltec-media-file"],["voc",["audio/voc","audio/x-voc"]],["vos","video/vosaic"],["vox","audio/voxware"],["vqe","audio/x-twinvq-plugin"],["vqf","audio/x-twinvq"],["vql","audio/x-twinvq-plugin"],["vrml",["model/vrml","x-world/x-vrml","application/x-vrml"]],["vrt","x-world/x-vrt"],["vsd",["application/vnd.visio","application/x-visio"]],["vsf","application/vnd.vsf"],["vst","application/x-visio"],["vsw","application/x-visio"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w60","application/wordperfect6.0"],["w61","application/wordperfect6.1"],["w6w","application/msword"],["wad","application/x-doom"],["wav",["audio/wav","audio/x-wav"]],["wax","audio/x-ms-wax"],["wb1","application/x-qpro"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/vnd.wap.wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["web","application/vnd.xara"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wiz","application/msword"],["wk1","application/x-123"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf",["windows/metafile","application/x-msmetafile"]],["wml","text/vnd.wap.wml"],["wmlc","application/vnd.wap.wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-ms-wmz"],["woff","application/x-font-woff"],["word","application/msword"],["wp","application/wordperfect"],["wp5",["application/wordperfect","application/wordperfect6.0"]],["wp6","application/wordperfect"],["wpd",["application/wordperfect","application/vnd.wordperfect","application/x-wpwin"]],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wq1","application/x-lotus"],["wqd","application/vnd.wqd"],["wri",["application/mswrite","application/x-wri","application/x-mswrite"]],["wrl",["model/vrml","x-world/x-vrml","application/x-world"]],["wrz",["model/vrml","x-world/x-vrml"]],["wsc","text/scriplet"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wsrc","application/x-wais-source"],["wtb","application/vnd.webturbo"],["wtk","application/x-wintalk"],["wvx","video/x-ms-wvx"],["x-png","image/png"],["x3d","application/vnd.hzn-3d-crossword"],["xaf","x-world/x-vrml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm",["image/xbm","image/x-xbm","image/x-xbitmap"]],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdr","video/x-amt-demorun"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xgz","xgl/drawing"],["xhtml","application/xhtml+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xlam","application/vnd.ms-excel.addin.macroenabled.12"],["xlb",["application/excel","application/vnd.ms-excel","application/x-excel"]],["xlc",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xld",["application/excel","application/x-excel"]],["xlk",["application/excel","application/x-excel"]],["xll",["application/excel","application/vnd.ms-excel","application/x-excel"]],["xlm",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xls",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xlsb","application/vnd.ms-excel.sheet.binary.macroenabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroenabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xltm","application/vnd.ms-excel.template.macroenabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlv",["application/excel","application/x-excel"]],["xlw",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xm","audio/xm"],["xml",["application/xml","text/xml","application/atom+xml","application/rss+xml"]],["xmz","xgl/movie"],["xo","application/vnd.olpc-sugar"],["xof","x-world/x-vrml"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpix","application/x-vnd.ls-xpix"],["xpm",["image/xpm","image/x-xpixmap"]],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xsr","video/x-amt-showrun"],["xul","application/vnd.mozilla.xul+xml"],["xwd",["image/x-xwd","image/x-xwindowdump"]],["xyz",["chemical/x-xyz","chemical/x-pdb"]],["yang","application/yang"],["yin","application/yin+xml"],["z",["application/x-compressed","application/x-compress"]],["zaz","application/vnd.zzazz.deck+xml"],["zip",["application/zip","multipart/x-zip","application/x-zip-compressed","application/x-compressed"]],["zir","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zoo","application/octet-stream"],["zsh","text/x-script.zsh"]]);return me={detectMimeType(n){if(!n)return w;let s=_.parse(n),c=(s.ext.substr(1)||s.name||"").split("?").shift().trim().toLowerCase(),i=w;return o.has(c)&&(i=o.get(c)),Array.isArray(i)?i[0]:i},detectExtension(n){if(!n)return y;let s=(n||"").toLowerCase().trim().split("/"),c=s.shift().trim(),i=s.join("/").trim();if(u.has(c+"/"+i)){let a=u.get(c+"/"+i);return Array.isArray(a)?a[0]:a}switch(c){case"text":return"txt";default:return"bin"}}},me}var he,$e;function kt(){if($e)return he;$e=1;const _=2147483647,w=36,y=1,u=26,o=38,n=700,s=72,c=128,i="-",a=/^xn--/,m=/[^\0-\x7F]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=w-y,g=Math.floor,t=String.fromCharCode;function e(T){throw new RangeError(h[T])}function r(T,j){const H=[];let M=T.length;for(;M--;)H[M]=j(T[M]);return H}function l(T,j){const H=T.split("@");let M="";H.length>1&&(M=H[0]+"@",T=H[1]),T=T.replace(p,".");const L=T.split("."),z=r(L,j).join(".");return M+z}function d(T){const j=[];let H=0;const M=T.length;for(;H<M;){const L=T.charCodeAt(H++);if(L>=55296&&L<=56319&&H<M){const z=T.charCodeAt(H++);(z&64512)==56320?j.push(((L&1023)<<10)+(z&1023)+65536):(j.push(L),H--)}else j.push(L)}return j}const x=T=>String.fromCodePoint(...T),b=function(T){return T>=48&&T<58?26+(T-48):T>=65&&T<91?T-65:T>=97&&T<123?T-97:w},v=function(T,j){return T+22+75*(T<26)-((j!=0)<<5)},E=function(T,j,H){let M=0;for(T=H?g(T/n):T>>1,T+=g(T/j);T>f*u>>1;M+=w)T=g(T/f);return g(M+(f+1)*T/(T+o))},k=function(T){const j=[],H=T.length;let M=0,L=c,z=s,D=T.lastIndexOf(i);D<0&&(D=0);for(let R=0;R<D;++R)T.charCodeAt(R)>=128&&e("not-basic"),j.push(T.charCodeAt(R));for(let R=D>0?D+1:0;R<H;){const P=M;for(let B=1,F=w;;F+=w){R>=H&&e("invalid-input");const K=b(T.charCodeAt(R++));K>=w&&e("invalid-input"),K>g((_-M)/B)&&e("overflow"),M+=K*B;const G=F<=z?y:F>=z+u?u:F-z;if(K<G)break;const J=w-G;B>g(_/J)&&e("overflow"),B*=J}const V=j.length+1;z=E(M-P,V,P==0),g(M/V)>_-L&&e("overflow"),L+=g(M/V),M%=V,j.splice(M++,0,L)}return String.fromCodePoint(...j)},S=function(T){const j=[];T=d(T);const H=T.length;let M=c,L=0,z=s;for(const P of T)P<128&&j.push(t(P));const D=j.length;let R=D;for(D&&j.push(i);R<H;){let P=_;for(const B of T)B>=M&&B<P&&(P=B);const V=R+1;P-M>g((_-L)/V)&&e("overflow"),L+=(P-M)*V,M=P;for(const B of T)if(B<M&&++L>_&&e("overflow"),B===M){let F=L;for(let K=w;;K+=w){const G=K<=z?y:K>=z+u?u:K-z;if(F<G)break;const J=F-G,Ue=w-G;j.push(t(v(G+J%Ue,0))),F=g(J/Ue)}j.push(t(v(F,0))),z=E(L,V,R===D),L=0,++R}++L,++M}return j.join("")};return he={version:"2.3.1",ucs2:{decode:d,encode:x},decode:k,encode:S,toASCII:function(T){return l(T,function(j){return m.test(j)?"xn--"+S(j):j})},toUnicode:function(T){return l(T,function(j){return a.test(j)?k(j.slice(4).toLowerCase()):j})}},he}var ue,Xe;function Tt(){if(Xe)return ue;Xe=1;const _=C.Transform;function w(o){return typeof o=="string"&&(o=Buffer.from(o,"utf-8")),o.toString("base64")}function y(o,n){if(o=(o||"").toString(),n=n||76,o.length<=n)return o;let s=[],c=0,i=n*1024;for(;c<o.length;){let a=o.substr(c,i).replace(new RegExp(".{"+n+"}","g"),`$&\r
`).trim();s.push(a),c+=i}return s.join(`\r
`).trim()}class u extends _{constructor(n){super(),this.options=n||{},this.options.lineLength!==!1&&(this.options.lineLength=this.options.lineLength||76),this._curLine="",this._remainingBytes=!1,this.inputBytes=0,this.outputBytes=0}_transform(n,s,c){if(s!=="buffer"&&(n=Buffer.from(n,s)),!n||!n.length)return setImmediate(c);this.inputBytes+=n.length,this._remainingBytes&&this._remainingBytes.length&&(n=Buffer.concat([this._remainingBytes,n],this._remainingBytes.length+n.length),this._remainingBytes=!1),n.length%3?(this._remainingBytes=n.slice(n.length-n.length%3),n=n.slice(0,n.length-n.length%3)):this._remainingBytes=!1;let i=this._curLine+w(n);if(this.options.lineLength){i=y(i,this.options.lineLength);let a=i.lastIndexOf(`
`);a<0?(this._curLine=i,i=""):a===i.length-1?this._curLine="":(this._curLine=i.substr(a+1),i=i.substr(0,a+1))}i&&(this.outputBytes+=i.length,this.push(Buffer.from(i,"ascii"))),setImmediate(c)}_flush(n){this._remainingBytes&&this._remainingBytes.length&&(this._curLine+=w(this._remainingBytes)),this._curLine&&(this._curLine=y(this._curLine,this.options.lineLength),this.outputBytes+=this._curLine.length,this.push(this._curLine,"ascii"),this._curLine=""),n()}}return ue={encode:w,wrap:y,Encoder:u},ue}var fe,Je;function St(){if(Je)return fe;Je=1;const _=C.Transform;function w(n){typeof n=="string"&&(n=Buffer.from(n,"utf-8"));let s=[[9],[10],[13],[32,60],[62,126]],c="",i;for(let a=0,m=n.length;a<m;a++){if(i=n[a],u(i,s)&&!((i===32||i===9)&&(a===m-1||n[a+1]===10||n[a+1]===13))){c+=String.fromCharCode(i);continue}c+="="+(i<16?"0":"")+i.toString(16).toUpperCase()}return c}function y(n,s){if(n=(n||"").toString(),s=s||76,n.length<=s)return n;let c=0,i=n.length,a,m,p,h=Math.floor(s/3),f="";for(;c<i;){if(p=n.substr(c,s),a=p.match(/\r\n/)){p=p.substr(0,a.index+a[0].length),f+=p,c+=p.length;continue}if(p.substr(-1)===`
`){f+=p,c+=p.length;continue}else if(a=p.substr(-h).match(/\n.*?$/)){p=p.substr(0,p.length-(a[0].length-1)),f+=p,c+=p.length;continue}else if(p.length>s-h&&(a=p.substr(-h).match(/[ \t.,!?][^ \t.,!?]*$/)))p=p.substr(0,p.length-(a[0].length-1));else if(p.match(/[=][\da-f]{0,2}$/i))for((a=p.match(/[=][\da-f]{0,1}$/i))&&(p=p.substr(0,p.length-a[0].length));p.length>3&&p.length<i-c&&!p.match(/^(?:=[\da-f]{2}){1,4}$/i)&&(a=p.match(/[=][\da-f]{2}$/gi))&&(m=parseInt(a[0].substr(1,2),16),!(m<128||(p=p.substr(0,p.length-3),m>=192))););c+p.length<i&&p.substr(-1)!==`
`?(p.length===s&&p.match(/[=][\da-f]{2}$/i)?p=p.substr(0,p.length-3):p.length===s&&(p=p.substr(0,p.length-1)),c+=p.length,p+=`=\r
`):c+=p.length,f+=p}return f}function u(n,s){for(let c=s.length-1;c>=0;c--)if(s[c].length&&(s[c].length===1&&n===s[c][0]||s[c].length===2&&n>=s[c][0]&&n<=s[c][1]))return!0;return!1}class o extends _{constructor(s){super(),this.options=s||{},this.options.lineLength!==!1&&(this.options.lineLength=this.options.lineLength||76),this._curLine="",this.inputBytes=0,this.outputBytes=0}_transform(s,c,i){let a;if(c!=="buffer"&&(s=Buffer.from(s,c)),!s||!s.length)return i();this.inputBytes+=s.length,this.options.lineLength?(a=this._curLine+w(s),a=y(a,this.options.lineLength),a=a.replace(/(^|\n)([^\n]*)$/,(m,p,h)=>(this._curLine=h,p)),a&&(this.outputBytes+=a.length,this.push(a))):(a=w(s),this.outputBytes+=a.length,this.push(a,"ascii")),i()}_flush(s){this._curLine&&(this.outputBytes+=this._curLine.length,this.push(this._curLine,"ascii")),s()}}return fe={encode:w,wrap:y,Encoder:o},fe}var xe,We;function se(){if(We)return xe;We=1;const _=Tt(),w=St(),y=Et();return xe={isPlainText(u,o){return!(typeof u!="string"||(o?/[\x00-\x08\x0b\x0c\x0e-\x1f"\u0080-\uFFFF]/:/[\x00-\x08\x0b\x0c\x0e-\x1f\u0080-\uFFFF]/).test(u))},hasLongerLines(u,o){return u.length>128*1024?!0:new RegExp("^.{"+(o+1)+",}","m").test(u)},encodeWord(u,o,n){o=(o||"Q").toString().toUpperCase().trim().charAt(0),n=n||0;let s,c="UTF-8";if(n&&n>7+c.length&&(n-=7+c.length),o==="Q"?s=w.encode(u).replace(/[^a-z0-9!*+\-/=]/gi,i=>{let a=i.charCodeAt(0).toString(16).toUpperCase();return i===" "?"_":"="+(a.length===1?"0"+a:a)}):o==="B"&&(s=typeof u=="string"?u:_.encode(u),n=n?Math.max(3,(n-n%4)/4*3):0),n&&(o!=="B"?s:_.encode(u)).length>n)if(o==="Q")s=this.splitMimeEncodedString(s,n).join("?= =?"+c+"?"+o+"?");else{let i=[],a="";for(let m=0,p=s.length;m<p;m++){let h=s.charAt(m);/[\ud83c\ud83d\ud83e]/.test(h)&&m<p-1&&(h+=s.charAt(++m)),Buffer.byteLength(a+h)<=n||m===0?a+=h:(i.push(_.encode(a)),a=h)}a&&i.push(_.encode(a)),i.length>1?s=i.join("?= =?"+c+"?"+o+"?"):s=i.join("")}else o==="B"&&(s=_.encode(u));return"=?"+c+"?"+o+"?"+s+(s.substr(-2)==="?="?"":"?=")},encodeWords(u,o,n,s){n=n||0;let c,i=u.match(/(?:^|\s)([^\s]*["\u0080-\uFFFF])/);if(!i)return u;if(s)return this.encodeWord(u,o,n);let a=u.match(/(["\u0080-\uFFFF][^\s]*)[^"\u0080-\uFFFF]*$/);if(!a)return u;let m=i.index+(i[0].match(/[^\s]/)||{index:0}).index,p=a.index+(a[1]||"").length;return c=(m?u.substr(0,m):"")+this.encodeWord(u.substring(m,p),o||"Q",n)+(p<u.length?u.substr(p):""),c},buildHeaderValue(u){let o=[];return Object.keys(u.params||{}).forEach(n=>{let s=u.params[n];!this.isPlainText(s,!0)||s.length>=75?this.buildHeaderParam(n,s,50).forEach(c=>{!/[\s"\\;:/=(),<>@[\]?]|^[-']|'$/.test(c.value)||c.key.substr(-1)==="*"?o.push(c.key+"="+c.value):o.push(c.key+"="+JSON.stringify(c.value))}):/[\s'"\\;:/=(),<>@[\]?]|^-/.test(s)?o.push(n+"="+JSON.stringify(s)):o.push(n+"="+s)}),u.value+(o.length?"; "+o.join("; "):"")},buildHeaderParam(u,o,n){let s=[],c=typeof o=="string"?o:(o||"").toString(),i,a,m,p,h=0,f,g;if(n=n||50,this.isPlainText(o,!0)){if(c.length<=n)return[{key:u,value:c}];c=c.replace(new RegExp(".{"+n+"}","g"),t=>(s.push({line:t}),"")),c&&s.push({line:c})}else{if(/[\uD800-\uDBFF]/.test(c)){for(i=[],f=0,g=c.length;f<g;f++)a=c.charAt(f),m=a.charCodeAt(0),m>=55296&&m<=56319&&f<g-1?(a+=c.charAt(f+1),i.push(a),f++):i.push(a);c=i}p="utf-8''";let t=!0;for(h=0,f=0,g=c.length;f<g;f++){if(a=c[f],t)a=this.safeEncodeURIComponent(a);else if(a=a===" "?a:this.safeEncodeURIComponent(a),a!==c[f])if((this.safeEncodeURIComponent(p)+a).length>=n)s.push({line:p,encoded:t}),p="",h=f-1;else{t=!0,f=h,p="";continue}(p+a).length>=n?(s.push({line:p,encoded:t}),p=a=c[f]===" "?" ":this.safeEncodeURIComponent(c[f]),a===c[f]?(t=!1,h=f-1):t=!0):p+=a}p&&s.push({line:p,encoded:t})}return s.map((t,e)=>({key:u+"*"+e+(t.encoded?"*":""),value:t.line}))},parseHeaderValue(u){let o={value:!1,params:{}},n=!1,s="",c="value",i=!1,a=!1,m;for(let p=0,h=u.length;p<h;p++)if(m=u.charAt(p),c==="key"){if(m==="="){n=s.trim().toLowerCase(),c="value",s="";continue}s+=m}else{if(a)s+=m;else if(m==="\\"){a=!0;continue}else i&&m===i?i=!1:!i&&m==='"'?i=m:!i&&m===";"?(n===!1?o.value=s.trim():o.params[n]=s.trim(),c="key",s=""):s+=m;a=!1}return c==="value"?n===!1?o.value=s.trim():o.params[n]=s.trim():s.trim()&&(o.params[s.trim().toLowerCase()]=""),Object.keys(o.params).forEach(p=>{let h,f,g,t;(g=p.match(/(\*(\d+)|\*(\d+)\*|\*)$/))&&(h=p.substr(0,g.index),f=Number(g[2]||g[3])||0,(!o.params[h]||typeof o.params[h]!="object")&&(o.params[h]={charset:!1,values:[]}),t=o.params[p],f===0&&g[0].substr(-1)==="*"&&(g=t.match(/^([^']*)'[^']*'(.*)$/))&&(o.params[h].charset=g[1]||"iso-8859-1",t=g[2]),o.params[h].values[f]=t,delete o.params[p])}),Object.keys(o.params).forEach(p=>{let h;o.params[p]&&Array.isArray(o.params[p].values)&&(h=o.params[p].values.map(f=>f||"").join(""),o.params[p].charset?o.params[p]="=?"+o.params[p].charset+"?Q?"+h.replace(/[=?_\s]/g,f=>{let g=f.charCodeAt(0).toString(16);return f===" "?"_":"%"+(g.length<2?"0":"")+g}).replace(/%/g,"=")+"?=":o.params[p]=h)}),o},detectExtension:u=>y.detectExtension(u),detectMimeType:u=>y.detectMimeType(u),foldLines(u,o,n){u=(u||"").toString(),o=o||76;let s=0,c=u.length,i="",a,m;for(;s<c;){if(a=u.substr(s,o),a.length<o){i+=a;break}if(m=a.match(/^[^\n\r]*(\r?\n|\r)/)){a=m[0],i+=a,s+=a.length;continue}else(m=a.match(/(\s+)[^\s]*$/))&&m[0].length-(n?(m[1]||"").length:0)<a.length?a=a.substr(0,a.length-(m[0].length-(n?(m[1]||"").length:0))):(m=u.substr(s+a.length).match(/^[^\s]+(\s*)/))&&(a=a+m[0].substr(0,m[0].length-(n?0:(m[1]||"").length)));i+=a,s+=a.length,s<c&&(i+=`\r
`)}return i},splitMimeEncodedString:(u,o)=>{let n,s,c,i,a=[];for(o=Math.max(o||0,12);u.length;){for(n=u.substr(0,o),(s=n.match(/[=][0-9A-F]?$/i))&&(n=n.substr(0,s.index)),i=!1;!i;)i=!0,(s=u.substr(n.length).match(/^[=]([0-9A-F]{2})/i))&&(c=parseInt(s[1],16),c<194&&c>127&&(n=n.substr(0,n.length-3),i=!1));n.length&&a.push(n),u=u.substr(n.length)}return a},encodeURICharComponent:u=>{let o="",n=u.charCodeAt(0).toString(16).toUpperCase();if(n.length%2&&(n="0"+n),n.length>2)for(let s=0,c=n.length/2;s<c;s++)o+="%"+n.substr(s,2);else o+="%"+n;return o},safeEncodeURIComponent(u){u=(u||"").toString();try{u=encodeURIComponent(u)}catch{return u.replace(/[^\x00-\x1F *'()<>@,;:\\"[\]?=\u007F-\uFFFF]+/g,"")}return u.replace(/[\x00-\x1F *'()<>@,;:\\"[\]?=\u007F-\uFFFF]/g,o=>this.encodeURICharComponent(o))}},xe}var ge,Ye;function ii(){if(Ye)return ge;Ye=1;function _(u){let o=!1,n="text",s,c=[],i={address:[],comment:[],group:[],text:[]},a,m;for(a=0,m=u.length;a<m;a++){let p=u[a],h=a?u[a-1]:null;if(p.type==="operator")switch(p.value){case"<":n="address";break;case"(":n="comment";break;case":":n="group",o=!0;break;default:n="text";break}else p.value&&(n==="address"&&(p.value=p.value.replace(/^[^<]*<\s*/,"")),h&&h.noBreak&&i[n].length?i[n][i[n].length-1]+=p.value:i[n].push(p.value))}if(!i.text.length&&i.comment.length&&(i.text=i.comment,i.comment=[]),o)i.text=i.text.join(" "),c.push({name:i.text||s&&s.name,group:i.group.length?y(i.group.join(",")):[]});else{if(!i.address.length&&i.text.length){for(a=i.text.length-1;a>=0;a--)if(i.text[a].match(/^[^@\s]+@[^@\s]+$/)){i.address=i.text.splice(a,1);break}let p=function(h){return i.address.length?h:(i.address=[h.trim()]," ")};if(!i.address.length)for(a=i.text.length-1;a>=0&&(i.text[a]=i.text[a].replace(/\s*\b[^@\s]+@[^\s]+\b\s*/,p).trim(),!i.address.length);a--);}if(!i.text.length&&i.comment.length&&(i.text=i.comment,i.comment=[]),i.address.length>1&&(i.text=i.text.concat(i.address.splice(1))),i.text=i.text.join(" "),i.address=i.address.join(" "),!i.address&&o)return[];s={address:i.address||i.text||"",name:i.text||i.address||""},s.address===s.name&&((s.address||"").match(/@/)?s.name="":s.address=""),c.push(s)}return c}class w{constructor(o){this.str=(o||"").toString(),this.operatorCurrent="",this.operatorExpecting="",this.node=null,this.escaped=!1,this.list=[],this.operators={'"':'"',"(":")","<":">",",":"",":":";",";":""}}tokenize(){let o=[];for(let n=0,s=this.str.length;n<s;n++){let c=this.str.charAt(n),i=n<s-1?this.str.charAt(n+1):null;this.checkChar(c,i)}return this.list.forEach(n=>{n.value=(n.value||"").toString().trim(),n.value&&o.push(n)}),o}checkChar(o,n){if(!this.escaped){if(o===this.operatorExpecting){this.node={type:"operator",value:o},n&&![" ","	","\r",`
`,",",";"].includes(n)&&(this.node.noBreak=!0),this.list.push(this.node),this.node=null,this.operatorExpecting="",this.escaped=!1;return}else if(!this.operatorExpecting&&o in this.operators){this.node={type:"operator",value:o},this.list.push(this.node),this.node=null,this.operatorExpecting=this.operators[o],this.escaped=!1;return}else if(['"',"'"].includes(this.operatorExpecting)&&o==="\\"){this.escaped=!0;return}}this.node||(this.node={type:"text",value:""},this.list.push(this.node)),o===`
`&&(o=" "),(o.charCodeAt(0)>=33||[" ","	"].includes(o))&&(this.node.value+=o),this.escaped=!1}}function y(u,o){o=o||{};let s=new w(u).tokenize(),c=[],i=[],a=[];if(s.forEach(m=>{m.type==="operator"&&(m.value===","||m.value===";")?(i.length&&c.push(i),i=[]):i.push(m)}),i.length&&c.push(i),c.forEach(m=>{m=_(m),m.length&&(a=a.concat(m))}),o.flatten){let m=[],p=h=>{h.forEach(f=>{if(f.group)return p(f.group);m.push(f)})};return p(a),m}return a}return ge=y,ge}var ve,Ze;function ai(){if(Ze)return ve;Ze=1;const _=C.Transform;class w extends _{constructor(){super(),this.lastByte=!1}_transform(u,o,n){u.length&&(this.lastByte=u[u.length-1]),this.push(u),n()}_flush(u){return this.lastByte===10?u():this.lastByte===13?(this.push(Buffer.from(`
`)),u()):(this.push(Buffer.from(`\r
`)),u())}}return ve=w,ve}var we,et;function Ct(){if(et)return we;et=1;const w=C.Transform;class y extends w{constructor(o){super(o),this.options=o||{},this.lastByte=!1}_transform(o,n,s){let c,i=0;for(let a=0,m=o.length;a<m;a++)o[a]===10&&(a&&o[a-1]!==13||!a&&this.lastByte!==13)&&(a>i&&(c=o.slice(i,a),this.push(c)),this.push(Buffer.from(`\r
`)),i=a+1);i&&i<o.length?(c=o.slice(i),this.push(c)):i||this.push(o),this.lastByte=o[o.length-1],s()}}return we=y,we}var be,tt;function si(){if(tt)return be;tt=1;const w=C.Transform;class y extends w{constructor(o){super(o),this.options=o||{}}_transform(o,n,s){let c,i=0;for(let a=0,m=o.length;a<m;a++)o[a]===13&&(c=o.slice(i,a),i=a+1,this.push(c));i&&i<o.length?(c=o.slice(i),this.push(c)):i||this.push(o),s()}}return be=y,be}var _e,it;function At(){if(it)return _e;it=1;const _=C,w=C,y=kt(),u=C.PassThrough,o=O(),n=se(),s=St(),c=Tt(),i=ii(),a=ae(),m=ai(),p=Ct(),h=si();class f{constructor(t,e){this.nodeCounter=0,e=e||{},this.baseBoundary=e.baseBoundary||_.randomBytes(8).toString("hex"),this.boundaryPrefix=e.boundaryPrefix||"--_NmP",this.disableFileAccess=!!e.disableFileAccess,this.disableUrlAccess=!!e.disableUrlAccess,this.normalizeHeaderKey=e.normalizeHeaderKey,this.date=new Date,this.rootNode=e.rootNode||this,this.keepBcc=!!e.keepBcc,e.filename&&(this.filename=e.filename,t||(t=n.detectMimeType(this.filename.split(".").pop()))),this.textEncoding=(e.textEncoding||"").toString().trim().charAt(0).toUpperCase(),this.parentNode=e.parentNode,this.hostname=e.hostname,this.newline=e.newline,this.childNodes=[],this._nodeId=++this.rootNode.nodeCounter,this._headers=[],this._isPlainText=!1,this._hasLongLines=!1,this._envelope=!1,this._raw=!1,this._transforms=[],this._processFuncs=[],t&&this.setHeader("Content-Type",t)}createChild(t,e){!e&&typeof t=="object"&&(e=t,t=void 0);let r=new f(t,e);return this.appendChild(r),r}appendChild(t){return t.rootNode!==this.rootNode&&(t.rootNode=this.rootNode,t._nodeId=++this.rootNode.nodeCounter),t.parentNode=this,this.childNodes.push(t),t}replace(t){return t===this?this:(this.parentNode.childNodes.forEach((e,r)=>{e===this&&(t.rootNode=this.rootNode,t.parentNode=this.parentNode,t._nodeId=this._nodeId,this.rootNode=this,this.parentNode=void 0,t.parentNode.childNodes[r]=t)}),t)}remove(){if(!this.parentNode)return this;for(let t=this.parentNode.childNodes.length-1;t>=0;t--)if(this.parentNode.childNodes[t]===this)return this.parentNode.childNodes.splice(t,1),this.parentNode=void 0,this.rootNode=this,this}setHeader(t,e){let r=!1,l;if(!e&&t&&typeof t=="object")return t.key&&"value"in t?this.setHeader(t.key,t.value):Array.isArray(t)?t.forEach(d=>{this.setHeader(d.key,d.value)}):Object.keys(t).forEach(d=>{this.setHeader(d,t[d])}),this;t=this._normalizeHeaderKey(t),l={key:t,value:e};for(let d=0,x=this._headers.length;d<x;d++)this._headers[d].key===t&&(r?(this._headers.splice(d,1),d--,x--):(this._headers[d]=l,r=!0));return r||this._headers.push(l),this}addHeader(t,e){return!e&&t&&typeof t=="object"?(t.key&&t.value?this.addHeader(t.key,t.value):Array.isArray(t)?t.forEach(r=>{this.addHeader(r.key,r.value)}):Object.keys(t).forEach(r=>{this.addHeader(r,t[r])}),this):Array.isArray(e)?(e.forEach(r=>{this.addHeader(t,r)}),this):(this._headers.push({key:this._normalizeHeaderKey(t),value:e}),this)}getHeader(t){t=this._normalizeHeaderKey(t);for(let e=0,r=this._headers.length;e<r;e++)if(this._headers[e].key===t)return this._headers[e].value}setContent(t){return this.content=t,typeof this.content.pipe=="function"?(this._contentErrorHandler=e=>{this.content.removeListener("error",this._contentErrorHandler),this.content=e},this.content.once("error",this._contentErrorHandler)):typeof this.content=="string"&&(this._isPlainText=n.isPlainText(this.content),this._isPlainText&&n.hasLongerLines(this.content,76)&&(this._hasLongLines=!0)),this}build(t){let e;t||(e=new Promise((b,v)=>{t=o.callbackPromise(b,v)}));let r=this.createReadStream(),l=[],d=0,x=!1;return r.on("readable",()=>{let b;for(;(b=r.read())!==null;)l.push(b),d+=b.length}),r.once("error",b=>{if(!x)return x=!0,t(b)}),r.once("end",b=>{if(!x)return x=!0,b&&b.length&&(l.push(b),d+=b.length),t(null,Buffer.concat(l,d))}),e}getTransferEncoding(){let t=!1,e=(this.getHeader("Content-Type")||"").toString().toLowerCase().trim();return this.content&&(t=(this.getHeader("Content-Transfer-Encoding")||"").toString().toLowerCase().trim(),(!t||!["base64","quoted-printable"].includes(t))&&(/^text\//i.test(e)?this._isPlainText&&!this._hasLongLines?t="7bit":typeof this.content=="string"||this.content instanceof Buffer?t=this._getTextEncoding(this.content)==="Q"?"quoted-printable":"base64":t=this.textEncoding==="B"?"base64":"quoted-printable":/^(multipart|message)\//i.test(e)||(t=t||"base64"))),t}buildHeaders(){let t=this.getTransferEncoding(),e=[];if(t&&this.setHeader("Content-Transfer-Encoding",t),this.filename&&!this.getHeader("Content-Disposition")&&this.setHeader("Content-Disposition","attachment"),this.rootNode===this){this.getHeader("Date")||this.setHeader("Date",this.date.toUTCString().replace(/GMT/,"+0000")),this.messageId(),this.getHeader("MIME-Version")||this.setHeader("MIME-Version","1.0");for(let r=this._headers.length-2;r>=0;r--){let l=this._headers[r];l.key==="Content-Type"&&(this._headers.splice(r,1),this._headers.push(l))}}return this._headers.forEach(r=>{let l=r.key,d=r.value,x,b,v={};if(!(d&&typeof d=="object"&&!["From","Sender","To","Cc","Bcc","Reply-To","Date","References"].includes(l)&&(Object.keys(d).forEach(k=>{k!=="value"&&(v[k]=d[k])}),d=(d.value||"").toString(),!d.trim()))){if(v.prepared){v.foldLines?e.push(n.foldLines(l+": "+d)):e.push(l+": "+d);return}switch(r.key){case"Content-Disposition":x=n.parseHeaderValue(d),this.filename&&(x.params.filename=this.filename),d=n.buildHeaderValue(x);break;case"Content-Type":x=n.parseHeaderValue(d),this._handleContentType(x),x.value.match(/^text\/plain\b/)&&typeof this.content=="string"&&/[\u0080-\uFFFF]/.test(this.content)&&(x.params.charset="utf-8"),d=n.buildHeaderValue(x),this.filename&&(b=this._encodeWords(this.filename),(b!==this.filename||/[\s'"\\;:/=(),<>@[\]?]|^-/.test(b))&&(b='"'+b+'"'),d+="; name="+b);break;case"Bcc":if(!this.keepBcc)return;break}if(d=this._encodeHeaderValue(l,d),!!(d||"").toString().trim()){if(typeof this.normalizeHeaderKey=="function"){let k=this.normalizeHeaderKey(l,d);k&&typeof k=="string"&&k.length&&(l=k)}e.push(n.foldLines(l+": "+d,76))}}}),e.join(`\r
`)}createReadStream(t){t=t||{};let e=new u(t),r=e,l;this.stream(e,t,d=>{if(d){r.emit("error",d);return}e.end()});for(let d=0,x=this._transforms.length;d<x;d++)l=typeof this._transforms[d]=="function"?this._transforms[d]():this._transforms[d],r.once("error",b=>{l.emit("error",b)}),r=r.pipe(l);l=new m,r.once("error",d=>{l.emit("error",d)}),r=r.pipe(l);for(let d=0,x=this._processFuncs.length;d<x;d++)l=this._processFuncs[d],r=l(r);if(this.newline){const x=["win","windows","dos",`\r
`].includes(this.newline.toString().toLowerCase())?new p:new h,b=r.pipe(x);return r.on("error",v=>b.emit("error",v)),b}return r}transform(t){this._transforms.push(t)}processFunc(t){this._processFuncs.push(t)}stream(t,e,r){let l=this.getTransferEncoding(),d,x,b=!1,v=S=>{b||(b=!0,r(S))},E=()=>{let S=0,A=()=>{if(S>=this.childNodes.length)return t.write(`\r
--`+this.boundary+`--\r
`),v();let I=this.childNodes[S++];t.write((S>1?`\r
`:"")+"--"+this.boundary+`\r
`),I.stream(t,e,q=>{if(q)return v(q);setImmediate(A)})};if(this.multipart)setImmediate(A);else return v()},k=()=>{if(this.content){if(Object.prototype.toString.call(this.content)==="[object Error]")return v(this.content);typeof this.content.pipe=="function"&&(this.content.removeListener("error",this._contentErrorHandler),this._contentErrorHandler=A=>v(A),this.content.once("error",this._contentErrorHandler));let S=()=>{["quoted-printable","base64"].includes(l)?(d=new(l==="base64"?c:s).Encoder(e),d.pipe(t,{end:!1}),d.once("end",E),d.once("error",A=>v(A)),x=this._getStream(this.content),x.pipe(d)):(x=this._getStream(this.content),x.pipe(t,{end:!1}),x.once("end",E)),x.once("error",A=>v(A))};if(this.content._resolve){let A=[],I=0,q=!1,T=this._getStream(this.content);T.on("error",j=>{q||(q=!0,v(j))}),T.on("readable",()=>{let j;for(;(j=T.read())!==null;)A.push(j),I+=j.length}),T.on("end",()=>{q||(q=!0,this.content._resolve=!1,this.content._resolvedValue=Buffer.concat(A,I),setImmediate(S))})}else setImmediate(S);return}else return setImmediate(E)};this._raw?setImmediate(()=>{if(Object.prototype.toString.call(this._raw)==="[object Error]")return v(this._raw);typeof this._raw.pipe=="function"&&this._raw.removeListener("error",this._contentErrorHandler);let S=this._getStream(this._raw);S.pipe(t,{end:!1}),S.on("error",A=>t.emit("error",A)),S.on("end",E)}):(t.write(this.buildHeaders()+`\r
\r
`),setImmediate(k))}setEnvelope(t){let e;this._envelope={from:!1,to:[]},t.from&&(e=[],this._convertAddresses(this._parseAddresses(t.from),e),e=e.filter(l=>l&&l.address),e.length&&e[0]&&(this._envelope.from=e[0].address)),["to","cc","bcc"].forEach(l=>{t[l]&&this._convertAddresses(this._parseAddresses(t[l]),this._envelope.to)}),this._envelope.to=this._envelope.to.map(l=>l.address).filter(l=>l);let r=["to","cc","bcc","from"];return Object.keys(t).forEach(l=>{r.includes(l)||(this._envelope[l]=t[l])}),this}getAddresses(){let t={};return this._headers.forEach(e=>{let r=e.key.toLowerCase();["from","sender","reply-to","to","cc","bcc"].includes(r)&&(Array.isArray(t[r])||(t[r]=[]),this._convertAddresses(this._parseAddresses(e.value),t[r]))}),t}getEnvelope(){if(this._envelope)return this._envelope;let t={from:!1,to:[]};return this._headers.forEach(e=>{let r=[];e.key==="From"||!t.from&&["Reply-To","Sender"].includes(e.key)?(this._convertAddresses(this._parseAddresses(e.value),r),r.length&&r[0]&&(t.from=r[0].address)):["To","Cc","Bcc"].includes(e.key)&&this._convertAddresses(this._parseAddresses(e.value),t.to)}),t.to=t.to.map(e=>e.address),t}messageId(){let t=this.getHeader("Message-ID");return t||(t=this._generateMessageId(),this.setHeader("Message-ID",t)),t}setRaw(t){return this._raw=t,this._raw&&typeof this._raw.pipe=="function"&&(this._contentErrorHandler=e=>{this._raw.removeListener("error",this._contentErrorHandler),this._raw=e},this._raw.once("error",this._contentErrorHandler)),this}_getStream(t){let e;return t._resolvedValue?(e=new u,setImmediate(()=>{try{e.end(t._resolvedValue)}catch(r){e.emit("error",r)}}),e):typeof t.pipe=="function"?t:t&&typeof t.path=="string"&&!t.href?this.disableFileAccess?(e=new u,setImmediate(()=>e.emit("error",new Error("File access rejected for "+t.path))),e):w.createReadStream(t.path):t&&typeof t.href=="string"?this.disableUrlAccess?(e=new u,setImmediate(()=>e.emit("error",new Error("Url access rejected for "+t.href))),e):a(t.href,{headers:t.httpHeaders}):(e=new u,setImmediate(()=>{try{e.end(t||"")}catch(r){e.emit("error",r)}}),e)}_parseAddresses(t){return[].concat.apply([],[].concat(t).map(e=>e&&e.address?(e.address=this._normalizeAddress(e.address),e.name=e.name||"",[e]):i(e)))}_normalizeHeaderKey(t){return t=(t||"").toString().replace(/\r?\n|\r/g," ").trim().toLowerCase().replace(/^X-SMTPAPI$|^(MIME|DKIM|ARC|BIMI)\b|^[a-z]|-(SPF|FBL|ID|MD5)$|-[a-z]/gi,e=>e.toUpperCase()).replace(/^Content-Features$/i,"Content-features"),t}_handleContentType(t){this.contentType=t.value.trim().toLowerCase(),this.multipart=/^multipart\//i.test(this.contentType)?this.contentType.substr(this.contentType.indexOf("/")+1):!1,this.multipart?this.boundary=t.params.boundary=t.params.boundary||this.boundary||this._generateBoundary():this.boundary=!1}_generateBoundary(){return this.rootNode.boundaryPrefix+"-"+this.rootNode.baseBoundary+"-Part_"+this._nodeId}_encodeHeaderValue(t,e){switch(t=this._normalizeHeaderKey(t),t){case"From":case"Sender":case"To":case"Cc":case"Bcc":case"Reply-To":return this._convertAddresses(this._parseAddresses(e));case"Message-ID":case"In-Reply-To":case"Content-Id":return e=(e||"").toString().replace(/\r?\n|\r/g," "),e.charAt(0)!=="<"&&(e="<"+e),e.charAt(e.length-1)!==">"&&(e=e+">"),e;case"References":return e=[].concat.apply([],[].concat(e||"").map(r=>(r=(r||"").toString().replace(/\r?\n|\r/g," ").trim(),r.replace(/<[^>]*>/g,l=>l.replace(/\s/g,"")).split(/\s+/)))).map(r=>(r.charAt(0)!=="<"&&(r="<"+r),r.charAt(r.length-1)!==">"&&(r=r+">"),r)),e.join(" ").trim();case"Date":return Object.prototype.toString.call(e)==="[object Date]"?e.toUTCString().replace(/GMT/,"+0000"):(e=(e||"").toString().replace(/\r?\n|\r/g," "),this._encodeWords(e));case"Content-Type":case"Content-Disposition":return(e||"").toString().replace(/\r?\n|\r/g," ");default:return e=(e||"").toString().replace(/\r?\n|\r/g," "),this._encodeWords(e)}}_convertAddresses(t,e){let r=[];return e=e||[],[].concat(t||[]).forEach(l=>{if(l.address)l.address=this._normalizeAddress(l.address),l.name?l.name&&r.push(`${this._encodeAddressName(l.name)} <${l.address}>`):r.push(l.address.indexOf(" ")>=0?`<${l.address}>`:`${l.address}`),l.address&&(e.filter(d=>d.address===l.address).length||e.push(l));else if(l.group){let d=(l.group.length?this._convertAddresses(l.group,e):"").trim();r.push(`${this._encodeAddressName(l.name)}:${d};`)}}),r.join(", ")}_normalizeAddress(t){t=(t||"").toString().replace(/[\x00-\x1F<>]+/g," ").trim();let e=t.lastIndexOf("@");if(e<0)return t;let r=t.substr(0,e),l=t.substr(e+1),d;try{d=y.toASCII(l.toLowerCase())}catch{}return r.indexOf(" ")>=0&&(r.charAt(0)!=='"'&&(r='"'+r),r.substr(-1)!=='"'&&(r=r+'"')),`${r}@${d}`}_encodeAddressName(t){return/^[\w ]*$/.test(t)?t:/^[\x20-\x7e]*$/.test(t)?'"'+t.replace(/([\\"])/g,"\\$1")+'"':n.encodeWord(t,this._getTextEncoding(t),52)}_encodeWords(t){return n.encodeWords(t,this._getTextEncoding(t),52,!0)}_getTextEncoding(t){t=(t||"").toString();let e=this.textEncoding,r,l;return e||(l=(t.match(/[\x00-\x08\x0B\x0C\x0E-\x1F\u0080-\uFFFF]/g)||[]).length,r=(t.match(/[a-z]/gi)||[]).length,e=l<r?"Q":"B"),e}_generateMessageId(){return"<"+[2,2,2,6].reduce((t,e)=>t+"-"+_.randomBytes(e).toString("hex"),_.randomBytes(4).toString("hex"))+"@"+(this.getEnvelope().from||this.hostname||"localhost").split("@").pop()+">"}}return _e=f,_e}var ye,at;function ni(){if(at)return ye;at=1;const _=At(),w=se(),y=O().parseDataURI;class u{constructor(n){this.mail=n||{},this.message=!1}compile(){return this._alternatives=this.getAlternatives(),this._htmlNode=this._alternatives.filter(n=>/^text\/html\b/i.test(n.contentType)).pop(),this._attachments=this.getAttachments(!!this._htmlNode),this._useRelated=!!(this._htmlNode&&this._attachments.related.length),this._useAlternative=this._alternatives.length>1,this._useMixed=this._attachments.attached.length>1||this._alternatives.length&&this._attachments.attached.length===1,this.mail.raw?this.message=new _("message/rfc822",{newline:this.mail.newline}).setRaw(this.mail.raw):this._useMixed?this.message=this._createMixed():this._useAlternative?this.message=this._createAlternative():this._useRelated?this.message=this._createRelated():this.message=this._createContentNode(!1,[].concat(this._alternatives||[]).concat(this._attachments.attached||[]).shift()||{contentType:"text/plain",content:""}),this.mail.headers&&this.message.addHeader(this.mail.headers),["from","sender","to","cc","bcc","reply-to","in-reply-to","references","subject","message-id","date"].forEach(n=>{let s=n.replace(/-(\w)/g,(c,i)=>i.toUpperCase());this.mail[s]&&this.message.setHeader(n,this.mail[s])}),this.mail.envelope&&this.message.setEnvelope(this.mail.envelope),this.message.messageId(),this.message}getAttachments(n){let s,c,i=[].concat(this.mail.attachments||[]).map((a,m)=>{let p,h=/^message\//i.test(a.contentType);/^data:/i.test(a.path||a.href)&&(a=this._processDataUrl(a));let f=a.contentType||w.detectMimeType(a.filename||a.path||a.href||"bin"),g=/^image\//i.test(f),t=a.contentDisposition||(h||g&&a.cid?"inline":"attachment");return p={contentType:f,contentDisposition:t,contentTransferEncoding:"contentTransferEncoding"in a?a.contentTransferEncoding:"base64"},a.filename?p.filename=a.filename:!h&&a.filename!==!1&&(p.filename=(a.path||a.href||"").split("/").pop().split("?").shift()||"attachment-"+(m+1),p.filename.indexOf(".")<0&&(p.filename+="."+w.detectExtension(p.contentType))),/^https?:\/\//i.test(a.path)&&(a.href=a.path,a.path=void 0),a.cid&&(p.cid=a.cid),a.raw?p.raw=a.raw:a.path?p.content={path:a.path}:a.href?p.content={href:a.href,httpHeaders:a.httpHeaders}:p.content=a.content||"",a.encoding&&(p.encoding=a.encoding),a.headers&&(p.headers=a.headers),p});return this.mail.icalEvent&&(typeof this.mail.icalEvent=="object"&&(this.mail.icalEvent.content||this.mail.icalEvent.path||this.mail.icalEvent.href||this.mail.icalEvent.raw)?s=this.mail.icalEvent:s={content:this.mail.icalEvent},c={},Object.keys(s).forEach(a=>{c[a]=s[a]}),c.contentType="application/ics",c.headers||(c.headers={}),c.filename=c.filename||"invite.ics",c.headers["Content-Disposition"]="attachment",c.headers["Content-Transfer-Encoding"]="base64"),n?{attached:i.filter(a=>!a.cid).concat(c||[]),related:i.filter(a=>!!a.cid)}:{attached:i.concat(c||[]),related:[]}}getAlternatives(){let n=[],s,c,i,a,m,p;return this.mail.text&&(typeof this.mail.text=="object"&&(this.mail.text.content||this.mail.text.path||this.mail.text.href||this.mail.text.raw)?s=this.mail.text:s={content:this.mail.text},s.contentType="text/plain; charset=utf-8"),this.mail.watchHtml&&(typeof this.mail.watchHtml=="object"&&(this.mail.watchHtml.content||this.mail.watchHtml.path||this.mail.watchHtml.href||this.mail.watchHtml.raw)?i=this.mail.watchHtml:i={content:this.mail.watchHtml},i.contentType="text/watch-html; charset=utf-8"),this.mail.amp&&(typeof this.mail.amp=="object"&&(this.mail.amp.content||this.mail.amp.path||this.mail.amp.href||this.mail.amp.raw)?a=this.mail.amp:a={content:this.mail.amp},a.contentType="text/x-amp-html; charset=utf-8"),this.mail.icalEvent&&(typeof this.mail.icalEvent=="object"&&(this.mail.icalEvent.content||this.mail.icalEvent.path||this.mail.icalEvent.href||this.mail.icalEvent.raw)?m=this.mail.icalEvent:m={content:this.mail.icalEvent},p={},Object.keys(m).forEach(h=>{p[h]=m[h]}),p.content&&typeof p.content=="object"&&(p.content._resolve=!0),p.filename=!1,p.contentType="text/calendar; charset=utf-8; method="+(p.method||"PUBLISH").toString().trim().toUpperCase(),p.headers||(p.headers={})),this.mail.html&&(typeof this.mail.html=="object"&&(this.mail.html.content||this.mail.html.path||this.mail.html.href||this.mail.html.raw)?c=this.mail.html:c={content:this.mail.html},c.contentType="text/html; charset=utf-8"),[].concat(s||[]).concat(i||[]).concat(a||[]).concat(c||[]).concat(p||[]).concat(this.mail.alternatives||[]).forEach(h=>{let f;/^data:/i.test(h.path||h.href)&&(h=this._processDataUrl(h)),f={contentType:h.contentType||w.detectMimeType(h.filename||h.path||h.href||"txt"),contentTransferEncoding:h.contentTransferEncoding},h.filename&&(f.filename=h.filename),/^https?:\/\//i.test(h.path)&&(h.href=h.path,h.path=void 0),h.raw?f.raw=h.raw:h.path?f.content={path:h.path}:h.href?f.content={href:h.href}:f.content=h.content||"",h.encoding&&(f.encoding=h.encoding),h.headers&&(f.headers=h.headers),n.push(f)}),n}_createMixed(n){let s;return n?s=n.createChild("multipart/mixed",{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):s=new _("multipart/mixed",{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._useAlternative?this._createAlternative(s):this._useRelated&&this._createRelated(s),[].concat(!this._useAlternative&&this._alternatives||[]).concat(this._attachments.attached||[]).forEach(c=>{(!this._useRelated||c!==this._htmlNode)&&this._createContentNode(s,c)}),s}_createAlternative(n){let s;return n?s=n.createChild("multipart/alternative",{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):s=new _("multipart/alternative",{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._alternatives.forEach(c=>{this._useRelated&&this._htmlNode===c?this._createRelated(s):this._createContentNode(s,c)}),s}_createRelated(n){let s;return n?s=n.createChild('multipart/related; type="text/html"',{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):s=new _('multipart/related; type="text/html"',{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._createContentNode(s,this._htmlNode),this._attachments.related.forEach(c=>this._createContentNode(s,c)),s}_createContentNode(n,s){s=s||{},s.content=s.content||"";let c,i=(s.encoding||"utf8").toString().toLowerCase().replace(/[-_\s]/g,"");return n?c=n.createChild(s.contentType,{filename:s.filename,textEncoding:this.mail.textEncoding,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):c=new _(s.contentType,{filename:s.filename,baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),s.headers&&c.addHeader(s.headers),s.cid&&c.setHeader("Content-Id","<"+s.cid.replace(/[<>]/g,"")+">"),s.contentTransferEncoding?c.setHeader("Content-Transfer-Encoding",s.contentTransferEncoding):this.mail.encoding&&/^text\//i.test(s.contentType)&&c.setHeader("Content-Transfer-Encoding",this.mail.encoding),(!/^text\//i.test(s.contentType)||s.contentDisposition)&&c.setHeader("Content-Disposition",s.contentDisposition||(s.cid&&/^image\//i.test(s.contentType)?"inline":"attachment")),typeof s.content=="string"&&!["utf8","usascii","ascii"].includes(i)&&(s.content=Buffer.from(s.content,i)),s.raw?c.setRaw(s.raw):c.setContent(s.content),c}_processDataUrl(n){let s;return(n.path||n.href).match(/^data:/)&&(s=y(n.path||n.href)),s&&(n.content=s.data,n.contentType=n.contentType||s.contentType,"path"in n&&(n.path=!1),"href"in n&&(n.href=!1)),n}}return ye=u,ye}var Ee,st;function oi(){if(st)return Ee;st=1;const _=C.Transform;class w extends _{constructor(u){super(u),this.lastBytes=Buffer.alloc(4),this.headersParsed=!1,this.headerBytes=0,this.headerChunks=[],this.rawHeaders=!1,this.bodySize=0}updateLastBytes(u){let o=this.lastBytes.length,n=Math.min(u.length,o);for(let s=0,c=o-n;s<c;s++)this.lastBytes[s]=this.lastBytes[s+n];for(let s=1;s<=n;s++)this.lastBytes[o-s]=u[u.length-s]}checkHeaders(u){if(this.headersParsed)return!0;let o=this.lastBytes.length,n=0;this.curLinePos=0;for(let s=0,c=this.lastBytes.length+u.length;s<c;s++){let i;if(s<o?i=this.lastBytes[s]:i=u[s-o],i===10&&s){let a=s-1<o?this.lastBytes[s-1]:u[s-1-o],m=s>1?s-2<o?this.lastBytes[s-2]:u[s-2-o]:!1;if(a===10){this.headersParsed=!0,n=s-o+1,this.headerBytes+=n;break}else if(a===13&&m===10){this.headersParsed=!0,n=s-o+1,this.headerBytes+=n;break}}}if(this.headersParsed){if(this.headerChunks.push(u.slice(0,n)),this.rawHeaders=Buffer.concat(this.headerChunks,this.headerBytes),this.headerChunks=null,this.emit("headers",this.parseHeaders()),u.length-1>n){let s=u.slice(n);this.bodySize+=s.length,setImmediate(()=>this.push(s))}return!1}else this.headerBytes+=u.length,this.headerChunks.push(u);return this.updateLastBytes(u),!1}_transform(u,o,n){if(!u||!u.length)return n();typeof u=="string"&&(u=Buffer.from(u,o));let s;try{s=this.checkHeaders(u)}catch(c){return n(c)}s&&(this.bodySize+=u.length,this.push(u)),setImmediate(n)}_flush(u){if(this.headerChunks){let o=Buffer.concat(this.headerChunks,this.headerBytes);this.bodySize+=o.length,this.push(o),this.headerChunks=null}u()}parseHeaders(){let u=(this.rawHeaders||"").toString().split(/\r?\n/);for(let o=u.length-1;o>0;o--)/^\s/.test(u[o])&&(u[o-1]+=`
`+u[o],u.splice(o,1));return u.filter(o=>o.trim()).map(o=>({key:o.substr(0,o.indexOf(":")).trim().toLowerCase(),line:o}))}}return Ee=w,Ee}var ke,nt;function ri(){if(nt)return ke;nt=1;const _=C.Transform,w=C;class y extends _{constructor(o){super(),o=o||{},this.chunkBuffer=[],this.chunkBufferLen=0,this.bodyHash=w.createHash(o.hashAlgo||"sha1"),this.remainder="",this.byteLength=0,this.debug=o.debug,this._debugBody=o.debug?[]:!1}updateHash(o){let n,s="",c="file";for(let a=o.length-1;a>=0;a--){let m=o[a];if(!(c==="file"&&(m===10||m===13))){if(c==="file"&&(m===9||m===32))c="line";else if(!(c==="line"&&(m===9||m===32))){if((c==="file"||c==="line")&&(c="body",a===o.length-1))break}}if(a===0){if(c==="file"&&(!this.remainder||/[\r\n]$/.test(this.remainder))||c==="line"&&(!this.remainder||/[ \t]$/.test(this.remainder))){this.remainder+=o.toString("binary");return}else if(c==="line"||c==="file"){s=o.toString("binary"),o=!1;break}}if(c==="body"){s=o.slice(a+1).toString("binary"),o=o.slice(0,a+1);break}}let i=!!this.remainder;if(o&&!i){for(let a=0,m=o.length;a<m;a++)if(a&&o[a]===10&&o[a-1]!==13){i=!0;break}else if(a&&o[a]===13&&o[a-1]===32){i=!0;break}else if(a&&o[a]===32&&o[a-1]===32){i=!0;break}else if(o[a]===9){i=!0;break}}i?(n=this.remainder+(o?o.toString("binary"):""),this.remainder=s,n=n.replace(/\r?\n/g,`
`).replace(/[ \t]*$/gm,"").replace(/[ \t]+/gm," ").replace(/\n/g,`\r
`),o=Buffer.from(n,"binary")):s&&(this.remainder=s),this.debug&&this._debugBody.push(o),this.bodyHash.update(o)}_transform(o,n,s){if(!o||!o.length)return s();typeof o=="string"&&(o=Buffer.from(o,n)),this.updateHash(o),this.byteLength+=o.length,this.push(o),s()}_flush(o){/[\r\n]$/.test(this.remainder)&&this.byteLength>2&&this.bodyHash.update(Buffer.from(`\r
`)),this.byteLength||this.push(Buffer.from(`\r
`)),this.emit("hash",this.bodyHash.digest("base64"),this.debug?Buffer.concat(this._debugBody):!1),o()}}return ke=y,ke}var ie={exports:{}},ot;function pi(){if(ot)return ie.exports;ot=1;const _=kt(),w=se(),y=C;ie.exports=(s,c,i,a)=>{a=a||{};let p=a.headerFieldNames||"From:Sender:Reply-To:Subject:Date:Message-ID:To:Cc:MIME-Version:Content-Type:Content-Transfer-Encoding:Content-ID:Content-Description:Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:In-Reply-To:References:List-Id:List-Help:List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive",h=o(s,p,a.skipFields),f=u(a.domainName,a.keySelector,h.fieldNames,c,i),g,t;h.headers+="dkim-signature:"+n(f),g=y.createSign(("rsa-"+c).toUpperCase()),g.update(h.headers);try{t=g.sign(a.privateKey,"base64")}catch{return!1}return f+t.replace(/(^.{73}|.{75}(?!\r?\n|\r))/g,`$&\r
 `).trim()},ie.exports.relaxedHeaders=o;function u(s,c,i,a,m){let p=["v=1","a=rsa-"+a,"c=relaxed/relaxed","d="+_.toASCII(s),"q=dns/txt","s="+c,"bh="+m,"h="+i].join("; ");return w.foldLines("DKIM-Signature: "+p,76)+`;\r
 b=`}function o(s,c,i){let a=new Set,m=new Set,p=new Map;(i||"").toLowerCase().split(":").forEach(g=>{m.add(g.trim())}),(c||"").toLowerCase().split(":").filter(g=>!m.has(g.trim())).forEach(g=>{a.add(g.trim())});for(let g=s.length-1;g>=0;g--){let t=s[g];a.has(t.key)&&!p.has(t.key)&&p.set(t.key,n(t.line))}let h=[],f=[];return a.forEach(g=>{p.has(g)&&(f.push(g),h.push(g+":"+p.get(g)))}),{headers:h.join(`\r
`)+`\r
`,fieldNames:f.join(":")}}function n(s){return s.substr(s.indexOf(":")+1).replace(/\r?\n/g,"").replace(/\s+/g," ").trim()}return ie.exports}var Te,rt;function li(){if(rt)return Te;rt=1;const _=oi(),w=ri(),y=pi(),u=C.PassThrough,o=C,n=C,s=C,c="sha256",i=128*1024;class a{constructor(h,f,g,t){this.options=h||{},this.keys=f,this.cacheTreshold=Number(this.options.cacheTreshold)||i,this.hashAlgo=this.options.hashAlgo||c,this.cacheDir=this.options.cacheDir||!1,this.chunks=[],this.chunklen=0,this.readPos=0,this.cachePath=this.cacheDir?n.join(this.cacheDir,"message."+Date.now()+"-"+s.randomBytes(14).toString("hex")):!1,this.cache=!1,this.headers=!1,this.bodyHash=!1,this.parser=!1,this.relaxedBody=!1,this.input=g,this.output=t,this.output.usingCache=!1,this.hasErrored=!1,this.input.on("error",e=>{this.hasErrored=!0,this.cleanup(),t.emit("error",e)})}cleanup(){!this.cache||!this.cachePath||o.unlink(this.cachePath,()=>!1)}createReadCache(){this.cache=o.createReadStream(this.cachePath),this.cache.once("error",h=>{this.cleanup(),this.output.emit("error",h)}),this.cache.once("close",()=>{this.cleanup()}),this.cache.pipe(this.output)}sendNextChunk(){if(this.hasErrored)return;if(this.readPos>=this.chunks.length)return this.cache?this.createReadCache():this.output.end();let h=this.chunks[this.readPos++];if(this.output.write(h)===!1)return this.output.once("drain",()=>{this.sendNextChunk()});setImmediate(()=>this.sendNextChunk())}sendSignedOutput(){let h=0,f=()=>{if(h>=this.keys.length)return this.output.write(this.parser.rawHeaders),setImmediate(()=>this.sendNextChunk());let g=this.keys[h++],t=y(this.headers,this.hashAlgo,this.bodyHash,{domainName:g.domainName,keySelector:g.keySelector,privateKey:g.privateKey,headerFieldNames:this.options.headerFieldNames,skipFields:this.options.skipFields});return t&&this.output.write(Buffer.from(t+`\r
`)),setImmediate(f)};if(this.bodyHash&&this.headers)return f();this.output.write(this.parser.rawHeaders),this.sendNextChunk()}createWriteCache(){this.output.usingCache=!0,this.cache=o.createWriteStream(this.cachePath),this.cache.once("error",h=>{this.cleanup(),this.relaxedBody.unpipe(this.cache),this.relaxedBody.on("readable",()=>{for(;this.relaxedBody.read()!==null;);}),this.hasErrored=!0,this.output.emit("error",h)}),this.cache.once("close",()=>{this.sendSignedOutput()}),this.relaxedBody.removeAllListeners("readable"),this.relaxedBody.pipe(this.cache)}signStream(){this.parser=new _,this.relaxedBody=new w({hashAlgo:this.hashAlgo}),this.parser.on("headers",h=>{this.headers=h}),this.relaxedBody.on("hash",h=>{this.bodyHash=h}),this.relaxedBody.on("readable",()=>{let h;if(!this.cache){for(;(h=this.relaxedBody.read())!==null;)if(this.chunks.push(h),this.chunklen+=h.length,this.chunklen>=this.cacheTreshold&&this.cachePath)return this.createWriteCache()}}),this.relaxedBody.on("end",()=>{this.cache||this.sendSignedOutput()}),this.parser.pipe(this.relaxedBody),setImmediate(()=>this.input.pipe(this.parser))}}class m{constructor(h){this.options=h||{},this.keys=[].concat(this.options.keys||{domainName:h.domainName,keySelector:h.keySelector,privateKey:h.privateKey})}sign(h,f){let g=new u,t=h,e=!1;Buffer.isBuffer(h)?(e=h,t=new u):typeof h=="string"&&(e=Buffer.from(h),t=new u);let r=this.options;f&&Object.keys(f).length&&(r={},Object.keys(this.options||{}).forEach(d=>{r[d]=this.options[d]}),Object.keys(f||{}).forEach(d=>{d in r||(r[d]=f[d])}));let l=new a(r,this.keys,t,g);return setImmediate(()=>{l.signStream(),e&&setImmediate(()=>{t.end(e)})}),g}}return Te=m,Te}var Se,pt;function ci(){if(pt)return Se;pt=1;const _=C,w=C,y=C;function u(o,n,s,c){let i=y.parse(o),a,m,p;a={host:i.hostname,port:Number(i.port)?Number(i.port):i.protocol==="https:"?443:80},i.protocol==="https:"?(a.rejectUnauthorized=!1,m=w.connect.bind(w)):m=_.connect.bind(_);let h=!1,f=t=>{if(!h){h=!0;try{p.destroy()}catch{}c(t)}},g=()=>{let t=new Error("Proxy socket timed out");t.code="ETIMEDOUT",f(t)};p=m(a,()=>{if(h)return;let t={Host:s+":"+n,Connection:"close"};i.auth&&(t["Proxy-Authorization"]="Basic "+Buffer.from(i.auth).toString("base64")),p.write("CONNECT "+s+":"+n+` HTTP/1.1\r
`+Object.keys(t).map(l=>l+": "+t[l]).join(`\r
`)+`\r
\r
`);let e="",r=l=>{let d,x;if(!h&&(e+=l.toString("binary"),d=e.match(/\r\n\r\n/))){if(p.removeListener("data",r),x=e.substr(d.index+d[0].length),e=e.substr(0,d.index),x&&p.unshift(Buffer.from(x,"binary")),h=!0,d=e.match(/^HTTP\/\d+\.\d+ (\d+)/i),!d||(d[1]||"").charAt(0)!=="2"){try{p.destroy()}catch{}return c(new Error("Invalid response from proxy"+(d&&": "+d[1]||"")))}return p.removeListener("error",f),p.removeListener("timeout",g),p.setTimeout(0),c(null,p)}};p.on("data",r)}),p.setTimeout(u.timeout||30*1e3),p.on("timeout",g),p.once("error",f)}return Se=u,Se}var Ce,lt;function di(){if(lt)return Ce;lt=1;const _=O(),w=At(),y=se();class u{constructor(n,s){this.mailer=n,this.data={},this.message=null,s=s||{};let c=n.options||{},i=n._defaults||{};Object.keys(s).forEach(a=>{this.data[a]=s[a]}),this.data.headers=this.data.headers||{},Object.keys(i).forEach(a=>{a in this.data?a==="headers"&&Object.keys(i.headers).forEach(m=>{m in this.data.headers||(this.data.headers[m]=i.headers[m])}):this.data[a]=i[a]}),["disableFileAccess","disableUrlAccess","normalizeHeaderKey"].forEach(a=>{a in c&&(this.data[a]=c[a])})}resolveContent(...n){return _.resolveContent(...n)}resolveAll(n){let s=[[this.data,"html"],[this.data,"text"],[this.data,"watchHtml"],[this.data,"amp"],[this.data,"icalEvent"]];this.data.alternatives&&this.data.alternatives.length&&this.data.alternatives.forEach((h,f)=>{s.push([this.data.alternatives,f])}),this.data.attachments&&this.data.attachments.length&&this.data.attachments.forEach((h,f)=>{h.filename||(h.filename=(h.path||h.href||"").split("/").pop().split("?").shift()||"attachment-"+(f+1),h.filename.indexOf(".")<0&&(h.filename+="."+y.detectExtension(h.contentType))),h.contentType||(h.contentType=y.detectMimeType(h.filename||h.path||h.href||"bin")),s.push([this.data.attachments,f])});let c=new w;["from","to","cc","bcc","sender","replyTo"].forEach(h=>{let f;this.message?f=[].concat(c._parseAddresses(this.message.getHeader(h==="replyTo"?"reply-to":h))||[]):this.data[h]&&(f=[].concat(c._parseAddresses(this.data[h])||[])),f&&f.length?this.data[h]=f:h in this.data&&(this.data[h]=null)}),["from","sender"].forEach(h=>{this.data[h]&&(this.data[h]=this.data[h].shift())});let m=0,p=()=>{if(m>=s.length)return n(null,this.data);let h=s[m++];if(!h[0]||!h[0][h[1]])return p();_.resolveContent(...h,(f,g)=>{if(f)return n(f);let t={content:g};h[0][h[1]]&&typeof h[0][h[1]]=="object"&&!Buffer.isBuffer(h[0][h[1]])&&Object.keys(h[0][h[1]]).forEach(e=>{!(e in t)&&!["content","path","href","raw"].includes(e)&&(t[e]=h[0][h[1]][e])}),h[0][h[1]]=t,p()})};setImmediate(()=>p())}normalize(n){let s=this.data.envelope||this.message.getEnvelope(),c=this.message.messageId();this.resolveAll((i,a)=>i?n(i):(a.envelope=s,a.messageId=c,["html","text","watchHtml","amp"].forEach(m=>{a[m]&&a[m].content&&(typeof a[m].content=="string"?a[m]=a[m].content:Buffer.isBuffer(a[m].content)&&(a[m]=a[m].content.toString()))}),a.icalEvent&&Buffer.isBuffer(a.icalEvent.content)&&(a.icalEvent.content=a.icalEvent.content.toString("base64"),a.icalEvent.encoding="base64"),a.alternatives&&a.alternatives.length&&a.alternatives.forEach(m=>{m&&m.content&&Buffer.isBuffer(m.content)&&(m.content=m.content.toString("base64"),m.encoding="base64")}),a.attachments&&a.attachments.length&&a.attachments.forEach(m=>{m&&m.content&&Buffer.isBuffer(m.content)&&(m.content=m.content.toString("base64"),m.encoding="base64")}),a.normalizedHeaders={},Object.keys(a.headers||{}).forEach(m=>{let p=[].concat(a.headers[m]||[]).shift();p=p&&p.value||p,p&&(["references","in-reply-to","message-id","content-id"].includes(m)&&(p=this.message._encodeHeaderValue(m,p)),a.normalizedHeaders[m]=p)}),a.list&&typeof a.list=="object"&&this._getListHeaders(a.list).forEach(p=>{a.normalizedHeaders[p.key]=p.value.map(h=>h&&h.value||h).join(", ")}),a.references&&(a.normalizedHeaders.references=this.message._encodeHeaderValue("references",a.references)),a.inReplyTo&&(a.normalizedHeaders["in-reply-to"]=this.message._encodeHeaderValue("in-reply-to",a.inReplyTo)),n(null,a)))}setMailerHeader(){!this.message||!this.data.xMailer||this.message.setHeader("X-Mailer",this.data.xMailer)}setPriorityHeaders(){if(!(!this.message||!this.data.priority))switch((this.data.priority||"").toString().toLowerCase()){case"high":this.message.setHeader("X-Priority","1 (Highest)"),this.message.setHeader("X-MSMail-Priority","High"),this.message.setHeader("Importance","High");break;case"low":this.message.setHeader("X-Priority","5 (Lowest)"),this.message.setHeader("X-MSMail-Priority","Low"),this.message.setHeader("Importance","Low");break}}setListHeaders(){!this.message||!this.data.list||typeof this.data.list!="object"||this.data.list&&typeof this.data.list=="object"&&this._getListHeaders(this.data.list).forEach(n=>{n.value.forEach(s=>{this.message.addHeader(n.key,s)})})}_getListHeaders(n){return Object.keys(n).map(s=>({key:"list-"+s.toLowerCase().trim(),value:[].concat(n[s]||[]).map(c=>({prepared:!0,foldLines:!0,value:[].concat(c||[]).map(i=>{if(typeof i=="string"&&(i={url:i}),i&&i.url){if(s.toLowerCase().trim()==="id"){let m=i.comment||"";return y.isPlainText(m)?m='"'+m+'"':m=y.encodeWord(m),(i.comment?m+" ":"")+this._formatListUrl(i.url).replace(/^<[^:]+\/{,2}/,"")}let a=i.comment||"";return y.isPlainText(a)||(a=y.encodeWord(a)),this._formatListUrl(i.url)+(i.comment?" ("+a+")":"")}return""}).filter(i=>i).join(", ")}))}))}_formatListUrl(n){return n=n.replace(/[\s<]+|[\s>]+/g,""),/^(https?|mailto|ftp):/.test(n)?"<"+n+">":/^[^@]+@[^@]+$/.test(n)?"<mailto:"+n+">":"<http://"+n+">"}}return Ce=u,Ce}var Ae,ct;function mi(){if(ct)return Ae;ct=1;const _=C,w=O(),y=Et(),u=ni(),o=li(),n=ci(),s=C,c=C,i=U,a=di(),m=C,p=C,h=C;class f extends _{constructor(t,e,r){super(),this.options=e||{},this._defaults=r||{},this._defaultPlugins={compile:[(...l)=>this._convertDataImages(...l)],stream:[]},this._userPlugins={compile:[],stream:[]},this.meta=new Map,this.dkim=this.options.dkim?new o(this.options.dkim):!1,this.transporter=t,this.transporter.mailer=this,this.logger=w.getLogger(this.options,{component:this.options.component||"mail"}),this.logger.debug({tnx:"create"},"Creating transport: %s",this.getVersionString()),typeof this.transporter.on=="function"&&(this.transporter.on("log",l=>{this.logger.debug({tnx:"transport"},"%s: %s",l.type,l.message)}),this.transporter.on("error",l=>{this.logger.error({err:l,tnx:"transport"},"Transport Error: %s",l.message),this.emit("error",l)}),this.transporter.on("idle",(...l)=>{this.emit("idle",...l)})),["close","isIdle","verify"].forEach(l=>{this[l]=(...d)=>typeof this.transporter[l]=="function"?(l==="verify"&&typeof this.getSocket=="function"&&(this.transporter.getSocket=this.getSocket,this.getSocket=!1),this.transporter[l](...d)):(this.logger.warn({tnx:"transport",methodName:l},"Non existing method %s called for transport",l),!1)}),this.options.proxy&&typeof this.options.proxy=="string"&&this.setupProxy(this.options.proxy)}use(t,e){return t=(t||"").toString(),this._userPlugins.hasOwnProperty(t)?this._userPlugins[t].push(e):this._userPlugins[t]=[e],this}sendMail(t,e=null){let r;e||(r=new Promise((d,x)=>{e=w.callbackPromise(d,x)})),typeof this.getSocket=="function"&&(this.transporter.getSocket=this.getSocket,this.getSocket=!1);let l=new a(this,t);return this.logger.debug({tnx:"transport",name:this.transporter.name,version:this.transporter.version,action:"send"},"Sending mail using %s/%s",this.transporter.name,this.transporter.version),this._processPlugins("compile",l,d=>{if(d)return this.logger.error({err:d,tnx:"plugin",action:"compile"},"PluginCompile Error: %s",d.message),e(d);l.message=new u(l.data).compile(),l.setMailerHeader(),l.setPriorityHeaders(),l.setListHeaders(),this._processPlugins("stream",l,x=>{if(x)return this.logger.error({err:x,tnx:"plugin",action:"stream"},"PluginStream Error: %s",x.message),e(x);(l.data.dkim||this.dkim)&&l.message.processFunc(b=>{let v=l.data.dkim?new o(l.data.dkim):this.dkim;return this.logger.debug({tnx:"DKIM",messageId:l.message.messageId(),dkimDomains:v.keys.map(E=>E.keySelector+"."+E.domainName).join(", ")},"Signing outgoing message with %s keys",v.keys.length),v.sign(b,l.data._dkim)}),this.transporter.send(l,(...b)=>{b[0]&&this.logger.error({err:b[0],tnx:"transport",action:"send"},"Send Error: %s",b[0].message),e(...b)})})}),r}getVersionString(){return s.format("%s (%s; +%s; %s/%s)",i.name,i.version,i.homepage,this.transporter.name,this.transporter.version)}_processPlugins(t,e,r){if(t=(t||"").toString(),!this._userPlugins.hasOwnProperty(t))return r();let l=this._userPlugins[t]||[],d=this._defaultPlugins[t]||[];if(l.length&&this.logger.debug({tnx:"transaction",pluginCount:l.length,step:t},"Using %s plugins for %s",l.length,t),l.length+d.length===0)return r();let x=0,b="default",v=()=>{let E=b==="default"?d:l;if(x>=E.length)if(b==="default"&&l.length)b="user",x=0,E=l;else return r();let k=E[x++];k(e,S=>{if(S)return r(S);v()})};v()}setupProxy(t){let e=c.parse(t);this.getSocket=(r,l)=>{let d=e.protocol.replace(/:$/,"").toLowerCase();if(this.meta.has("proxy_handler_"+d))return this.meta.get("proxy_handler_"+d)(e,r,l);switch(d){case"http":case"https":n(e.href,r.port,r.host,(x,b)=>x?l(x):l(null,{connection:b}));return;case"socks":case"socks5":case"socks4":case"socks4a":{if(!this.meta.has("proxy_socks_module"))return l(new Error("Socks module not loaded"));let x=b=>{let v=!!this.meta.get("proxy_socks_module").SocksClient,E=v?this.meta.get("proxy_socks_module").SocksClient:this.meta.get("proxy_socks_module"),k=Number(e.protocol.replace(/\D/g,""))||5,S={proxy:{ipaddress:b,port:Number(e.port),type:k},[v?"destination":"target"]:{host:r.host,port:r.port},command:"connect"};if(e.auth){let A=decodeURIComponent(e.auth.split(":").shift()),I=decodeURIComponent(e.auth.split(":").pop());v?(S.proxy.userId=A,S.proxy.password=I):k===4?S.userid=A:S.authentication={username:A,password:I}}E.createConnection(S,(A,I)=>A?l(A):l(null,{connection:I.socket||I}))};return m.isIP(e.hostname)?x(e.hostname):p.resolve(e.hostname,(b,v)=>{if(b)return l(b);x(Array.isArray(v)?v[0]:v)})}}l(new Error("Unknown proxy configuration"))}}_convertDataImages(t,e){if(!this.options.attachDataUrls&&!t.data.attachDataUrls||!t.data.html)return e();t.resolveContent(t.data,"html",(r,l)=>{if(r)return e(r);let d=0;l=(l||"").toString().replace(/(<img\b[^<>]{0,1024} src\s{0,20}=[\s"']{0,20})(data:([^;]+);[^"'>\s]+)/gi,(x,b,v,E)=>{let k=h.randomBytes(10).toString("hex")+"@localhost";return t.data.attachments||(t.data.attachments=[]),Array.isArray(t.data.attachments)||(t.data.attachments=[].concat(t.data.attachments||[])),t.data.attachments.push({path:v,cid:k,filename:"image-"+ ++d+"."+y.detectExtension(E)}),b+"cid:"+k}),t.data.html=l,e()})}set(t,e){return this.meta.set(t,e)}get(t){return this.meta.get(t)}}return Ae=f,Ae}var je,dt;function hi(){if(dt)return je;dt=1;const w=C.Transform;class y extends w{constructor(o){super(o),this.options=o||{},this._curLine="",this.inByteCount=0,this.outByteCount=0,this.lastByte=!1}_transform(o,n,s){let c=[],i=0,a,m,p=0,h;if(!o||!o.length)return s();for(typeof o=="string"&&(o=Buffer.from(o)),this.inByteCount+=o.length,a=0,m=o.length;a<m;a++)o[a]===46?(a&&o[a-1]===10||!a&&(!this.lastByte||this.lastByte===10))&&(h=o.slice(p,a+1),c.push(h),c.push(Buffer.from(".")),i+=h.length+1,p=a+1):o[a]===10&&(a&&o[a-1]!==13||!a&&this.lastByte!==13)&&(a>p?(h=o.slice(p,a),c.push(h),i+=h.length+2):i+=2,c.push(Buffer.from(`\r
`)),p=a+1);i?(p<o.length&&(h=o.slice(p),c.push(h),i+=h.length),this.outByteCount+=i,this.push(Buffer.concat(c,i))):(this.outByteCount+=o.length,this.push(o)),this.lastByte=o[o.length-1],s()}_flush(o){let n;this.lastByte===10?n=Buffer.from(`.\r
`):this.lastByte===13?n=Buffer.from(`
.\r
`):n=Buffer.from(`\r
.\r
`),this.outByteCount+=n.length,this.push(n),o()}}return je=y,je}var Ie,mt;function Be(){if(mt)return Ie;mt=1;const _=U,w=C.EventEmitter,y=C,u=C,o=C,n=C,s=hi(),c=C.PassThrough,i=O(),a=2*60*1e3,m=10*60*1e3,p=30*1e3,h=30*1e3;class f extends w{constructor(t){super(t),this.id=n.randomBytes(8).toString("base64").replace(/\W/g,""),this.stage="init",this.options=t||{},this.secureConnection=!!this.options.secure,this.alreadySecured=!!this.options.secured,this.port=Number(this.options.port)||(this.secureConnection?465:587),this.host=this.options.host||"localhost",this.servername=this.options.servername?this.options.servername:y.isIP(this.host)?!1:this.host,this.allowInternalNetworkInterfaces=this.options.allowInternalNetworkInterfaces||!1,typeof this.options.secure>"u"&&this.port===465&&(this.secureConnection=!0),this.name=this.options.name||this._getHostname(),this.logger=i.getLogger(this.options,{component:this.options.component||"smtp-connection",sid:this.id}),this.customAuth=new Map,Object.keys(this.options.customAuth||{}).forEach(e=>{let r=(e||"").toString().trim().toUpperCase();r&&this.customAuth.set(r,this.options.customAuth[e])}),this.version=_.version,this.authenticated=!1,this.destroyed=!1,this.secure=!!this.secureConnection,this._remainder="",this._responseQueue=[],this.lastServerResponse=!1,this._socket=!1,this._supportedAuth=[],this.allowsAuth=!1,this._envelope=!1,this._supportedExtensions=[],this._maxAllowedSize=0,this._responseActions=[],this._recipientQueue=[],this._greetingTimeout=!1,this._connectionTimeout=!1,this._destroyed=!1,this._closing=!1,this._onSocketData=e=>this._onData(e),this._onSocketError=e=>this._onError(e,"ESOCKET",!1,"CONN"),this._onSocketClose=()=>this._onClose(),this._onSocketEnd=()=>this._onEnd(),this._onSocketTimeout=()=>this._onTimeout()}connect(t){if(typeof t=="function"){this.once("connect",()=>{this.logger.debug({tnx:"smtp"},"SMTP handshake finished"),t()});const l=this._isDestroyedMessage("connect");if(l)return t(this._formatError(l,"ECONNECTION",!1,"CONN"))}let e={port:this.port,host:this.host,allowInternalNetworkInterfaces:this.allowInternalNetworkInterfaces,timeout:this.options.dnsTimeout||h};this.options.localAddress&&(e.localAddress=this.options.localAddress);let r=()=>{this._connectionTimeout=setTimeout(()=>{this._onError("Connection timeout","ETIMEDOUT",!1,"CONN")},this.options.connectionTimeout||a),this._socket.on("error",this._onSocketError)};if(this.options.connection){this._socket=this.options.connection,r(),this.secureConnection&&!this.alreadySecured?setImmediate(()=>this._upgradeConnection(l=>{if(l){this._onError(new Error("Error initiating TLS - "+(l.message||l)),"ETLS",!1,"CONN");return}this._onConnect()})):setImmediate(()=>this._onConnect());return}else return this.options.socket?(this._socket=this.options.socket,i.resolveHostname(e,(l,d)=>{if(l)return setImmediate(()=>this._onError(l,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:e.host,resolved:d.host,cached:!!d.cached},"Resolved %s as %s [cache %s]",e.host,d.host,d.cached?"hit":"miss"),Object.keys(d).forEach(x=>{x.charAt(0)!=="_"&&d[x]&&(e[x]=d[x])});try{this._socket.connect(this.port,this.host,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),r()}catch(x){return setImmediate(()=>this._onError(x,"ECONNECTION",!1,"CONN"))}})):this.secureConnection?(this.options.tls&&Object.keys(this.options.tls).forEach(l=>{e[l]=this.options.tls[l]}),this.servername&&!e.servername&&(e.servername=this.servername),i.resolveHostname(e,(l,d)=>{if(l)return setImmediate(()=>this._onError(l,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:e.host,resolved:d.host,cached:!!d.cached},"Resolved %s as %s [cache %s]",e.host,d.host,d.cached?"hit":"miss"),Object.keys(d).forEach(x=>{x.charAt(0)!=="_"&&d[x]&&(e[x]=d[x])});try{this._socket=u.connect(e,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),r()}catch(x){return setImmediate(()=>this._onError(x,"ECONNECTION",!1,"CONN"))}})):i.resolveHostname(e,(l,d)=>{if(l)return setImmediate(()=>this._onError(l,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:e.host,resolved:d.host,cached:!!d.cached},"Resolved %s as %s [cache %s]",e.host,d.host,d.cached?"hit":"miss"),Object.keys(d).forEach(x=>{x.charAt(0)!=="_"&&d[x]&&(e[x]=d[x])});try{this._socket=y.connect(e,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),r()}catch(x){return setImmediate(()=>this._onError(x,"ECONNECTION",!1,"CONN"))}})}quit(){this._sendCommand("QUIT"),this._responseActions.push(this.close)}close(){if(clearTimeout(this._connectionTimeout),clearTimeout(this._greetingTimeout),this._responseActions=[],this._closing)return;this._closing=!0;let t="end";this.stage==="init"&&(t="destroy"),this.logger.debug({tnx:"smtp"},'Closing connection to the server using "%s"',t);let e=this._socket&&this._socket.socket||this._socket;if(e&&!e.destroyed)try{this._socket[t]()}catch{}this._destroy()}login(t,e){const r=this._isDestroyedMessage("login");if(r)return e(this._formatError(r,"ECONNECTION",!1,"API"));if(this._auth=t||{},this._authMethod=(this._auth.method||"").toString().trim().toUpperCase()||!1,!this._authMethod&&this._auth.oauth2&&!this._auth.credentials?this._authMethod="XOAUTH2":(!this._authMethod||this._authMethod==="XOAUTH2"&&!this._auth.oauth2)&&(this._authMethod=(this._supportedAuth[0]||"PLAIN").toUpperCase().trim()),this._authMethod!=="XOAUTH2"&&(!this._auth.credentials||!this._auth.credentials.user||!this._auth.credentials.pass))if(this._auth.user&&this._auth.pass||this.customAuth.has(this._authMethod))this._auth.credentials={user:this._auth.user,pass:this._auth.pass,options:this._auth.options};else return e(this._formatError('Missing credentials for "'+this._authMethod+'"',"EAUTH",!1,"API"));if(this.customAuth.has(this._authMethod)){let l=this.customAuth.get(this._authMethod),d,x=!1,b=()=>{x||(x=!0,this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,e(null,!0))},v=k=>{x||(x=!0,e(this._formatError(k,"EAUTH",d,"AUTH "+this._authMethod)))},E=l({auth:this._auth,method:this._authMethod,extensions:[].concat(this._supportedExtensions),authMethods:[].concat(this._supportedAuth),maxAllowedSize:this._maxAllowedSize||!1,sendCommand:(k,S)=>{let A;return S||(A=new Promise((I,q)=>{S=i.callbackPromise(I,q)})),this._responseActions.push(I=>{d=I;let q=I.match(/^(\d+)(?:\s(\d+\.\d+\.\d+))?\s/),T={command:k,response:I};q?(T.status=Number(q[1])||0,q[2]&&(T.code=q[2]),T.text=I.substr(q[0].length)):(T.text=I,T.status=0),S(null,T)}),setImmediate(()=>this._sendCommand(k)),A},resolve:b,reject:v});E&&typeof E.catch=="function"&&E.then(b).catch(v);return}switch(this._authMethod){case"XOAUTH2":this._handleXOauth2Token(!1,e);return;case"LOGIN":this._responseActions.push(l=>{this._actionAUTH_LOGIN_USER(l,e)}),this._sendCommand("AUTH LOGIN");return;case"PLAIN":this._responseActions.push(l=>{this._actionAUTHComplete(l,e)}),this._sendCommand("AUTH PLAIN "+Buffer.from("\0"+this._auth.credentials.user+"\0"+this._auth.credentials.pass,"utf-8").toString("base64"),"AUTH PLAIN "+Buffer.from("\0"+this._auth.credentials.user+"\0/* secret */","utf-8").toString("base64"));return;case"CRAM-MD5":this._responseActions.push(l=>{this._actionAUTH_CRAM_MD5(l,e)}),this._sendCommand("AUTH CRAM-MD5");return}return e(this._formatError('Unknown authentication method "'+this._authMethod+'"',"EAUTH",!1,"API"))}send(t,e,r){if(!e)return r(this._formatError("Empty message","EMESSAGE",!1,"API"));const l=this._isDestroyedMessage("send message");if(l)return r(this._formatError(l,"ECONNECTION",!1,"API"));if(this._maxAllowedSize&&t.size>this._maxAllowedSize)return setImmediate(()=>{r(this._formatError("Message size larger than allowed "+this._maxAllowedSize,"EMESSAGE",!1,"MAIL FROM"))});let d=!1,x=function(){d||(d=!0,r(...arguments))};typeof e.on=="function"&&e.on("error",v=>x(this._formatError(v,"ESTREAM",!1,"API")));let b=Date.now();this._setEnvelope(t,(v,E)=>{if(v){let A=new c;return typeof e.pipe=="function"?e.pipe(A):(A.write(e),A.end()),x(v)}let k=Date.now(),S=this._createSendStream((A,I)=>A?x(A):(E.envelopeTime=k-b,E.messageTime=Date.now()-k,E.messageSize=S.outByteCount,E.response=I,x(null,E)));typeof e.pipe=="function"?e.pipe(S):(S.write(e),S.end())})}reset(t){this._sendCommand("RSET"),this._responseActions.push(e=>e.charAt(0)!=="2"?t(this._formatError("Could not reset session state. response="+e,"EPROTOCOL",e,"RSET")):(this._envelope=!1,t(null,!0)))}_onConnect(){if(clearTimeout(this._connectionTimeout),this.logger.info({tnx:"network",localAddress:this._socket.localAddress,localPort:this._socket.localPort,remoteAddress:this._socket.remoteAddress,remotePort:this._socket.remotePort},"%s established to %s:%s",this.secure?"Secure connection":"Connection",this._socket.remoteAddress,this._socket.remotePort),this._destroyed){this.close();return}this.stage="connected",this._socket.removeListener("data",this._onSocketData),this._socket.removeListener("timeout",this._onSocketTimeout),this._socket.removeListener("close",this._onSocketClose),this._socket.removeListener("end",this._onSocketEnd),this._socket.on("data",this._onSocketData),this._socket.once("close",this._onSocketClose),this._socket.once("end",this._onSocketEnd),this._socket.setTimeout(this.options.socketTimeout||m),this._socket.on("timeout",this._onSocketTimeout),this._greetingTimeout=setTimeout(()=>{this._socket&&!this._destroyed&&this._responseActions[0]===this._actionGreeting&&this._onError("Greeting never received","ETIMEDOUT",!1,"CONN")},this.options.greetingTimeout||p),this._responseActions.push(this._actionGreeting),this._socket.resume()}_onData(t){if(this._destroyed||!t||!t.length)return;let e=(t||"").toString("binary"),r=(this._remainder+e).split(/\r?\n/),l;this._remainder=r.pop();for(let d=0,x=r.length;d<x;d++){if(this._responseQueue.length&&(l=this._responseQueue[this._responseQueue.length-1],/^\d+-/.test(l.split(`
`).pop()))){this._responseQueue[this._responseQueue.length-1]+=`
`+r[d];continue}this._responseQueue.push(r[d])}this._responseQueue.length&&(l=this._responseQueue[this._responseQueue.length-1],/^\d+-/.test(l.split(`
`).pop()))||this._processResponse()}_onError(t,e,r,l){clearTimeout(this._connectionTimeout),clearTimeout(this._greetingTimeout),!this._destroyed&&(t=this._formatError(t,e,r,l),this.logger.error(r,t.message),this.emit("error",t),this.close())}_formatError(t,e,r,l){let d;/Error\]$/i.test(Object.prototype.toString.call(t))?d=t:d=new Error(t),e&&e!=="Error"&&(d.code=e),r&&(d.response=r,d.message+=": "+r);let x=typeof r=="string"&&Number((r.match(/^\d+/)||[])[0])||!1;return x&&(d.responseCode=x),l&&(d.command=l),d}_onClose(){let t=!1;if(this._remainder&&this._remainder.trim()&&((this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"server"},this._remainder.replace(/\r?\n$/,"")),this.lastServerResponse=t=this._remainder.trim()),this.logger.info({tnx:"network"},"Connection closed"),this.upgrading&&!this._destroyed)return this._onError(new Error("Connection closed unexpectedly"),"ETLS",t,"CONN");if(![this._actionGreeting,this.close].includes(this._responseActions[0])&&!this._destroyed)return this._onError(new Error("Connection closed unexpectedly"),"ECONNECTION",t,"CONN");if(/^[45]\d{2}\b/.test(t))return this._onError(new Error("Connection closed unexpectedly"),"ECONNECTION",t,"CONN");this._destroy()}_onEnd(){this._socket&&!this._socket.destroyed&&this._socket.destroy()}_onTimeout(){return this._onError(new Error("Timeout"),"ETIMEDOUT",!1,"CONN")}_destroy(){this._destroyed||(this._destroyed=!0,this.emit("end"))}_upgradeConnection(t){this._socket.removeListener("data",this._onSocketData),this._socket.removeListener("timeout",this._onSocketTimeout);let e=this._socket,r={socket:this._socket,host:this.host};Object.keys(this.options.tls||{}).forEach(l=>{r[l]=this.options.tls[l]}),this.servername&&!r.servername&&(r.servername=this.servername),this.upgrading=!0;try{this._socket=u.connect(r,()=>(this.secure=!0,this.upgrading=!1,this._socket.on("data",this._onSocketData),e.removeListener("close",this._onSocketClose),e.removeListener("end",this._onSocketEnd),t(null,!0)))}catch(l){return t(l)}this._socket.on("error",this._onSocketError),this._socket.once("close",this._onSocketClose),this._socket.once("end",this._onSocketEnd),this._socket.setTimeout(this.options.socketTimeout||m),this._socket.on("timeout",this._onSocketTimeout),e.resume()}_processResponse(){if(!this._responseQueue.length)return!1;let t=this.lastServerResponse=(this._responseQueue.shift()||"").toString();if(/^\d+-/.test(t.split(`
`).pop()))return;(this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"server"},t.replace(/\r?\n$/,"")),t.trim()||setImmediate(()=>this._processResponse());let e=this._responseActions.shift();if(typeof e=="function")e.call(this,t),setImmediate(()=>this._processResponse());else return this._onError(new Error("Unexpected Response"),"EPROTOCOL",t,"CONN")}_sendCommand(t,e){if(!this._destroyed){if(this._socket.destroyed)return this.close();(this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"client"},(e||t||"").toString().replace(/\r?\n$/,"")),this._socket.write(Buffer.from(t+`\r
`,"utf-8"))}}_setEnvelope(t,e){let r=[],l=!1;if(this._envelope=t||{},this._envelope.from=(this._envelope.from&&this._envelope.from.address||this._envelope.from||"").toString().trim(),this._envelope.to=[].concat(this._envelope.to||[]).map(d=>(d&&d.address||d||"").toString().trim()),!this._envelope.to.length)return e(this._formatError("No recipients defined","EENVELOPE",!1,"API"));if(this._envelope.from&&/[\r\n<>]/.test(this._envelope.from))return e(this._formatError("Invalid sender "+JSON.stringify(this._envelope.from),"EENVELOPE",!1,"API"));/[\x80-\uFFFF]/.test(this._envelope.from)&&(l=!0);for(let d=0,x=this._envelope.to.length;d<x;d++){if(!this._envelope.to[d]||/[\r\n<>]/.test(this._envelope.to[d]))return e(this._formatError("Invalid recipient "+JSON.stringify(this._envelope.to[d]),"EENVELOPE",!1,"API"));/[\x80-\uFFFF]/.test(this._envelope.to[d])&&(l=!0)}if(this._envelope.rcptQueue=JSON.parse(JSON.stringify(this._envelope.to||[])),this._envelope.rejected=[],this._envelope.rejectedErrors=[],this._envelope.accepted=[],this._envelope.dsn)try{this._envelope.dsn=this._setDsnEnvelope(this._envelope.dsn)}catch(d){return e(this._formatError("Invalid DSN "+d.message,"EENVELOPE",!1,"API"))}this._responseActions.push(d=>{this._actionMAIL(d,e)}),l&&this._supportedExtensions.includes("SMTPUTF8")&&(r.push("SMTPUTF8"),this._usingSmtpUtf8=!0),this._envelope.use8BitMime&&this._supportedExtensions.includes("8BITMIME")&&(r.push("BODY=8BITMIME"),this._using8BitMime=!0),this._envelope.size&&this._supportedExtensions.includes("SIZE")&&r.push("SIZE="+this._envelope.size),this._envelope.dsn&&this._supportedExtensions.includes("DSN")&&(this._envelope.dsn.ret&&r.push("RET="+i.encodeXText(this._envelope.dsn.ret)),this._envelope.dsn.envid&&r.push("ENVID="+i.encodeXText(this._envelope.dsn.envid))),this._sendCommand("MAIL FROM:<"+this._envelope.from+">"+(r.length?" "+r.join(" "):""))}_setDsnEnvelope(t){let e=(t.ret||t.return||"").toString().toUpperCase()||null;if(e)switch(e){case"HDRS":case"HEADERS":e="HDRS";break;case"FULL":case"BODY":e="FULL";break}if(e&&!["FULL","HDRS"].includes(e))throw new Error("ret: "+JSON.stringify(e));let r=(t.envid||t.id||"").toString()||null,l=t.notify||null;if(l){typeof l=="string"&&(l=l.split(",")),l=l.map(v=>v.trim().toUpperCase());let x=["NEVER","SUCCESS","FAILURE","DELAY"];if(l.filter(v=>!x.includes(v)).length||l.length>1&&l.includes("NEVER"))throw new Error("notify: "+JSON.stringify(l.join(",")));l=l.join(",")}let d=(t.recipient||t.orcpt||"").toString()||null;return d&&d.indexOf(";")<0&&(d="rfc822;"+d),{ret:e,envid:r,notify:l,orcpt:d}}_getDsnRcptToArgs(){let t=[];return this._envelope.dsn&&this._supportedExtensions.includes("DSN")&&(this._envelope.dsn.notify&&t.push("NOTIFY="+i.encodeXText(this._envelope.dsn.notify)),this._envelope.dsn.orcpt&&t.push("ORCPT="+i.encodeXText(this._envelope.dsn.orcpt))),t.length?" "+t.join(" "):""}_createSendStream(t){let e=new s,r;return this.options.lmtp?this._envelope.accepted.forEach((l,d)=>{let x=d===this._envelope.accepted.length-1;this._responseActions.push(b=>{this._actionLMTPStream(l,x,b,t)})}):this._responseActions.push(l=>{this._actionSMTPStream(l,t)}),e.pipe(this._socket,{end:!1}),this.options.debug&&(r=new c,r.on("readable",()=>{let l;for(;l=r.read();)this.logger.debug({tnx:"message"},l.toString("binary").replace(/\r?\n$/,""))}),e.pipe(r)),e.once("end",()=>{this.logger.info({tnx:"message",inByteCount:e.inByteCount,outByteCount:e.outByteCount},"<%s bytes encoded mime message (source size %s bytes)>",e.outByteCount,e.inByteCount)}),e}_actionGreeting(t){if(clearTimeout(this._greetingTimeout),t.substr(0,3)!=="220"){this._onError(new Error("Invalid greeting. response="+t),"EPROTOCOL",t,"CONN");return}this.options.lmtp?(this._responseActions.push(this._actionLHLO),this._sendCommand("LHLO "+this.name)):(this._responseActions.push(this._actionEHLO),this._sendCommand("EHLO "+this.name))}_actionLHLO(t){if(t.charAt(0)!=="2"){this._onError(new Error("Invalid LHLO. response="+t),"EPROTOCOL",t,"LHLO");return}this._actionEHLO(t)}_actionEHLO(t){let e;if(t.substr(0,3)==="421"){this._onError(new Error("Server terminates connection. response="+t),"ECONNECTION",t,"EHLO");return}if(t.charAt(0)!=="2"){if(this.options.requireTLS){this._onError(new Error("EHLO failed but HELO does not support required STARTTLS. response="+t),"ECONNECTION",t,"EHLO");return}this._responseActions.push(this._actionHELO),this._sendCommand("HELO "+this.name);return}if(this._ehloLines=t.split(/\r?\n/).map(r=>r.replace(/^\d+[ -]/,"").trim()).filter(r=>r).slice(1),!this.secure&&!this.options.ignoreTLS&&(/[ -]STARTTLS\b/im.test(t)||this.options.requireTLS)){this._sendCommand("STARTTLS"),this._responseActions.push(this._actionSTARTTLS);return}/[ -]SMTPUTF8\b/im.test(t)&&this._supportedExtensions.push("SMTPUTF8"),/[ -]DSN\b/im.test(t)&&this._supportedExtensions.push("DSN"),/[ -]8BITMIME\b/im.test(t)&&this._supportedExtensions.push("8BITMIME"),/[ -]PIPELINING\b/im.test(t)&&this._supportedExtensions.push("PIPELINING"),/[ -]AUTH\b/i.test(t)&&(this.allowsAuth=!0),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)PLAIN/i.test(t)&&this._supportedAuth.push("PLAIN"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)LOGIN/i.test(t)&&this._supportedAuth.push("LOGIN"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)CRAM-MD5/i.test(t)&&this._supportedAuth.push("CRAM-MD5"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)XOAUTH2/i.test(t)&&this._supportedAuth.push("XOAUTH2"),(e=t.match(/[ -]SIZE(?:[ \t]+(\d+))?/im))&&(this._supportedExtensions.push("SIZE"),this._maxAllowedSize=Number(e[1])||0),this.emit("connect")}_actionHELO(t){if(t.charAt(0)!=="2"){this._onError(new Error("Invalid HELO. response="+t),"EPROTOCOL",t,"HELO");return}this.allowsAuth=!0,this.emit("connect")}_actionSTARTTLS(t){if(t.charAt(0)!=="2"){if(this.options.opportunisticTLS)return this.logger.info({tnx:"smtp"},"Failed STARTTLS upgrade, continuing unencrypted"),this.emit("connect");this._onError(new Error("Error upgrading connection with STARTTLS"),"ETLS",t,"STARTTLS");return}this._upgradeConnection((e,r)=>{if(e){this._onError(new Error("Error initiating TLS - "+(e.message||e)),"ETLS",!1,"STARTTLS");return}this.logger.info({tnx:"smtp"},"Connection upgraded with STARTTLS"),r?this.options.lmtp?(this._responseActions.push(this._actionLHLO),this._sendCommand("LHLO "+this.name)):(this._responseActions.push(this._actionEHLO),this._sendCommand("EHLO "+this.name)):this.emit("connect")})}_actionAUTH_LOGIN_USER(t,e){if(!/^334[ -]/.test(t)){e(this._formatError('Invalid login sequence while waiting for "334 VXNlcm5hbWU6"',"EAUTH",t,"AUTH LOGIN"));return}this._responseActions.push(r=>{this._actionAUTH_LOGIN_PASS(r,e)}),this._sendCommand(Buffer.from(this._auth.credentials.user+"","utf-8").toString("base64"))}_actionAUTH_CRAM_MD5(t,e){let r=t.match(/^334\s+(.+)$/),l="";if(r)l=r[1];else return e(this._formatError("Invalid login sequence while waiting for server challenge string","EAUTH",t,"AUTH CRAM-MD5"));let d=Buffer.from(l,"base64").toString("ascii"),x=n.createHmac("md5",this._auth.credentials.pass);x.update(d);let b=this._auth.credentials.user+" "+x.digest("hex");this._responseActions.push(v=>{this._actionAUTH_CRAM_MD5_PASS(v,e)}),this._sendCommand(Buffer.from(b).toString("base64"),Buffer.from(this._auth.credentials.user+" /* secret */").toString("base64"))}_actionAUTH_CRAM_MD5_PASS(t,e){if(!t.match(/^235\s+/))return e(this._formatError('Invalid login sequence while waiting for "235"',"EAUTH",t,"AUTH CRAM-MD5"));this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,e(null,!0)}_actionAUTH_LOGIN_PASS(t,e){if(!/^334[ -]/.test(t))return e(this._formatError('Invalid login sequence while waiting for "334 UGFzc3dvcmQ6"',"EAUTH",t,"AUTH LOGIN"));this._responseActions.push(r=>{this._actionAUTHComplete(r,e)}),this._sendCommand(Buffer.from((this._auth.credentials.pass||"").toString(),"utf-8").toString("base64"),Buffer.from("/* secret */","utf-8").toString("base64"))}_actionAUTHComplete(t,e,r){if(!r&&typeof e=="function"&&(r=e,e=!1),t.substr(0,3)==="334"){this._responseActions.push(l=>{e||this._authMethod!=="XOAUTH2"?this._actionAUTHComplete(l,!0,r):setImmediate(()=>this._handleXOauth2Token(!0,r))}),this._sendCommand("");return}if(t.charAt(0)!=="2")return this.logger.info({tnx:"smtp",username:this._auth.user,action:"authfail",method:this._authMethod},"User %s failed to authenticate",JSON.stringify(this._auth.user)),r(this._formatError("Invalid login","EAUTH",t,"AUTH "+this._authMethod));this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,r(null,!0)}_actionMAIL(t,e){let r,l;if(Number(t.charAt(0))!==2)return this._usingSmtpUtf8&&/^550 /.test(t)&&/[\x80-\uFFFF]/.test(this._envelope.from)?r="Internationalized mailbox name not allowed":r="Mail command failed",e(this._formatError(r,"EENVELOPE",t,"MAIL FROM"));if(this._envelope.rcptQueue.length)if(this._recipientQueue=[],this._supportedExtensions.includes("PIPELINING"))for(;this._envelope.rcptQueue.length;)l=this._envelope.rcptQueue.shift(),this._recipientQueue.push(l),this._responseActions.push(d=>{this._actionRCPT(d,e)}),this._sendCommand("RCPT TO:<"+l+">"+this._getDsnRcptToArgs());else l=this._envelope.rcptQueue.shift(),this._recipientQueue.push(l),this._responseActions.push(d=>{this._actionRCPT(d,e)}),this._sendCommand("RCPT TO:<"+l+">"+this._getDsnRcptToArgs());else return e(this._formatError("Can't send mail - no recipients defined","EENVELOPE",!1,"API"))}_actionRCPT(t,e){let r,l,d=this._recipientQueue.shift();if(Number(t.charAt(0))!==2?(this._usingSmtpUtf8&&/^553 /.test(t)&&/[\x80-\uFFFF]/.test(d)?r="Internationalized mailbox name not allowed":r="Recipient command failed",this._envelope.rejected.push(d),l=this._formatError(r,"EENVELOPE",t,"RCPT TO"),l.recipient=d,this._envelope.rejectedErrors.push(l)):this._envelope.accepted.push(d),!this._envelope.rcptQueue.length&&!this._recipientQueue.length)if(this._envelope.rejected.length<this._envelope.to.length)this._responseActions.push(x=>{this._actionDATA(x,e)}),this._sendCommand("DATA");else return l=this._formatError("Can't send mail - all recipients were rejected","EENVELOPE",t,"RCPT TO"),l.rejected=this._envelope.rejected,l.rejectedErrors=this._envelope.rejectedErrors,e(l);else this._envelope.rcptQueue.length&&(d=this._envelope.rcptQueue.shift(),this._recipientQueue.push(d),this._responseActions.push(x=>{this._actionRCPT(x,e)}),this._sendCommand("RCPT TO:<"+d+">"+this._getDsnRcptToArgs()))}_actionDATA(t,e){if(!/^[23]/.test(t))return e(this._formatError("Data command failed","EENVELOPE",t,"DATA"));let r={accepted:this._envelope.accepted,rejected:this._envelope.rejected};this._ehloLines&&this._ehloLines.length&&(r.ehlo=this._ehloLines),this._envelope.rejectedErrors.length&&(r.rejectedErrors=this._envelope.rejectedErrors),e(null,r)}_actionSMTPStream(t,e){return Number(t.charAt(0))!==2?e(this._formatError("Message failed","EMESSAGE",t,"DATA")):e(null,t)}_actionLMTPStream(t,e,r,l){let d;if(Number(r.charAt(0))!==2){d=this._formatError("Message failed for recipient "+t,"EMESSAGE",r,"DATA"),d.recipient=t,this._envelope.rejected.push(t),this._envelope.rejectedErrors.push(d);for(let x=0,b=this._envelope.accepted.length;x<b;x++)this._envelope.accepted[x]===t&&this._envelope.accepted.splice(x,1)}if(e)return l(null,r)}_handleXOauth2Token(t,e){this._auth.oauth2.getToken(t,(r,l)=>{if(r)return this.logger.info({tnx:"smtp",username:this._auth.user,action:"authfail",method:this._authMethod},"User %s failed to authenticate",JSON.stringify(this._auth.user)),e(this._formatError(r,"EAUTH",!1,"AUTH XOAUTH2"));this._responseActions.push(d=>{this._actionAUTHComplete(d,t,e)}),this._sendCommand("AUTH XOAUTH2 "+this._auth.oauth2.buildXOAuth2Token(l),"AUTH XOAUTH2 "+this._auth.oauth2.buildXOAuth2Token("/* secret */"))})}_isDestroyedMessage(t){if(this._destroyed)return"Cannot "+t+" - smtp connection is already destroyed.";if(this._socket){if(this._socket.destroyed)return"Cannot "+t+" - smtp connection socket is already destroyed.";if(!this._socket.writable)return"Cannot "+t+" - smtp connection socket is already half-closed."}}_getHostname(){let t;try{t=o.hostname()||""}catch{t="localhost"}return(!t||t.indexOf(".")<0)&&(t="[127.0.0.1]"),t.match(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/)&&(t="["+t+"]"),t}}return Ie=f,Ie}var Me,ht;function jt(){if(ht)return Me;ht=1;const _=C.Stream,w=ae(),y=C,u=O();class o extends _{constructor(s,c){if(super(),this.options=s||{},s&&s.serviceClient){if(!s.privateKey||!s.user){setImmediate(()=>this.emit("error",new Error('Options "privateKey" and "user" are required for service account!')));return}let i=Math.min(Math.max(Number(this.options.serviceRequestTimeout)||0,0),3600);this.options.serviceRequestTimeout=i||5*60}if(this.logger=u.getLogger({logger:c},{component:this.options.component||"OAuth2"}),this.provisionCallback=typeof this.options.provisionCallback=="function"?this.options.provisionCallback:!1,this.options.accessUrl=this.options.accessUrl||"https://accounts.google.com/o/oauth2/token",this.options.customHeaders=this.options.customHeaders||{},this.options.customParams=this.options.customParams||{},this.accessToken=this.options.accessToken||!1,this.options.expires&&Number(this.options.expires))this.expires=this.options.expires;else{let i=Math.max(Number(this.options.timeout)||0,0);this.expires=i&&Date.now()+i*1e3||0}}getToken(s,c){if(!s&&this.accessToken&&(!this.expires||this.expires>Date.now()))return c(null,this.accessToken);let i=(...a)=>{a[0]?this.logger.error({err:a[0],tnx:"OAUTH2",user:this.options.user,action:"renew"},"Failed generating new Access Token for %s",this.options.user):this.logger.info({tnx:"OAUTH2",user:this.options.user,action:"renew"},"Generated new Access Token for %s",this.options.user),c(...a)};this.provisionCallback?this.provisionCallback(this.options.user,!!s,(a,m,p)=>{!a&&m&&(this.accessToken=m,this.expires=p||0),i(a,m)}):this.generateToken(i)}updateToken(s,c){this.accessToken=s,c=Math.max(Number(c)||0,0),this.expires=c&&Date.now()+c*1e3||0,this.emit("token",{user:this.options.user,accessToken:s||"",expires:this.expires})}generateToken(s){let c,i;if(this.options.serviceClient){let a=Math.floor(Date.now()/1e3),m={iss:this.options.serviceClient,scope:this.options.scope||"https://mail.google.com/",sub:this.options.user,aud:this.options.accessUrl,iat:a,exp:a+this.options.serviceRequestTimeout},p;try{p=this.jwtSignRS256(m)}catch{return s(new Error("Can't generate token. Check your auth options"))}c={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:p},i={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:m}}else{if(!this.options.refreshToken)return s(new Error("Can't create new access token for user"));c={client_id:this.options.clientId||"",client_secret:this.options.clientSecret||"",refresh_token:this.options.refreshToken,grant_type:"refresh_token"},i={client_id:this.options.clientId||"",client_secret:(this.options.clientSecret||"").substr(0,6)+"...",refresh_token:(this.options.refreshToken||"").substr(0,6)+"...",grant_type:"refresh_token"}}Object.keys(this.options.customParams).forEach(a=>{c[a]=this.options.customParams[a],i[a]=this.options.customParams[a]}),this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"generate"},"Requesting token using: %s",JSON.stringify(i)),this.postRequest(this.options.accessUrl,c,this.options,(a,m)=>{let p;if(a)return s(a);try{p=JSON.parse(m.toString())}catch(f){return s(f)}if(!p||typeof p!="object")return this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"post"},"Response: %s",(m||"").toString()),s(new Error("Invalid authentication response"));let h={};if(Object.keys(p).forEach(f=>{f!=="access_token"?h[f]=p[f]:h[f]=(p[f]||"").toString().substr(0,6)+"..."}),this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"post"},"Response: %s",JSON.stringify(h)),p.error){let f=p.error;return p.error_description&&(f+=": "+p.error_description),p.error_uri&&(f+=" ("+p.error_uri+")"),s(new Error(f))}return p.access_token?(this.updateToken(p.access_token,p.expires_in),s(null,this.accessToken)):s(new Error("No access token"))})}buildXOAuth2Token(s){let c=["user="+(this.options.user||""),"auth=Bearer "+(s||this.accessToken),"",""];return Buffer.from(c.join(""),"utf-8").toString("base64")}postRequest(s,c,i,a){let m=!1,p=[],h=0,f=w(s,{method:"post",headers:i.customHeaders,body:c,allowErrorResponse:!0});f.on("readable",()=>{let g;for(;(g=f.read())!==null;)p.push(g),h+=g.length}),f.once("error",g=>{if(!m)return m=!0,a(g)}),f.once("end",()=>{if(!m)return m=!0,a(null,Buffer.concat(p,h))})}toBase64URL(s){return typeof s=="string"&&(s=Buffer.from(s)),s.toString("base64").replace(/[=]+/g,"").replace(/\+/g,"-").replace(/\//g,"_")}jwtSignRS256(s){s=['{"alg":"RS256","typ":"JWT"}',JSON.stringify(s)].map(i=>this.toBase64URL(i)).join(".");let c=y.createSign("RSA-SHA256").update(s).sign(this.options.privateKey);return s+"."+this.toBase64URL(c)}}return Me=o,Me}var Ne,ut;function ui(){if(ut)return Ne;ut=1;const _=Be(),w=O().assign,y=jt(),u=C;class o extends u{constructor(s){if(super(),this.pool=s,this.options=s.options,this.logger=this.pool.logger,this.options.auth)switch((this.options.auth.type||"").toString().toUpperCase()){case"OAUTH2":{let c=new y(this.options.auth,this.logger);c.provisionCallback=this.pool.mailer&&this.pool.mailer.get("oauth2_provision_cb")||c.provisionCallback,this.auth={type:"OAUTH2",user:this.options.auth.user,oauth2:c,method:"XOAUTH2"},c.on("token",i=>this.pool.mailer.emit("token",i)),c.on("error",i=>this.emit("error",i));break}default:if(!this.options.auth.user&&!this.options.auth.pass)break;this.auth={type:(this.options.auth.type||"").toString().toUpperCase()||"LOGIN",user:this.options.auth.user,credentials:{user:this.options.auth.user||"",pass:this.options.auth.pass,options:this.options.auth.options},method:(this.options.auth.method||"").trim().toUpperCase()||this.options.authMethod||!1}}this._connection=!1,this._connected=!1,this.messages=0,this.available=!0}connect(s){this.pool.getSocket(this.options,(c,i)=>{if(c)return s(c);let a=!1,m=this.options;i&&i.connection&&(this.logger.info({tnx:"proxy",remoteAddress:i.connection.remoteAddress,remotePort:i.connection.remotePort,destHost:m.host||"",destPort:m.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",i.connection.remoteAddress,i.connection.remotePort,m.host||"",m.port||""),m=w(!1,m),Object.keys(i).forEach(p=>{m[p]=i[p]})),this.connection=new _(m),this.connection.once("error",p=>{if(this.emit("error",p),!a)return a=!0,s(p)}),this.connection.once("end",()=>{if(this.close(),a)return;a=!0;let p=setTimeout(()=>{if(a)return;let h=new Error("Unexpected socket close");this.connection&&this.connection._socket&&this.connection._socket.upgrading&&(h.code="ETLS"),s(h)},1e3);try{p.unref()}catch{}}),this.connection.connect(()=>{if(!a)if(this.auth&&(this.connection.allowsAuth||m.forceAuth))this.connection.login(this.auth,p=>{if(!a){if(a=!0,p)return this.connection.close(),this.emit("error",p),s(p);this._connected=!0,s(null,!0)}});else return a=!0,this._connected=!0,s(null,!0)})})}send(s,c){if(!this._connected)return this.connect(p=>p?c(p):this.send(s,c));let i=s.message.getEnvelope(),a=s.message.messageId(),m=[].concat(i.to||[]);m.length>3&&m.push("...and "+m.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:a,cid:this.id},"Sending message %s using #%s to <%s>",a,this.id,m.join(", ")),s.data.dsn&&(i.dsn=s.data.dsn),this.connection.send(i,s.message.createReadStream(),(p,h)=>{if(this.messages++,p)return this.connection.close(),this.emit("error",p),c(p);h.envelope={from:i.from,to:i.to},h.messageId=a,setImmediate(()=>{let f;this.messages>=this.options.maxMessages?(f=new Error("Resource exhausted"),f.code="EMAXLIMIT",this.connection.close(),this.emit("error",f)):this.pool._checkRateLimit(()=>{this.available=!0,this.emit("available")})}),c(null,h)})}close(){this._connected=!1,this.auth&&this.auth.oauth2&&this.auth.oauth2.removeAllListeners(),this.connection&&this.connection.close(),this.emit("close")}}return Ne=o,Ne}const fi={domains:["aliyun.com"],host:"smtp.aliyun.com",port:465,secure:!0},xi={domains:["aol.com"],host:"smtp.aol.com",port:587},gi={host:"smtpauths.bluewin.ch",domains:["bluewin.ch"],port:465},vi={host:"debugmail.io",port:25},wi={aliases:["Dynect"],host:"smtp.dynect.net",port:25},bi={aliases:["ethereal.email"],host:"smtp.ethereal.email",port:587},_i={domains:["fastmail.fm"],host:"smtp.fastmail.com",port:465,secure:!0},yi={aliases:["Gandi","Gandi Mail"],host:"mail.gandi.net",port:587},Ei={aliases:["Google Mail"],domains:["gmail.com","googlemail.com"],host:"smtp.gmail.com",port:465,secure:!0},ki={host:"smtpout.secureserver.net",port:25},Ti={host:"smtp.asia.secureserver.net",port:25},Si={host:"smtp.europe.secureserver.net",port:25},Ci={aliases:["Outlook","Outlook.com","Hotmail.com"],domains:["hotmail.com","outlook.com"],host:"smtp-mail.outlook.com",port:587},Ai={aliases:["Me","Mac"],domains:["me.com","mac.com"],host:"smtp.mail.me.com",port:587},ji={host:"mail.infomaniak.com",domains:["ik.me","ikmail.com","etik.com"],port:587},Ii={host:"mailcluster.loopia.se",port:465},Mi={port:1025,ignoreTLS:!0},Ni={host:"smtp.mailgun.org",port:465,secure:!0},Hi={host:"in.mailjet.com",port:587},Li={host:"mailosaur.io",port:25},qi={host:"live.smtp.mailtrap.io",port:587},zi={host:"smtp.mandrillapp.com",port:587},Oi={host:"smtp.naver.com",port:587},Ri={host:"send.one.com",port:465,secure:!0},Pi={aliases:["OMB","openmailbox.org"],host:"smtp.openmailbox.org",port:465,secure:!0},Bi={host:"smtp.office365.com",port:587,secure:!1},Ui={host:"smtp.ohmysmtp.com",port:587,secure:!1},Di={aliases:["PostmarkApp"],host:"smtp.postmarkapp.com",port:2525},Fi={aliases:["ProtonMail","Proton.me","Protonmail.com","Protonmail.ch"],domains:["proton.me","protonmail.com","pm.me","protonmail.ch"],host:"smtp.protonmail.ch",port:587,requireTLS:!0},Ki={domains:["qq.com"],host:"smtp.qq.com",port:465,secure:!0},Vi={aliases:["QQ Enterprise"],domains:["exmail.qq.com"],host:"smtp.exmail.qq.com",port:465,secure:!0},Gi={host:"smtp.sendcloud.net",port:2525},Qi={host:"smtp.sendgrid.net",port:587},$i={aliases:["Brevo"],host:"smtp-relay.brevo.com",port:587},Xi={host:"smtp-pulse.com",port:465,secure:!0},Ji={host:"email-smtp.us-east-1.amazonaws.com",port:465,secure:!0},Wi={aliases:["Seznam Email"],domains:["seznam.cz","email.cz","post.cz","spoluzaci.cz"],host:"smtp.seznam.cz",port:465,secure:!0},Yi={aliases:["SparkPost","SparkPost Mail"],domains:["sparkpost.com"],host:"smtp.sparkpostmail.com",port:587,secure:!1},Zi={host:"smtp.tipimail.com",port:587},ea={domains:["yahoo.com"],host:"smtp.mail.yahoo.com",port:465,secure:!0},ta={domains:["yandex.ru"],host:"smtp.yandex.ru",port:465,secure:!0},ia={host:"smtp.zoho.com",port:465,secure:!0,authMethod:"LOGIN"},aa={126:{host:"smtp.126.com",port:465,secure:!0},163:{host:"smtp.163.com",port:465,secure:!0},"1und1":{host:"smtp.1und1.de",port:465,secure:!0,authMethod:"LOGIN"},Aliyun:fi,AOL:xi,Bluewin:gi,DebugMail:vi,DynectEmail:wi,Ethereal:bi,FastMail:_i,"Forward Email":{aliases:["FE","ForwardEmail"],domains:["forwardemail.net"],host:"smtp.forwardemail.net",port:465,secure:!0},"Feishu Mail":{aliases:["Feishu","FeishuMail"],domains:["www.feishu.cn"],host:"smtp.feishu.cn",port:465,secure:!0},GandiMail:yi,Gmail:Ei,Godaddy:ki,GodaddyAsia:Ti,GodaddyEurope:Si,"hot.ee":{host:"mail.hot.ee"},Hotmail:Ci,iCloud:Ai,Infomaniak:ji,Loopia:Ii,"mail.ee":{host:"smtp.mail.ee"},"Mail.ru":{host:"smtp.mail.ru",port:465,secure:!0},"Mailcatch.app":{host:"sandbox-smtp.mailcatch.app",port:2525},Maildev:Mi,Mailgun:Ni,Mailjet:Hi,Mailosaur:Li,Mailtrap:qi,Mandrill:zi,Naver:Oi,One:Ri,OpenMailBox:Pi,Outlook365:Bi,OhMySMTP:Ui,Postmark:Di,Proton:Fi,"qiye.aliyun":{host:"smtp.mxhichina.com",port:"465",secure:!0},QQ:Ki,QQex:Vi,SendCloud:Gi,SendGrid:Qi,SendinBlue:$i,SendPulse:Xi,SES:Ji,"SES-US-EAST-1":{host:"email-smtp.us-east-1.amazonaws.com",port:465,secure:!0},"SES-US-WEST-2":{host:"email-smtp.us-west-2.amazonaws.com",port:465,secure:!0},"SES-EU-WEST-1":{host:"email-smtp.eu-west-1.amazonaws.com",port:465,secure:!0},"SES-AP-SOUTH-1":{host:"email-smtp.ap-south-1.amazonaws.com",port:465,secure:!0},"SES-AP-NORTHEAST-1":{host:"email-smtp.ap-northeast-1.amazonaws.com",port:465,secure:!0},"SES-AP-NORTHEAST-2":{host:"email-smtp.ap-northeast-2.amazonaws.com",port:465,secure:!0},"SES-AP-NORTHEAST-3":{host:"email-smtp.ap-northeast-3.amazonaws.com",port:465,secure:!0},"SES-AP-SOUTHEAST-1":{host:"email-smtp.ap-southeast-1.amazonaws.com",port:465,secure:!0},"SES-AP-SOUTHEAST-2":{host:"email-smtp.ap-southeast-2.amazonaws.com",port:465,secure:!0},Seznam:Wi,Sparkpost:Yi,Tipimail:Zi,Yahoo:ea,Yandex:ta,Zoho:ia};var He,ft;function It(){if(ft)return He;ft=1;const _=aa,w={};Object.keys(_).forEach(o=>{let n=_[o];w[y(o)]=u(n),[].concat(n.aliases||[]).forEach(s=>{w[y(s)]=u(n)}),[].concat(n.domains||[]).forEach(s=>{w[y(s)]=u(n)})});function y(o){return o.replace(/[^a-zA-Z0-9.-]/g,"").toLowerCase()}function u(o){let n=["domains","aliases"],s={};return Object.keys(o).forEach(c=>{n.indexOf(c)<0&&(s[c]=o[c])}),s}return He=function(o){return o=y(o.split("@").pop()),w[o]||!1},He}var Le,xt;function sa(){if(xt)return Le;xt=1;const _=C,w=ui(),y=Be(),u=It(),o=O(),n=U;class s extends _{constructor(i){super(),i=i||{},typeof i=="string"&&(i={url:i});let a,m=i.service;typeof i.getSocket=="function"&&(this.getSocket=i.getSocket),i.url&&(a=o.parseConnectionUrl(i.url),m=m||a.service),this.options=o.assign(!1,i,a,m&&u(m)),this.options.maxConnections=this.options.maxConnections||5,this.options.maxMessages=this.options.maxMessages||100,this.logger=o.getLogger(this.options,{component:this.options.component||"smtp-pool"});let p=new y(this.options);this.name="SMTP (pool)",this.version=n.version+"[client:"+p.version+"]",this._rateLimit={counter:0,timeout:null,waiting:[],checkpoint:!1,delta:Number(this.options.rateDelta)||1e3,limit:Number(this.options.rateLimit)||0},this._closed=!1,this._queue=[],this._connections=[],this._connectionCounter=0,this.idling=!0,setImmediate(()=>{this.idling&&this.emit("idle")})}getSocket(i,a){return setImmediate(()=>a(null,!1))}send(i,a){return this._closed?!1:(this._queue.push({mail:i,requeueAttempts:0,callback:a}),this.idling&&this._queue.length>=this.options.maxConnections&&(this.idling=!1),setImmediate(()=>this._processMessages()),!0)}close(){let i,a=this._connections.length;if(this._closed=!0,clearTimeout(this._rateLimit.timeout),!a&&!this._queue.length)return;for(let p=a-1;p>=0;p--)this._connections[p]&&this._connections[p].available&&(i=this._connections[p],i.close(),this.logger.info({tnx:"connection",cid:i.id,action:"removed"},"Connection #%s removed",i.id));if(a&&!this._connections.length&&this.logger.debug({tnx:"connection"},"All connections removed"),!this._queue.length)return;let m=()=>{if(!this._queue.length){this.logger.debug({tnx:"connection"},"Pending queue entries cleared");return}let p=this._queue.shift();if(p&&typeof p.callback=="function")try{p.callback(new Error("Connection pool was closed"))}catch(h){this.logger.error({err:h,tnx:"callback",cid:i.id},"Callback error for #%s: %s",i.id,h.message)}setImmediate(m)};setImmediate(m)}_processMessages(){let i,a,m;if(this._closed)return;if(!this._queue.length){this.idling||(this.idling=!0,this.emit("idle"));return}for(a=0,m=this._connections.length;a<m;a++)if(this._connections[a].available){i=this._connections[a];break}if(!i&&this._connections.length<this.options.maxConnections&&(i=this._createConnection()),!i){this.idling=!1;return}!this.idling&&this._queue.length<this.options.maxConnections&&(this.idling=!0,this.emit("idle"));let p=i.queueEntry=this._queue.shift();p.messageId=(i.queueEntry.mail.message.getHeader("message-id")||"").replace(/[<>\s]/g,""),i.available=!1,this.logger.debug({tnx:"pool",cid:i.id,messageId:p.messageId,action:"assign"},"Assigned message <%s> to #%s (%s)",p.messageId,i.id,i.messages+1),this._rateLimit.limit&&(this._rateLimit.counter++,this._rateLimit.checkpoint||(this._rateLimit.checkpoint=Date.now())),i.send(p.mail,(h,f)=>{if(p===i.queueEntry){try{p.callback(h,f)}catch(g){this.logger.error({err:g,tnx:"callback",cid:i.id},"Callback error for #%s: %s",i.id,g.message)}i.queueEntry=!1}})}_createConnection(){let i=new w(this);return i.id=++this._connectionCounter,this.logger.info({tnx:"pool",cid:i.id,action:"conection"},"Created new pool resource #%s",i.id),i.on("available",()=>{this.logger.debug({tnx:"connection",cid:i.id,action:"available"},"Connection #%s became available",i.id),this._closed?this.close():this._processMessages()}),i.once("error",a=>{if(a.code!=="EMAXLIMIT"?this.logger.error({err:a,tnx:"pool",cid:i.id},"Pool Error for #%s: %s",i.id,a.message):this.logger.debug({tnx:"pool",cid:i.id,action:"maxlimit"},"Max messages limit exchausted for #%s",i.id),i.queueEntry){try{i.queueEntry.callback(a)}catch(m){this.logger.error({err:m,tnx:"callback",cid:i.id},"Callback error for #%s: %s",i.id,m.message)}i.queueEntry=!1}this._removeConnection(i),this._continueProcessing()}),i.once("close",()=>{this.logger.info({tnx:"connection",cid:i.id,action:"closed"},"Connection #%s was closed",i.id),this._removeConnection(i),i.queueEntry?setTimeout(()=>{i.queueEntry&&(this._shouldRequeuOnConnectionClose(i.queueEntry)?this._requeueEntryOnConnectionClose(i):this._failDeliveryOnConnectionClose(i)),this._continueProcessing()},50):this._continueProcessing()}),this._connections.push(i),i}_shouldRequeuOnConnectionClose(i){return this.options.maxRequeues===void 0||this.options.maxRequeues<0?!0:i.requeueAttempts<this.options.maxRequeues}_failDeliveryOnConnectionClose(i){if(i.queueEntry&&i.queueEntry.callback){try{i.queueEntry.callback(new Error("Reached maximum number of retries after connection was closed"))}catch(a){this.logger.error({err:a,tnx:"callback",messageId:i.queueEntry.messageId,cid:i.id},"Callback error for #%s: %s",i.id,a.message)}i.queueEntry=!1}}_requeueEntryOnConnectionClose(i){i.queueEntry.requeueAttempts=i.queueEntry.requeueAttempts+1,this.logger.debug({tnx:"pool",cid:i.id,messageId:i.queueEntry.messageId,action:"requeue"},"Re-queued message <%s> for #%s. Attempt: #%s",i.queueEntry.messageId,i.id,i.queueEntry.requeueAttempts),this._queue.unshift(i.queueEntry),i.queueEntry=!1}_continueProcessing(){this._closed?this.close():setTimeout(()=>this._processMessages(),100)}_removeConnection(i){let a=this._connections.indexOf(i);a!==-1&&this._connections.splice(a,1)}_checkRateLimit(i){if(!this._rateLimit.limit)return i();let a=Date.now();if(this._rateLimit.counter<this._rateLimit.limit)return i();if(this._rateLimit.waiting.push(i),this._rateLimit.checkpoint<=a-this._rateLimit.delta)return this._clearRateLimit();this._rateLimit.timeout||(this._rateLimit.timeout=setTimeout(()=>this._clearRateLimit(),this._rateLimit.delta-(a-this._rateLimit.checkpoint)),this._rateLimit.checkpoint=a)}_clearRateLimit(){for(clearTimeout(this._rateLimit.timeout),this._rateLimit.timeout=null,this._rateLimit.counter=0,this._rateLimit.checkpoint=!1;this._rateLimit.waiting.length;){let i=this._rateLimit.waiting.shift();setImmediate(i)}}isIdle(){return this.idling}verify(i){let a;i||(a=new Promise((p,h)=>{i=o.callbackPromise(p,h)}));let m=new w(this).auth;return this.getSocket(this.options,(p,h)=>{if(p)return i(p);let f=this.options;h&&h.connection&&(this.logger.info({tnx:"proxy",remoteAddress:h.connection.remoteAddress,remotePort:h.connection.remotePort,destHost:f.host||"",destPort:f.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",h.connection.remoteAddress,h.connection.remotePort,f.host||"",f.port||""),f=o.assign(!1,f),Object.keys(h).forEach(r=>{f[r]=h[r]}));let g=new y(f),t=!1;g.once("error",r=>{if(!t)return t=!0,g.close(),i(r)}),g.once("end",()=>{if(!t)return t=!0,i(new Error("Connection closed"))});let e=()=>{if(!t)return t=!0,g.quit(),i(null,!0)};g.connect(()=>{if(!t)if(m&&(g.allowsAuth||f.forceAuth))g.login(m,r=>{if(!t){if(r)return t=!0,g.close(),i(r);e()}});else if(!m&&g.allowsAuth&&f.forceAuth){let r=new Error("Authentication info was not provided");return r.code="NoAuth",t=!0,g.close(),i(r)}else e()})}),a}}return Le=s,Le}var qe,gt;function na(){if(gt)return qe;gt=1;const _=C,w=Be(),y=It(),u=O(),o=jt(),n=U;class s extends _{constructor(i){super(),i=i||{},typeof i=="string"&&(i={url:i});let a,m=i.service;typeof i.getSocket=="function"&&(this.getSocket=i.getSocket),i.url&&(a=u.parseConnectionUrl(i.url),m=m||a.service),this.options=u.assign(!1,i,a,m&&y(m)),this.logger=u.getLogger(this.options,{component:this.options.component||"smtp-transport"});let p=new w(this.options);this.name="SMTP",this.version=n.version+"[client:"+p.version+"]",this.options.auth&&(this.auth=this.getAuth({}))}getSocket(i,a){return setImmediate(()=>a(null,!1))}getAuth(i){if(!i)return this.auth;let a=!1,m={};if(this.options.auth&&typeof this.options.auth=="object"&&Object.keys(this.options.auth).forEach(p=>{a=!0,m[p]=this.options.auth[p]}),i&&typeof i=="object"&&Object.keys(i).forEach(p=>{a=!0,m[p]=i[p]}),!a)return!1;switch((m.type||"").toString().toUpperCase()){case"OAUTH2":{if(!m.service&&!m.user)return!1;let p=new o(m,this.logger);return p.provisionCallback=this.mailer&&this.mailer.get("oauth2_provision_cb")||p.provisionCallback,p.on("token",h=>this.mailer.emit("token",h)),p.on("error",h=>this.emit("error",h)),{type:"OAUTH2",user:m.user,oauth2:p,method:"XOAUTH2"}}default:return{type:(m.type||"").toString().toUpperCase()||"LOGIN",user:m.user,credentials:{user:m.user||"",pass:m.pass,options:m.options},method:(m.method||"").trim().toUpperCase()||this.options.authMethod||!1}}}send(i,a){this.getSocket(this.options,(m,p)=>{if(m)return a(m);let h=!1,f=this.options;p&&p.connection&&(this.logger.info({tnx:"proxy",remoteAddress:p.connection.remoteAddress,remotePort:p.connection.remotePort,destHost:f.host||"",destPort:f.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",p.connection.remoteAddress,p.connection.remotePort,f.host||"",f.port||""),f=u.assign(!1,f),Object.keys(p).forEach(e=>{f[e]=p[e]}));let g=new w(f);g.once("error",e=>{if(!h)return h=!0,g.close(),a(e)}),g.once("end",()=>{if(h)return;let e=setTimeout(()=>{if(h)return;h=!0;let r=new Error("Unexpected socket close");g&&g._socket&&g._socket.upgrading&&(r.code="ETLS"),a(r)},1e3);try{e.unref()}catch{}});let t=()=>{let e=i.message.getEnvelope(),r=i.message.messageId(),l=[].concat(e.to||[]);l.length>3&&l.push("...and "+l.splice(2).length+" more"),i.data.dsn&&(e.dsn=i.data.dsn),this.logger.info({tnx:"send",messageId:r},"Sending message %s to <%s>",r,l.join(", ")),g.send(e,i.message.createReadStream(),(d,x)=>{if(h=!0,g.close(),d)return this.logger.error({err:d,tnx:"send"},"Send error for %s: %s",r,d.message),a(d);x.envelope={from:e.from,to:e.to},x.messageId=r;try{return a(null,x)}catch(b){this.logger.error({err:b,tnx:"callback"},"Callback error for %s: %s",r,b.message)}})};g.connect(()=>{if(h)return;let e=this.getAuth(i.data.auth);e&&(g.allowsAuth||f.forceAuth)?g.login(e,r=>{if(e&&e!==this.auth&&e.oauth2&&e.oauth2.removeAllListeners(),!h){if(r)return h=!0,g.close(),a(r);t()}}):t()})})}verify(i){let a;return i||(a=new Promise((m,p)=>{i=u.callbackPromise(m,p)})),this.getSocket(this.options,(m,p)=>{if(m)return i(m);let h=this.options;p&&p.connection&&(this.logger.info({tnx:"proxy",remoteAddress:p.connection.remoteAddress,remotePort:p.connection.remotePort,destHost:h.host||"",destPort:h.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",p.connection.remoteAddress,p.connection.remotePort,h.host||"",h.port||""),h=u.assign(!1,h),Object.keys(p).forEach(e=>{h[e]=p[e]}));let f=new w(h),g=!1;f.once("error",e=>{if(!g)return g=!0,f.close(),i(e)}),f.once("end",()=>{if(!g)return g=!0,i(new Error("Connection closed"))});let t=()=>{if(!g)return g=!0,f.quit(),i(null,!0)};f.connect(()=>{if(g)return;let e=this.getAuth({});if(e&&(f.allowsAuth||h.forceAuth))f.login(e,r=>{if(!g){if(r)return g=!0,f.close(),i(r);t()}});else if(!e&&f.allowsAuth&&h.forceAuth){let r=new Error("Authentication info was not provided");return r.code="NoAuth",g=!0,f.close(),i(r)}else t()})}),a}close(){this.auth&&this.auth.oauth2&&this.auth.oauth2.removeAllListeners(),this.emit("close")}}return qe=s,qe}var ze,vt;function oa(){if(vt)return ze;vt=1;const _=C.spawn,w=U,y=O();class u{constructor(n){n=n||{},this._spawn=_,this.options=n||{},this.name="Sendmail",this.version=w.version,this.path="sendmail",this.args=!1,this.winbreak=!1,this.logger=y.getLogger(this.options,{component:this.options.component||"sendmail"}),n&&(typeof n=="string"?this.path=n:typeof n=="object"&&(n.path&&(this.path=n.path),Array.isArray(n.args)&&(this.args=n.args),this.winbreak=["win","windows","dos",`\r
`].includes((n.newline||"").toString().toLowerCase())))}send(n,s){n.message.keepBcc=!0;let c=n.data.envelope||n.message.getEnvelope(),i=n.message.messageId(),a,m,p;if([].concat(c.from||[]).concat(c.to||[]).some(g=>/^-/.test(g)))return s(new Error("Can not send mail. Invalid envelope addresses."));this.args?a=["-i"].concat(this.args).concat(c.to):a=["-i"].concat(c.from?["-f",c.from]:[]).concat(c.to);let f=g=>{if(!p&&(p=!0,typeof s=="function"))return g?s(g):s(null,{envelope:n.data.envelope||n.message.getEnvelope(),messageId:i,response:"Messages queued for delivery"})};try{m=this._spawn(this.path,a)}catch(g){return this.logger.error({err:g,tnx:"spawn",messageId:i},"Error occurred while spawning sendmail. %s",g.message),f(g)}if(m){m.on("error",e=>{this.logger.error({err:e,tnx:"spawn",messageId:i},"Error occurred when sending message %s. %s",i,e.message),f(e)}),m.once("exit",e=>{if(!e)return f();let r;e===127?r=new Error("Sendmail command not found, process exited with code "+e):r=new Error("Sendmail exited with code "+e),this.logger.error({err:r,tnx:"stdin",messageId:i},"Error sending message %s to sendmail. %s",i,r.message),f(r)}),m.once("close",f),m.stdin.on("error",e=>{this.logger.error({err:e,tnx:"stdin",messageId:i},"Error occurred when piping message %s to sendmail. %s",i,e.message),f(e)});let g=[].concat(c.to||[]);g.length>3&&g.push("...and "+g.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:i},"Sending message %s to <%s>",i,g.join(", "));let t=n.message.createReadStream();t.once("error",e=>{this.logger.error({err:e,tnx:"stdin",messageId:i},"Error occurred when generating message %s. %s",i,e.message),m.kill("SIGINT"),f(e)}),t.pipe(m.stdin)}else return f(new Error("sendmail was not found"))}}return ze=u,ze}var Oe,wt;function ra(){if(wt)return Oe;wt=1;const _=U,w=O();class y{constructor(o){o=o||{},this.options=o||{},this.name="StreamTransport",this.version=_.version,this.logger=w.getLogger(this.options,{component:this.options.component||"stream-transport"}),this.winbreak=["win","windows","dos",`\r
`].includes((o.newline||"").toString().toLowerCase())}send(o,n){o.message.keepBcc=!0;let s=o.data.envelope||o.message.getEnvelope(),c=o.message.messageId(),i=[].concat(s.to||[]);i.length>3&&i.push("...and "+i.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:c},"Sending message %s to <%s> using %s line breaks",c,i.join(", "),this.winbreak?"<CR><LF>":"<LF>"),setImmediate(()=>{let a;try{a=o.message.createReadStream()}catch(h){return this.logger.error({err:h,tnx:"send",messageId:c},"Creating send stream failed for %s. %s",c,h.message),n(h)}if(!this.options.buffer)return a.once("error",h=>{this.logger.error({err:h,tnx:"send",messageId:c},"Failed creating message for %s. %s",c,h.message)}),n(null,{envelope:o.data.envelope||o.message.getEnvelope(),messageId:c,message:a});let m=[],p=0;a.on("readable",()=>{let h;for(;(h=a.read())!==null;)m.push(h),p+=h.length}),a.once("error",h=>(this.logger.error({err:h,tnx:"send",messageId:c},"Failed creating message for %s. %s",c,h.message),n(h))),a.on("end",()=>n(null,{envelope:o.data.envelope||o.message.getEnvelope(),messageId:c,message:Buffer.concat(m,p)}))})}}return Oe=y,Oe}var Re,bt;function pa(){if(bt)return Re;bt=1;const _=U,w=O();class y{constructor(o){o=o||{},this.options=o||{},this.name="JSONTransport",this.version=_.version,this.logger=w.getLogger(this.options,{component:this.options.component||"json-transport"})}send(o,n){o.message.keepBcc=!0;let s=o.data.envelope||o.message.getEnvelope(),c=o.message.messageId(),i=[].concat(s.to||[]);i.length>3&&i.push("...and "+i.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:c},"Composing JSON structure of %s to <%s>",c,i.join(", ")),setImmediate(()=>{o.normalize((a,m)=>a?(this.logger.error({err:a,tnx:"send",messageId:c},"Failed building JSON structure for %s. %s",c,a.message),n(a)):(delete m.envelope,delete m.normalizedHeaders,n(null,{envelope:s,messageId:c,message:this.options.skipEncoding?m:JSON.stringify(m)})))})}}return Re=y,Re}var Pe,_t;function la(){if(_t)return Pe;_t=1;const _=C,w=U,y=O(),u=Ct();class o extends _{constructor(s){super(),s=s||{},this.options=s||{},this.ses=this.options.SES,this.name="SESTransport",this.version=w.version,this.logger=y.getLogger(this.options,{component:this.options.component||"ses-transport"}),this.maxConnections=Number(this.options.maxConnections)||1/0,this.connections=0,this.sendingRate=Number(this.options.sendingRate)||1/0,this.sendingRateTTL=null,this.rateInterval=1e3,this.rateMessages=[],this.pending=[],this.idling=!0,setImmediate(()=>{this.idling&&this.emit("idle")})}send(s,c){if(this.connections>=this.maxConnections)return this.idling=!1,this.pending.push({mail:s,callback:c});if(!this._checkSendingRate())return this.idling=!1,this.pending.push({mail:s,callback:c});this._send(s,(...i)=>{setImmediate(()=>c(...i)),this._sent()})}_checkRatedQueue(){if(this.connections>=this.maxConnections||!this._checkSendingRate())return;if(!this.pending.length){this.idling||(this.idling=!0,this.emit("idle"));return}let s=this.pending.shift();this._send(s.mail,(...c)=>{setImmediate(()=>s.callback(...c)),this._sent()})}_checkSendingRate(){clearTimeout(this.sendingRateTTL);let s=Date.now(),c=!1;for(let a=this.rateMessages.length-1;a>=0;a--)this.rateMessages[a].ts>=s-this.rateInterval&&(!c||this.rateMessages[a].ts<c)&&(c=this.rateMessages[a].ts),this.rateMessages[a].ts<s-this.rateInterval&&!this.rateMessages[a].pending&&this.rateMessages.splice(a,1);if(this.rateMessages.length<this.sendingRate)return!0;let i=Math.max(c+1001,s+20);this.sendingRateTTL=setTimeout(()=>this._checkRatedQueue(),s-i);try{this.sendingRateTTL.unref()}catch{}return!1}_sent(){this.connections--,this._checkRatedQueue()}isIdle(){return this.idling}_send(s,c){let i={ts:Date.now(),pending:!0};this.connections++,this.rateMessages.push(i);let a=s.data.envelope||s.message.getEnvelope(),m=s.message.messageId(),p=[].concat(a.to||[]);p.length>3&&p.push("...and "+p.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:m},"Sending message %s to <%s>",m,p.join(", "));let h=f=>{s.data._dkim||(s.data._dkim={}),s.data._dkim.skipFields&&typeof s.data._dkim.skipFields=="string"?s.data._dkim.skipFields+=":date:message-id":s.data._dkim.skipFields="date:message-id";let g=s.message.createReadStream(),t=g.pipe(new u),e=[],r=0;t.on("readable",()=>{let l;for(;(l=t.read())!==null;)e.push(l),r+=l.length}),g.once("error",l=>t.emit("error",l)),t.once("error",l=>{f(l)}),t.once("end",()=>f(null,Buffer.concat(e,r)))};setImmediate(()=>h((f,g)=>{if(f)return this.logger.error({err:f,tnx:"send",messageId:m},"Failed creating message for %s. %s",m,f.message),i.pending=!1,c(f);let t={RawMessage:{Data:g},Source:a.from,Destinations:a.to};Object.keys(s.data.ses||{}).forEach(d=>{t[d]=s.data.ses[d]});let e=(this.ses.aws?this.ses.ses:this.ses)||{},r=this.ses.aws||{};(d=>e.config&&typeof e.config.region=="function"?e.config.region().then(x=>d(null,x)).catch(x=>d(x)):d(null,e.config&&e.config.region||"us-east-1"))((d,x)=>{(d||!x)&&(x="us-east-1");let b;typeof e.send=="function"&&r.SendRawEmailCommand?b=e.send(new r.SendRawEmailCommand(t)):b=e.sendRawEmail(t).promise(),b.then(v=>{x==="us-east-1"&&(x="email"),i.pending=!1,c(null,{envelope:{from:a.from,to:a.to},messageId:"<"+v.MessageId+(/@/.test(v.MessageId)?"":"@"+x+".amazonses.com")+">",response:v.MessageId,raw:g})}).catch(v=>{this.logger.error({err:v,tnx:"send"},"Send error for %s: %s",m,v.message),i.pending=!1,c(v)})})}))}verify(s){let c,i=(this.ses.aws?this.ses.ses:this.ses)||{},a=this.ses.aws||{};const m={RawMessage:{Data:`From: invalid@invalid\r
To: invalid@invalid\r
 Subject: Invalid\r
\r
Invalid`},Source:"invalid@invalid",Destinations:["invalid@invalid"]};s||(c=new Promise((h,f)=>{s=y.callbackPromise(h,f)}));const p=h=>h&&(h.code||h.Code)!=="InvalidParameterValue"?s(h):s(null,!0);return typeof i.send=="function"&&a.SendRawEmailCommand?(m.RawMessage.Data=Buffer.from(m.RawMessage.Data),i.send(new a.SendRawEmailCommand(m),p)):i.sendRawEmail(m,p),c}}return Pe=o,Pe}var yt;function ca(){if(yt)return Z;yt=1;var _={};const w=mi(),y=O(),u=sa(),o=na(),n=oa(),s=ra(),c=pa(),i=la(),a=ae(),m=U,p=(_.ETHEREAL_API||"https://api.nodemailer.com").replace(/\/+$/,""),h=(_.ETHEREAL_WEB||"https://ethereal.email").replace(/\/+$/,""),f=(_.ETHEREAL_API_KEY||"").replace(/\s*/g,"")||null,g=["true","yes","y","1"].includes((_.ETHEREAL_CACHE||"yes").toString().trim().toLowerCase());let t=!1;return Z.createTransport=function(e,r){let l,d,x;return(typeof e=="object"&&typeof e.send!="function"||typeof e=="string"&&/^(smtps?|direct):/i.test(e))&&((l=typeof e=="string"?e:e.url)?d=y.parseConnectionUrl(l):d=e,d.pool?e=new u(d):d.sendmail?e=new n(d):d.streamTransport?e=new s(d):d.jsonTransport?e=new c(d):d.SES?e=new i(d):e=new o(d)),x=new w(e,d,r),x},Z.createTestAccount=function(e,r){let l;if(!r&&typeof e=="function"&&(r=e,e=!1),r||(l=new Promise((k,S)=>{r=y.callbackPromise(k,S)})),g&&t)return setImmediate(()=>r(null,t)),l;e=e||p;let d=[],x=0,b={},v={requestor:m.name,version:m.version};f&&(b.Authorization="Bearer "+f);let E=a(e+"/user",{contentType:"application/json",method:"POST",headers:b,body:Buffer.from(JSON.stringify(v))});return E.on("readable",()=>{let k;for(;(k=E.read())!==null;)d.push(k),x+=k.length}),E.once("error",k=>r(k)),E.once("end",()=>{let k=Buffer.concat(d,x),S,A;try{S=JSON.parse(k.toString())}catch(I){A=I}if(A)return r(A);if(S.status!=="success"||S.error)return r(new Error(S.error||"Request failed"));delete S.status,t=S,r(null,t)}),l},Z.getTestMessageUrl=function(e){if(!e||!e.response)return!1;let r=new Map;return e.response.replace(/\[([^\]]+)\]$/,(l,d)=>{d.replace(/\b([A-Z0-9]+)=([^\s]+)/g,(x,b,v)=>{r.set(b,v)})}),r.has("STATUS")&&r.has("MSGID")?(t.web||h)+"/message/"+r.get("MSGID"):!1},Z}var da=ca();const ma=Rt(da);class ha{constructor(){this.transporter=ma.createTransport({host:"smtp.gmail.com",port:587,secure:!1,auth:{user:"your-email@gmail.com",pass:"your-app-specific-password"}})}async sendMail({to:w,subject:y,html:u}){try{const o={from:'"AICCoin" <your-email@gmail.com>',to:w,subject:y,html:u},n=await this.transporter.sendMail(o);return console.log("Email sent:",n.messageId),n}catch(o){throw console.error("Error sending email:",o),o}}async sendBulkMail(w,y=50){const u=[],o=this.splitIntoBatches(w,y);for(const n of o){const s=await Promise.allSettled(n.map(c=>this.sendMail(c)));u.push(...s.map((c,i)=>({success:c.status==="fulfilled",email:n[i].to,messageId:c.status==="fulfilled"?c.value.messageId:null,error:c.status==="rejected"?c.reason.message:null}))),await new Promise(c=>setTimeout(c,1e3))}return u}splitIntoBatches(w,y){const u=[];for(let o=0;o<w.length;o+=y)u.push(w.slice(o,o+y));return u}}const ua=new ha,fa={name:"EmailToUsers",setup(){const _=Q([]),w=Q({total:0,active:0}),y=Q("active"),u=Q(100),o=Q(!1),n=Q({subject:"",body:""}),s=[{id:"welcome",name:"👋 Welcome",subject:"Welcome to AICCoin!",body:`Hello {userName},

Welcome to our community! Start earning with {coinBalance} coins.`},{id:"promotion",name:"🎉 Special Offer",subject:"Limited Time Offer!",body:`Hi {userName},

We have a special promotion for you! Complete tasks now to earn double coins!`},{id:"referral",name:"🤝 Referral Bonus",subject:"Earn More with Referrals",body:`Hello {userName},

Share your referral code: {referralCode} with friends and earn bonus coins!`}],c=async()=>{try{const g=await qt(le(ee,"users"));_.value=g.docs.map(t=>({id:t.id,...t.data()})),w.value={total:_.value.length,active:_.value.filter(t=>t.status==="active").length}}catch(g){console.error("Error fetching users:",g)}},i=ne(()=>{if(!_.value.length)return 0;switch(y.value){case"all":return _.value.length;case"active":return _.value.filter(g=>g.status==="active").length;case"coins":return _.value.filter(g=>(g.coinBalance||0)>=u.value).length;default:return 0}}),a=ne(()=>{if(!n.value.body)return"";const g={userName:"John Doe",coinBalance:"1,000",referralCode:"JOHN123"};return n.value.body.replace(/{userName}/g,g.userName).replace(/{coinBalance}/g,g.coinBalance).replace(/{referralCode}/g,g.referralCode)}),m=ne(()=>n.value.subject&&n.value.body&&i.value>0),p=g=>{n.value={subject:g.subject,body:g.body}},h=g=>{const t={userName:"{userName}",coinBalance:"{coinBalance}",referralCode:"{referralCode}"};n.value.body+=t[g]},f=async()=>{if(m.value){o.value=!0;try{const g=_.value.filter(d=>y.value==="all"?!0:y.value==="active"?d.status==="active":(d.coinBalance||0)>=u.value),t=await Fe(le(ee,"emailCampaigns"),{subject:n.value.subject,body:n.value.body,targetType:y.value,minCoins:y.value==="coins"?u.value:null,totalRecipients:g.length,createdAt:new Date}),e=g.map(d=>({to:d.email,subject:n.value.subject,html:n.value.body.replace(/{userName}/g,d.displayName||"User").replace(/{coinBalance}/g,d.coinBalance||0).replace(/{referralCode}/g,d.referralCode||"N/A")})),r=await ua.sendBulkMail(e),l=r.filter(d=>d.success).length;await zt(Ot(ee,"emailCampaigns",t.id),{status:"completed",successCount:l,failureCount:r.length-l,completedAt:new Date}),await Promise.all(r.map(d=>Fe(le(ee,"emailResults"),{campaignId:t.id,...d,timestamp:new Date}))),alert(`Campaign sent! Success: ${l}, Failed: ${r.length-l}`),n.value={subject:"",body:""}}catch(g){console.error("Error sending campaign:",g),alert("Failed to send campaign. Please try again.")}finally{o.value=!1}}};return Nt(c),{userStats:w,targetType:y,minCoins:u,emailContent:n,templates:s,isSending:o,targetUserCount:i,previewContent:a,canSend:m,loadTemplate:p,addVariable:h,sendEmails:f}}},xa={class:"email-system"},ga={class:"section"},va={class:"filters"},wa={class:"filter-item"},ba={class:"filter-item"},_a={class:"filter-item"},ya={key:0,class:"coin-filter"},Ea={class:"section"},ka={class:"templates"},Ta=["onClick"],Sa={class:"email-form"},Ca={class:"editor-controls"},Aa={key:0,class:"section"},ja={class:"preview-box"},Ia=["innerHTML"],Ma={class:"send-controls"},Na={class:"target-info"},Ha=["disabled"];function La(_,w,y,u,o,n){return Y(),W("div",xa,[w[14]||(w[14]=N("h2",{class:"page-title"},"📧 Promotional Emails",-1)),N("div",ga,[w[11]||(w[11]=N("h3",null,"Select Target Users",-1)),N("div",va,[N("label",wa,[$(N("input",{type:"radio","onUpdate:modelValue":w[0]||(w[0]=s=>u.targetType=s),value:"all"},null,512),[[oe,u.targetType]]),re(" All Users ("+X(u.userStats.total||0)+") ",1)]),N("label",ba,[$(N("input",{type:"radio","onUpdate:modelValue":w[1]||(w[1]=s=>u.targetType=s),value:"active"},null,512),[[oe,u.targetType]]),re(" Active Users ("+X(u.userStats.active||0)+") ",1)]),N("label",_a,[$(N("input",{type:"radio","onUpdate:modelValue":w[2]||(w[2]=s=>u.targetType=s),value:"coins"},null,512),[[oe,u.targetType]]),w[10]||(w[10]=re(" By Coin Balance "))]),u.targetType==="coins"?(Y(),W("div",ya,[$(N("input",{type:"number","onUpdate:modelValue":w[3]||(w[3]=s=>u.minCoins=s),placeholder:"Minimum coins",class:"coin-input"},null,512),[[pe,u.minCoins,void 0,{number:!0}]])])):De("",!0)])]),N("div",Ea,[w[12]||(w[12]=N("h3",null,"Email Content",-1)),N("div",ka,[(Y(!0),W(Ht,null,Lt(u.templates,s=>(Y(),W("button",{key:s.id,onClick:c=>u.loadTemplate(s),class:"template-btn"},X(s.name),9,Ta))),128))]),N("div",Sa,[$(N("input",{"onUpdate:modelValue":w[4]||(w[4]=s=>u.emailContent.subject=s),placeholder:"Email Subject",class:"subject-input"},null,512),[[pe,u.emailContent.subject]]),N("div",Ca,[N("button",{onClick:w[5]||(w[5]=s=>u.addVariable("userName")),class:"var-btn"},"Add User Name"),N("button",{onClick:w[6]||(w[6]=s=>u.addVariable("coinBalance")),class:"var-btn"},"Add Coin Balance"),N("button",{onClick:w[7]||(w[7]=s=>u.addVariable("referralCode")),class:"var-btn"},"Add Referral Code")]),$(N("textarea",{"onUpdate:modelValue":w[8]||(w[8]=s=>u.emailContent.body=s),placeholder:"Email Body",rows:"10",class:"body-input"},null,512),[[pe,u.emailContent.body]])])]),u.emailContent.body?(Y(),W("div",Aa,[w[13]||(w[13]=N("h3",null,"Preview",-1)),N("div",ja,[N("h4",null,X(u.emailContent.subject),1),N("div",{innerHTML:u.previewContent},null,8,Ia)])])):De("",!0),N("div",Ma,[N("div",Na," Target Recipients: "+X(u.targetUserCount),1),N("button",{onClick:w[9]||(w[9]=(...s)=>u.sendEmails&&u.sendEmails(...s)),disabled:!u.canSend||u.isSending,class:"send-btn"},X(u.isSending?"Sending...":"Send Campaign"),9,Ha)])])}const za=Mt(fa,[["render",La],["__scopeId","data-v-b7dce619"]]);export{za as default};
